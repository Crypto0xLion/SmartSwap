"use strict";(self.webpackChunksmardex_web=self.webpackChunksmardex_web||[]).push([[3256],{13207:function(n,e,t){t.d(e,{MV:function(){return o},YL:function(){return i},o:function(){return r}});const r=1000000n,o=20;let i=function(n){return n[n.EXACT_INPUT=0]="EXACT_INPUT",n[n.EXACT_OUTPUT=1]="EXACT_OUTPUT",n}({})},53256:function(n,e,t){t.d(e,{FV:function(){return F},YW:function(){return T}});var r=t(58903),o=t(13207),i=t(22607),c=t(23198);function u(n,e,t,r,i,u,f){const I=n*(o.o-u-f),w=I*i,s=r*o.o+I;if(0n===s)throw new c.Z("SENTIA_K_ERROR");const a=w/s,T=(n*u+I)/o.o;return[a,e+T,t-a,r+T,i-a]}function f(n,e,t,r,i,u,f){const I=o.o-u-f,w=r*n*o.o,s=(i-n)*I;if(0n===s)throw new c.Z("SENTIA_K_ERROR");const a=w/s+1n,T=(I+u)*a/o.o;return[a,e+T,t-n,r+T,i-n]}function I(n,e,t,r){if(e*t<n*r){const o=e*e/r*t/n;return[(o*t/r+e*t/r)/4n,(e+o)/4n]}return[(t*e/r+n)/4n,(n*r/t+e)/4n]}function w(n,e,t,r,f,w,s,a,T){if(n<=0n)throw new c.Z("INSUFFICIENT_INPUT_AMOUNT");if(e<=0n||t<=0n)throw new c.Z("INSUFFICIENT_LIQUIDITY");if(r<=0n||f<=0n)throw new c.Z("INSUFFICIENT_LIQUIDITY");if(w<=0n||s<=0n)throw new c.Z("INSUFFICIENT_PRICE_AVERAGE");let F=r,R=f;const _=o.o-a-T,E=n*_/o.o,U=function(n,e,t,r,c,u,f){let I=n;if(t*r>e*c){const w=o.o-u-f,s=e*(o.o+w-f),a=2n*(w+u),T=e*t*4n/c*r*w*(o.o-f)+e*e*u*u;T<(n*a+s)**2n&&(I=((0,i._b)(T)-s)/a)}return I}(E,r,f,w,s,a,T);if(U===E&&(0,i.g$)(r,f,w,s)&&([F,R]=I(e,t,r,f)),F<=0n)return[0n,e,t,F,R];const N=U*o.o/_;let[h,l,A,g,P]=u(N,e,t,F,R,a,T);if(U<E&&N<n){if([g,P]=I(l,A,g,P),g<=0n)return[0n,e,t,F,R];let r;[r,l,A,g,P]=u(n-N,l,A,g,P,a,T),h+=r}if(l<=0n||A<=0n||g<=0n||P<=0n)throw new c.Z("INSUFFICIENT_LIQUIDITY");return[h,l,A,g,P]}function s(n,e,t,u,w,s,a,T,F){if(n<=0n)throw new c.Z("INSUFFICIENT_OUTPUT_AMOUNT");if(e<=0n||t<=0n)throw new c.Z("INSUFFICIENT_LIQUIDITY");if(u<=0n||w<=0n)throw new c.Z("INSUFFICIENT_LIQUIDITY");if(s<=0n||a<=0n)throw new c.Z("INSUFFICIENT_PRICE_AVERAGE");let R=u,_=w;const E=function(n,e,t,r,c,u,f){let I=n;if(t*r>e*c){const w=o.o-u-f,s=e*u*c/r,a=t*w*2n+s,T=2n*w,F=t*s*4n*w*(o.o-f)/u+s**2n;F>(a-n*T)**2n&&(I=(a-(0,i._b)(F))/T)}return I}(n,u,w,s,a,T,F);if(E===n&&(0,i.g$)(u,w,s,a)&&([R,_]=I(e,t,u,w)),u<=0n)return[(0,r.f)("0"),e,t,R,_];let[U,N,h,l,A]=f(E,e,t,R,_,T,F);if(E<n){if([l,A]=I(N,h,l,A),l<=0n)return[(0,r.f)("0"),e,t,R,_];let o;[o,N,h,l,A]=f(n-E,N,h,l,A,T,F),U+=o}if(N<=0n||h<=0n||l<=0n||A<=0n)throw new c.Z("INSUFFICIENT_LIQUIDITY");return[U,N,h,l,A]}function a(n,e,t,r,o,i,u){if(i<t)throw new c.Z("INVALID_TIMESTAMP","SentiaError");if(0===t||0n===r||0n===o)return[n,e];if(t===i)return[r,o];const f=Math.min(i-t,u);return[n,(o*n*BigInt(u-f)/r+e*BigInt(f))/BigInt(u)]}function T(n,e,t,r,i,c,u,f,I,s,T,F,R){let _=arguments.length>13&&void 0!==arguments[13]?arguments[13]:Math.ceil(Date.now()/1e3)+o.MV,E=arguments.length>14&&void 0!==arguments[14]?arguments[14]:300;if(f===n){const[n,o]=a(i,c,I,s,T,_,E),[f,U,N,h,l]=w(u,t,r,i,c,n,o,F,R);return{currency:e,amount:f,amountMax:f,newRes0:U,newRes1:N,newRes0Fic:h,newRes1Fic:l,newPriceAverage0:n,newPriceAverage1:o}}const[U,N]=a(c,i,I,T,s,_,E),[h,l,A,g,P]=w(u,r,t,c,i,U,N,F,R);return{currency:n,amount:h,amountMax:h,newRes0:A,newRes1:l,newRes0Fic:P,newRes1Fic:g,newPriceAverage0:N,newPriceAverage1:U,forcedPriceAverageTimestamp:_}}function F(n,e,t,r,i,c,u,f,I,w,T,F,R){let _=arguments.length>13&&void 0!==arguments[13]?arguments[13]:Math.ceil(Date.now()/1e3)+o.MV,E=arguments.length>14&&void 0!==arguments[14]?arguments[14]:300;if(f===n){const[n,o]=a(c,i,I,T,w,_,E),[f,U,N,h,l]=s(u,r,t,c,i,n,o,F,R);return{currency:e,amount:f,amountMax:f,newRes0:N,newRes1:U,newRes0Fic:l,newRes1Fic:h,newPriceAverage0:o,newPriceAverage1:n}}const[U,N]=a(i,c,I,w,T,_,E),[h,l,A,g,P]=s(u,t,r,i,c,U,N,F,R);return{currency:n,amount:h,amountMax:h,newRes0:l,newRes1:A,newRes0Fic:g,newRes1Fic:P,newPriceAverage0:U,newPriceAverage1:N,forcedPriceAverageTimestamp:_}}},23198:function(n,e,t){t.d(e,{Z:function(){return r}});class r extends Error{constructor(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SentiaSDK";super(n),this.name=e}}},22607:function(n,e,t){t.d(e,{_b:function(){return i},g$:function(){return c}});const r=1n,o=1000000n;function i(n){if(0n===n)return 0n;let e=1n<<function(n){let e=0n;return n>>128n>0n&&(n>>=128n,e+=128n),n>>64n>0n&&(n>>=64n,e+=64n),n>>32n>0n&&(n>>=32n,e+=32n),n>>16n>0n&&(n>>=16n,e+=16n),n>>8n>0n&&(n>>=8n,e+=8n),n>>4n>0n&&(n>>=4n,e+=4n),n>>2n>0n&&(n>>=2n,e+=2n),n>>1n>0n&&(e+=1n),e}(n)/2n;return e=e+n/e>>1n,e=e+n/e>>1n,e=e+n/e>>1n,e=e+n/e>>1n,e=e+n/e>>1n,e=e+n/e>>1n,e=e+n/e>>1n,e<n/e?e:n/e}function c(n,e,t,i){return(c=n*i)>(u=e*t)?c<u+u*r/o:u<c+c*r/o;var c,u}}}]);