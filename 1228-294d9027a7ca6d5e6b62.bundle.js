"use strict";(self.webpackChunksmardex_web=self.webpackChunksmardex_web||[]).push([[1228],{56542:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.signSendAndConfirmAlgorand=t.hexToNativeAssetStringAlgorand=t.hexToNativeAssetBigIntAlgorand=t.nativeStringToHexAlgorand=t.hexToNativeStringAlgorand=t.uint8ArrayToNativeStringAlgorand=t._submitVAAAlgorand=t.submitVAAHeader=t.assetOptinCheck=t.decodeLocalState=t._parseNFTAlgorand=t.METADATA_REPLACE=t._parseVAAAlgorand=t.optin=t.calcLogicSigAccount=t.accountExists=t.getMessageFee=t.MAX_BITS=t.BITS_PER_KEY=void 0;const i=n(14483),s=a(n(14483)),o=n(78045),u=n(56371),c=n(78773),l=n(44211),d=n(71402),g=n(85797),f=1002e3;t.BITS_PER_KEY=1016;t.MAX_BITS=15240;const m=9,p="EZATROXX2HISIRZDRGXW4LRQ46Z6IUJYYIHU3PJGP7P5IQDPKVX42N767A",y=new Uint8Array([6,32,4,1,0,32,20,38,1,0,49,32,50,3,18,68,49,1,35,18,68,49,16,129,6,18,68,54,26,1,54,26,3,54,26,2,136,0,3,68,34,67,53,2,53,1,53,0,40,53,240,40,53,241,52,0,21,53,5,35,53,3,35,53,4,52,3,52,5,12,65,0,68,52,1,52,0,52,3,129,65,8,34,88,23,52,0,52,3,34,8,36,88,52,0,52,3,129,33,8,36,88,7,0,53,241,53,240,52,2,52,4,37,88,52,240,52,241,80,2,87,12,20,18,68,52,3,129,66,8,53,3,52,4,37,8,53,4,66,255,180,34,137]),h=new Set;function A(e,t,n){return r(this,void 0,void 0,(function*(){if(h.has([t,n]))return!0;let r=!1;try{const a=(yield e.accountInformation(n).do())["apps-local-state"];if(!a)return r;a.forEach((e=>{if(BigInt(e.id)===t)return h.add([t,n]),void(r=!0)}))}catch(e){}return r}))}function S(e,t,n,a){return r(this,void 0,void 0,(function*(){let r={addrIdx:n,appAddress:c.getEmitterAddressAlgorand(t),appId:t,emitterId:a};const i=new g.TmplSig(e),s=yield i.populate(r),o=s.address();return{lsa:s,doesExist:yield A(e,t,o)}}))}function v(e,t,n,a,s){return r(this,void 0,void 0,(function*(){const r=i.getApplicationAddress(n),{doesExist:o,lsa:u}=yield S(e,n,a,s),c=u.address();let l=[];if(!o){const a=yield e.getTransactionParams().do(),s=i.makePaymentTxnWithSuggestedParamsFromObject({from:t,to:c,amount:f,suggestedParams:a});s.fee=2*s.fee,l.push({tx:s,signer:null});const o=i.makeApplicationOptInTxnFromObject({from:c,suggestedParams:a,appIndex:d.safeBigIntToNumber(n),rekeyTo:r});o.fee=0,l.push({tx:o,signer:{addr:u.address(),signTxn:e=>Promise.resolve(i.signLogicSigTransaction(e,u).blob)}}),h.add([n,u.address()])}return{addr:c,txs:l}}))}function x(e,t,n){return e.slice(t,t+n)}function T(e){let t={},n=Buffer.from(e);t.version=n.readIntBE(0,1),t.index=n.readIntBE(1,4),t.siglen=n.readIntBE(5,1);const r=t.siglen;r&&(t.signatures=x(e,6,66*r));const a=[];for(let t=0;t<r;t++){const n=x(e,6+66*t,66);a.push(n)}t.sigs=a;let i=66*r+6;return t.digest=e.slice(i),t.timestamp=n.readIntBE(i,4),i+=4,t.nonce=n.readIntBE(i,4),i+=4,t.chainRaw=Buffer.from(x(e,i,2)).toString("hex"),t.chain=n.readIntBE(i,2),i+=2,t.emitter=Buffer.from(x(e,i,32)).toString("hex"),i+=32,t.sequence=n.readBigUInt64BE(i),i+=8,t.consistency=n.readIntBE(i,1),i+=1,t.Meta="Unknown",Buffer.compare(x(n,i,32),Buffer.from("000000000000000000000000000000000000000000546f6b656e427269646765","hex"))?Buffer.compare(x(n,i,32),Buffer.from("00000000000000000000000000000000000000000000000000000000436f7265","hex"))||(t.Meta="CoreGovernance",t.module=x(e,i,32),i+=32,t.action=n.readIntBE(i,1),i+=1,t.targetChain=n.readIntBE(i,2),i+=2,t.NewGuardianSetIndex=n.readIntBE(i,4)):(t.Meta="TokenBridge",t.module=x(e,i,32),i+=32,t.action=n.readIntBE(i,1),i+=1,1===t.action?(t.Meta="TokenBridge RegisterChain",t.targetChain=n.readIntBE(i,2),i+=2,t.EmitterChainID=n.readIntBE(i,2),i+=2,t.targetEmitter=x(e,i,32),i+=32):2===t.action&&(t.Meta="TokenBridge UpgradeContract",t.targetChain=n.readIntBE(i,2),i+=2,t.newContract=x(e,i,32),i+=32)),t.Body=e.slice(i),100===e.slice(i).length&&2===n.readIntBE(i,1)&&(t.Meta="TokenBridge Attest",t.Type=n.readIntBE(i,1),i+=1,t.Contract=l.uint8ArrayToHex(x(e,i,32)),i+=32,t.FromChain=n.readIntBE(i,2),i+=2,t.Decimals=n.readIntBE(i,1),i+=1,t.Symbol=x(e,i,32),i+=32,t.Name=x(e,i,32)),133===e.slice(i).length&&1===n.readIntBE(i,1)&&(t.Meta="TokenBridge Transfer",t.Type=n.readIntBE(i,1),i+=1,t.Amount=x(e,i,32),i+=32,t.Contract=l.uint8ArrayToHex(x(e,i,32)),i+=32,t.FromChain=n.readIntBE(i,2),i+=2,t.ToAddress=x(e,i,32),i+=32,t.ToChain=n.readIntBE(i,2),i+=2,t.Fee=x(e,i,32)),i>=n.length||3===n.readIntBE(i,1)&&(t.Meta="TokenBridge Transfer With Payload",t.Type=n.readIntBE(i,1),i+=1,t.Amount=x(e,i,32),i+=32,t.Contract=l.uint8ArrayToHex(x(e,i,32)),i+=32,t.FromChain=n.readIntBE(i,2),i+=2,t.ToAddress=x(e,i,32),i+=32,t.ToChain=n.readIntBE(i,2),i+=2,t.FromAddress=x(e,i,32),i+=32,t.Payload=e.slice(i)),t}function B(e,t,n){return r(this,void 0,void 0,(function*(){let r=null;const a=yield e.accountInformation(n).do();for(const e of a["apps-local-state"])if(BigInt(e.id)===t){r=e["key-value"];break}let i=Buffer.alloc(0),s=Buffer.alloc(0);if(r){const e=Buffer.alloc(127),t=Buffer.from("meta");let n=[],a=new Map;for(const i of r){const r=Buffer.from(i.key,"base64"),s=r.readInt8();if(!Buffer.compare(r,t))continue;const o=Buffer.from(i.value.bytes,"base64");Buffer.compare(o,e)&&(a.set(s.toString(),o),n.push(s.toString()))}n.sort(((e,t)=>e.localeCompare(t,"en",{numeric:!0}))),n.forEach((e=>{i=Buffer.concat([i,a.get(e)||s])}))}return new Uint8Array(i)}))}function I(e,t,n){return r(this,void 0,void 0,(function*(){const r=(yield e.accountInformation(n).do()).assets;let a=!1;return r.forEach((e=>{BigInt(e["asset-id"])!==t||(a=!0)})),a}))}t.getMessageFee=function(e,t){return r(this,void 0,void 0,(function*(){const n=(yield e.getApplicationByID(d.safeBigIntToNumber(t)).do()).params["global-state"],r=Buffer.from("MessageFee","binary").toString("base64");let a=BigInt(0);return n.forEach((e=>{e.key!==r||(a=BigInt(e.value.uint))})),a}))},t.accountExists=A,t.calcLogicSigAccount=S,t.optin=v,t._parseVAAAlgorand=T,t.METADATA_REPLACE=new RegExp("\0","g"),t._parseNFTAlgorand=function(e){let n=T(e),r=Buffer.from(n.Body);n.action=r.readUInt8(0),n.Contract=r.slice(1,33).toString("hex"),n.FromChain=r.readUInt16BE(33),n.Symbol=Buffer.from(r.slice(35,67)),n.Name=Buffer.from(r.slice(67,99)),n.TokenId=r.slice(99,131);let a=r.readUInt8(131);n.uri=Buffer.from(r.slice(132,132+a)).toString("utf8").replace(t.METADATA_REPLACE,"");let i=132+a;return n.ToAddress=r.slice(i,i+32),n.ToChain=r.readUInt16BE(i+32),n},t.decodeLocalState=B,t.assetOptinCheck=I;class b{constructor(e,t,n,r){this.vaaMap=e,this.accounts=t,this.txs=n,this.guardianAddr=r}}function M(e,n,a,s,o){return r(this,void 0,void 0,(function*(){const r=T(a),c=r.sequence/BigInt(t.MAX_BITS),g=r.chainRaw,f=r.emitter,h=r.index;let A=[];const{addr:S,txs:x}=yield v(e,s,o,c,g+f);A.push(...x);const I=l.textToHexString("guardian"),{addr:M,txs:C}=yield v(e,s,n,BigInt(h),I);A.push(...C);let E=[S,M];const O=yield B(e,n,M),_=yield e.getTransactionParams().do(),P=u.keccak256(u.keccak256(r.digest)).slice(2),w=r.siglen;let N=Math.floor(w/m)+1;const k=66*m,F=r.signatures,L=l.textToUint8Array("verifySigs"),q=new i.LogicSigAccount(y);for(let e=0;e<N;e++){let t=F.slice(e*k);t.length>k&&(t=t.slice(0,k));const r=20,a=t.length/66;let s=new Uint8Array(a*r);for(let e=0;e<a;e++){const n=t[66*e],a=O.slice(n*r+1,(n+1)*r+1);s.set(a,20*e)}const o=i.makeApplicationCallTxnFromObject({appArgs:[L,t,s,l.hexToUint8Array(P)],accounts:E,appIndex:d.safeBigIntToNumber(n),from:p,onComplete:i.OnApplicationComplete.NoOpOC,suggestedParams:_});o.fee=0,A.push({tx:o,signer:{addr:q.address(),signTxn:e=>Promise.resolve(i.signLogicSigTransaction(e,q).blob)}})}const U=i.makeApplicationCallTxnFromObject({appArgs:[l.textToUint8Array("verifyVAA"),a],accounts:E,appIndex:d.safeBigIntToNumber(n),from:s,onComplete:i.OnApplicationComplete.NoOpOC,suggestedParams:_});return U.fee=U.fee*(1+N),A.push({tx:U,signer:null}),new b(r,E,A,M)}))}function C(e){return i.encodeAddress(e)}function E(e){return o.BigNumber.from(l.hexToUint8Array(e)).toBigInt()}t.submitVAAHeader=M,t._submitVAAAlgorand=function(e,t,n,a,o){return r(this,void 0,void 0,(function*(){let r=yield M(e,n,a,o,t),u=r.vaaMap,c=r.accounts,g=r.txs;if("CoreGovernance"===u.Meta&&2===u.action&&void 0!==u.NewGuardianSetIndex){const t=u.NewGuardianSetIndex,r=l.textToHexString("guardian"),{addr:a,txs:i}=yield v(e,o,n,BigInt(t),r);c.push(a),g.unshift(...i)}const f=u.Meta;let m="";if(("TokenBridge Attest"===f||"TokenBridge Transfer"===f||"TokenBridge Transfer With Payload"===f)&&void 0!==u.Contract){if(u.FromChain!==l.CHAIN_ID_ALGORAND&&u.FromChain){const n=yield v(e,o,t,BigInt(u.FromChain),u.Contract);m=n.addr,g.unshift(...n.txs)}else{const n=E(u.Contract),r=yield v(e,o,t,n,l.textToHexString("native"));m=r.addr,g.unshift(...r.txs)}c.push(m)}const p=yield e.getTransactionParams().do();if("CoreGovernance"===f&&(g.push({tx:i.makeApplicationCallTxnFromObject({appArgs:[l.textToUint8Array("governance"),a],accounts:c,appIndex:d.safeBigIntToNumber(n),from:o,onComplete:i.OnApplicationComplete.NoOpOC,suggestedParams:p}),signer:null}),g.push({tx:i.makeApplicationCallTxnFromObject({appArgs:[l.textToUint8Array("nop"),i.bigIntToBytes(5,8)],appIndex:d.safeBigIntToNumber(n),from:o,onComplete:i.OnApplicationComplete.NoOpOC,suggestedParams:p}),signer:null})),"TokenBridge RegisterChain"!==f&&"TokenBridge UpgradeContract"!==f||g.push({tx:i.makeApplicationCallTxnFromObject({appArgs:[l.textToUint8Array("governance"),a],accounts:c,appIndex:d.safeBigIntToNumber(t),foreignApps:[d.safeBigIntToNumber(n)],from:o,onComplete:i.OnApplicationComplete.NoOpOC,suggestedParams:p}),signer:null}),"TokenBridge Attest"===f){let n=yield B(e,t,m),r=[];if(n.length>8){const e=Buffer.from(n.slice(0,8));r.push(d.safeBigIntToNumber(e.readBigUInt64BE(0)))}g.push({tx:i.makePaymentTxnWithSuggestedParamsFromObject({from:o,to:m,amount:1e5,suggestedParams:p}),signer:null});let s=new Uint8Array(1);s[0]=1,g.push({tx:i.makeApplicationCallTxnFromObject({appArgs:[l.textToUint8Array("nop"),s],appIndex:d.safeBigIntToNumber(t),from:o,onComplete:i.OnApplicationComplete.NoOpOC,suggestedParams:p}),signer:null}),s=new Uint8Array(1),s[0]=2,g.push({tx:i.makeApplicationCallTxnFromObject({appArgs:[l.textToUint8Array("nop"),s],appIndex:d.safeBigIntToNumber(t),from:o,onComplete:i.OnApplicationComplete.NoOpOC,suggestedParams:p}),signer:null}),g.push({tx:i.makeApplicationCallTxnFromObject({accounts:c,appArgs:[l.textToUint8Array("receiveAttest"),a],appIndex:d.safeBigIntToNumber(t),foreignAssets:r,from:o,onComplete:i.OnApplicationComplete.NoOpOC,suggestedParams:p}),signer:null}),g[g.length-1].tx.fee=2*g[g.length-1].tx.fee}if(("TokenBridge Transfer"===f||"TokenBridge Transfer With Payload"===f)&&void 0!==u.Contract){let n=[],r=0;if(u.FromChain!==l.CHAIN_ID_ALGORAND){let n=yield B(e,t,m);if(n.length>8){const e=Buffer.from(n.slice(0,8));r=d.safeBigIntToNumber(e.readBigUInt64BE(0))}}else r=parseInt(u.Contract,16);let y=0,h="";if(void 0!==u.ToAddress&&(8===u.ToChain&&3===u.Type?(y=Number(E(l.uint8ArrayToHex(u.ToAddress))),h=i.getApplicationAddress(y)):h=i.encodeAddress(u.ToAddress)),0!==r&&(n.push(r),!(yield I(e,BigInt(r),h)))){if(o!=h)throw new Error("cannot ASA optin for somebody else (asset "+r.toString()+")");g.unshift({tx:i.makeAssetTransferTxnWithSuggestedParamsFromObject({amount:0,assetIndex:r,from:o,suggestedParams:p,to:o}),signer:null})}if(c.push(h),g.push({tx:i.makeApplicationCallTxnFromObject({accounts:c,appArgs:[l.textToUint8Array("completeTransfer"),a],appIndex:d.safeBigIntToNumber(t),foreignAssets:n,from:o,onComplete:i.OnApplicationComplete.NoOpOC,suggestedParams:p}),signer:null}),void 0!==u.Fee&&0===Buffer.compare(u.Fee,Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"))?g[g.length-1].tx.fee=2*g[g.length-1].tx.fee:g[g.length-1].tx.fee=3*g[g.length-1].tx.fee,"TokenBridge Transfer With Payload"===f){g[g.length-1].tx.appForeignApps=[y];let e=s.default.ABIMethod.fromSignature("portal_transfer(byte[])byte[]");g.push({tx:i.makeApplicationCallTxnFromObject({appArgs:[e.getSelector(),e.args[0].type.encode(a)],appIndex:y,foreignAssets:n,from:o,onComplete:i.OnApplicationComplete.NoOpOC,suggestedParams:p}),signer:null})}}return g}))},t.uint8ArrayToNativeStringAlgorand=C,t.hexToNativeStringAlgorand=function(e){return C(l.hexToUint8Array(e))},t.nativeStringToHexAlgorand=function(e){return l.uint8ArrayToHex(i.decodeAddress(e).publicKey)},t.hexToNativeAssetBigIntAlgorand=E,t.hexToNativeAssetStringAlgorand=function(e){return o.BigNumber.from(l.hexToUint8Array(e)).toString()},t.signSendAndConfirmAlgorand=function(e,t,n){return r(this,void 0,void 0,(function*(){i.assignGroupID(t.map((e=>e.tx)));const r=[];for(const e of t)e.signer?r.push(yield e.signer.signTxn(e.tx)):r.push(e.tx.signTxn(n.sk));yield e.sendRawTransaction(r).do();return yield i.waitForConfirmation(e,t[t.length-1].tx.txID(),4)}))}},44585:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encodeHex=t.encode=t.encodingLength=void 0;const n=BigInt(127);function r(e){let t=0;for(;e>=BigInt(128);t++)e>>=BigInt(7);return t+1}function a(e,t,a){if(e<BigInt(0))throw new RangeError("value must be unsigned");const i=r(e);if(a=a||0,(t=t||new ArrayBuffer(i)).byteLength<a+i)throw new RangeError("the buffer is too small to encode the number at the offset");const s=new Uint8Array(t,a);let o=0;for(;n<e;)s[o++]=128|Number(e&n),e>>=BigInt(7);return s[o]=Number(e),s}t.encodingLength=r,t.encode=a,t.encodeHex=function(e,t,n){return Buffer.from(a(e,t,n)).toString("hex")},t.decode=function(e,t=0){let n,r=BigInt(0),a=0;do{if(n=e[t+a],void 0===n)throw new RangeError("offset out of range");r+=BigInt(127&n)<<BigInt(7*a),a++}while(128<=n);return r}},85797:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TmplSig=void 0;const a=n(14483),i=n(56371),s=n(44211),o=n(44585);t.TmplSig=class{constructor(e){this.algoClient=e,this.sourceHash="",this.bytecode=new Uint8Array}compile(e){return r(this,void 0,void 0,(function*(){const t=i.id(e);if(t!==this.sourceHash){const n=yield this.algoClient.compile(e).do();this.bytecode=new Uint8Array(Buffer.from(n.result,"base64")),this.sourceHash=t}}))}populate(e){return r(this,void 0,void 0,(function*(){const t=["0620010181",o.encodeHex(e.addrIdx),"4880",o.encodeHex(BigInt(e.emitterId.length/2)),e.emitterId,"483110810612443119221244311881",o.encodeHex(e.appId),"1244312080",o.encodeHex(BigInt(e.appAddress.length/2)),e.appAddress,"124431018100124431093203124431153203124422"].join("");return this.bytecode=s.hexToUint8Array(t),new a.LogicSigAccount(this.bytecode)}))}}},89165:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(56542),t)},86142:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getClaimAddressSolana=void 0;const a=n(2556),i=n(55931);t.getClaimAddressSolana=function(e,t){return r(this,void 0,void 0,(function*(){const n=i.parseVaa(t);return a.deriveClaimKey(e,n.emitterAddress,n.emitterChain,n.sequence)}))}},2260:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getEmitterAddressNear=t.getEmitterAddressAlgorand=t.getEmitterAddressXpla=t.getEmitterAddressInjective=t.getEmitterAddressTerra=t.getEmitterAddressSolana=t.getEmitterAddressEth=void 0;const a=n(14483),i=n(53649),s=n(56371),o=n(2556),u=n(44211);function c(e){return r(this,void 0,void 0,(function*(){return Buffer.from(s.zeroPad(i.bech32.fromWords(i.bech32.decode(e).words),32)).toString("hex")}))}t.getEmitterAddressEth=function(e){return Buffer.from(s.zeroPad(s.arrayify(e),32)).toString("hex")},t.getEmitterAddressSolana=function(e){return o.deriveWormholeEmitterKey(e).toBuffer().toString("hex")},t.getEmitterAddressTerra=c,t.getEmitterAddressInjective=c,t.getEmitterAddressXpla=c,t.getEmitterAddressAlgorand=function(e){const t=a.getApplicationAddress(e),n=a.decodeAddress(t).publicKey;return u.uint8ArrayToHex(n)},t.getEmitterAddressNear=function(e){return u.uint8ArrayToHex(s.arrayify(s.sha256(Buffer.from(e,"utf8"))))}},25069:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getSignedVAAHash=void 0;const r=n(44211),a=n(55931);t.getSignedVAAHash=function(e){return`0x${r.keccak256(a.parseVaa(e).hash).toString("hex")}`}},78773:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(86142),t),a(n(2260),t),a(n(25069),t),a(n(64299),t)},64299:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parseSequenceFromLogSui=t.parseSequenceFromLogAptos=t.parseSequenceFromLogNear=t.parseSequenceFromLogAlgorand=t.parseSequencesFromLogSolana=t.parseSequenceFromLogSolana=t.parseSequenceFromLogInjective=t.parseSequencesFromLogTerra=t.parseSequenceFromLogXpla=t.parseSequenceFromLogTerra=t.parseSequencesFromLogEth=t.parseSequenceFromLogEth=void 0;const r=n(78045),a=n(97263);t.parseSequenceFromLogEth=function(e,t){const n=e.logs.filter((e=>e.address===t))[0],{args:{sequence:r}}=a.Implementation__factory.createInterface().parseLog(n);return r.toString()},t.parseSequencesFromLogEth=function(e,t){return e.logs.filter((e=>e.address===t)).map((e=>{const{args:{sequence:t}}=a.Implementation__factory.createInterface().parseLog(e);return t.toString()}))},t.parseSequenceFromLogTerra=function(e){let t="";return JSON.parse(e.raw_log).map((e=>{e.events.map((e=>{e.attributes.map((e=>{"message.sequence"===e.key&&(t=e.value)}))}))})),t.toString()},t.parseSequenceFromLogXpla=function(e){let t="";return JSON.parse(e.raw_log).map((e=>{e.events.map((e=>{e.attributes.map((e=>{"message.sequence"===e.key&&(t=e.value)}))}))})),t.toString()},t.parseSequencesFromLogTerra=function(e){const t=[];return JSON.parse(e.raw_log).map((e=>{e.events.map((e=>{e.attributes.map((e=>{"message.sequence"===e.key&&t.push(e.value.toString())}))}))})),t},t.parseSequenceFromLogInjective=function(e){let t="";return JSON.parse(e.rawLog).map((e=>{e.events.map((e=>{e.attributes.map((e=>{"message.sequence"===e.key&&(t=e.value)}))}))})),t.toString()};const i="Program log: Sequence: ";t.parseSequenceFromLogSolana=function(e){var t,n,r,a;const s=null===(a=null===(r=null===(n=null===(t=e.meta)||void 0===t?void 0:t.logMessages)||void 0===n?void 0:n.filter((e=>e.startsWith(i))))||void 0===r?void 0:r[0])||void 0===a?void 0:a.replace(i,"");if(!s)throw new Error("sequence not found");return s.toString()},t.parseSequencesFromLogSolana=function(e){var t,n;return null===(n=null===(t=e.meta)||void 0===t?void 0:t.logMessages)||void 0===n?void 0:n.filter((e=>e.startsWith(i))).map((e=>e.replace(i,"")))},t.parseSequenceFromLogAlgorand=function(e){let t="";if(e["inner-txns"]){const n=e["inner-txns"];n.forEach((e=>{e.logs&&(t=r.BigNumber.from(e.logs[0].slice(0,8)).toString())}))}return t};const s="EVENT_JSON:";t.parseSequenceFromLogNear=function(e){for(const t of e.receipts_outcome)for(const e of t.outcome.logs)if(e.startsWith(s)){const t=JSON.parse(e.slice(11));if("wormhole"===t.standard&&"publish"===t.event)return t.seq.toString()}return null},t.parseSequenceFromLogAptos=function(e,t){if(t.success){const n=t.events.find((t=>t.type===`${e}::state::WormholeMessage`));return(null==n?void 0:n.data.sequence)||null}return null},t.parseSequenceFromLogSui=function(e,t){var n,r;const a=null===(n=t.events)||void 0===n?void 0:n.find((t=>t.type===`${e}::publish_message::WormholeMessage`));return(null===(r=null==a?void 0:a.parsedJson)||void 0===r?void 0:r.sequence)||null}},32229:function(e){e.exports=JSON.parse('{"version":"0.1.0","name":"wormhole","instructions":[{"name":"initialize","accounts":[{"name":"bridge","isMut":true,"isSigner":false},{"name":"guardianSet","isMut":true,"isSigner":false},{"name":"feeCollector","isMut":true,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"clock","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"guardianSetExpirationTime","type":"u32"},{"name":"fee","type":"u64"},{"name":"initialGuardians","type":{"vec":{"array":["u8",20]}}}]},{"name":"postMessage","accounts":[{"name":"bridge","isMut":true,"isSigner":false},{"name":"message","isMut":true,"isSigner":true},{"name":"emitter","isMut":false,"isSigner":true},{"name":"sequence","isMut":true,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"feeCollector","isMut":true,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"nonce","type":"u32"},{"name":"payload","type":"bytes"},{"name":"consistencyLevel","type":"u8"}]},{"name":"postVaa","accounts":[{"name":"guardianSet","isMut":false,"isSigner":false},{"name":"bridge","isMut":false,"isSigner":false},{"name":"signatureSet","isMut":false,"isSigner":false},{"name":"vaa","isMut":true,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"clock","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"version","type":"u8"},{"name":"guardianSetIndex","type":"u32"},{"name":"timestamp","type":"u32"},{"name":"nonce","type":"u32"},{"name":"emitterChain","type":"u16"},{"name":"emitterAddress","type":{"array":["u8",32]}},{"name":"sequence","type":"u64"},{"name":"consistencyLevel","type":"u8"},{"name":"payload","type":"bytes"}]},{"name":"setFees","accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"bridge","isMut":true,"isSigner":false},{"name":"vaa","isMut":false,"isSigner":false},{"name":"claim","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"transferFees","accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"bridge","isMut":true,"isSigner":false},{"name":"vaa","isMut":false,"isSigner":false},{"name":"claim","isMut":true,"isSigner":false},{"name":"feeCollector","isMut":true,"isSigner":false},{"name":"recipient","isMut":true,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"upgradeContract","accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"bridge","isMut":true,"isSigner":false},{"name":"vaa","isMut":false,"isSigner":false},{"name":"claim","isMut":true,"isSigner":false},{"name":"upgradeAuthority","isMut":false,"isSigner":false},{"name":"spill","isMut":true,"isSigner":false},{"name":"implementation","isMut":true,"isSigner":false},{"name":"programData","isMut":true,"isSigner":false},{"name":"wormholeProgram","isMut":true,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false},{"name":"bpfLoaderUpgradeable","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"upgradeGuardianSet","accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"bridge","isMut":true,"isSigner":false},{"name":"vaa","isMut":false,"isSigner":false},{"name":"claim","isMut":true,"isSigner":false},{"name":"guardianSetOld","isMut":true,"isSigner":false},{"name":"guardianSetNew","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"verifySignatures","accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"guardianSet","isMut":false,"isSigner":false},{"name":"signatureSet","isMut":true,"isSigner":true},{"name":"instructions","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"signatureStatus","type":{"array":["i8",19]}}]},{"name":"postMessageUnreliable","accounts":[{"name":"bridge","isMut":true,"isSigner":false},{"name":"message","isMut":true,"isSigner":true},{"name":"emitter","isMut":false,"isSigner":true},{"name":"sequence","isMut":true,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"feeCollector","isMut":true,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"nonce","type":"u32"},{"name":"payload","type":"bytes"},{"name":"consistencyLevel","type":"u8"}]}],"accounts":[{"name":"PostedMessage","type":{"kind":"struct","fields":[{"name":"vaaVersion","type":"u8"},{"name":"consistencyLevel","type":"u8"},{"name":"vaaTime","type":"u32"},{"name":"vaaSignatureAccount","type":"publicKey"},{"name":"submissionTime","type":"u32"},{"name":"nonce","type":"u32"},{"name":"sequence","type":"u64"},{"name":"emitterChain","type":"u16"},{"name":"emitterAddress","type":{"array":["u8",32]}},{"name":"payload","type":"bytes"}]}},{"name":"PostedVAA","type":{"kind":"struct","fields":[{"name":"vaaVersion","type":"u8"},{"name":"consistencyLevel","type":"u8"},{"name":"vaaTime","type":"u32"},{"name":"vaaSignatureAccount","type":"publicKey"},{"name":"submissionTime","type":"u32"},{"name":"nonce","type":"u32"},{"name":"sequence","type":"u64"},{"name":"emitterChain","type":"u16"},{"name":"emitterAddress","type":{"array":["u8",32]}},{"name":"payload","type":"bytes"}]}}]}')}}]);