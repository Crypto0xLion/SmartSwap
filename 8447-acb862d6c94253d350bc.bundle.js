/*! For license information please see 8447-acb862d6c94253d350bc.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunksmardex_web=self.webpackChunksmardex_web||[]).push([[8447],{45180:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Account=void 0;const i=o(n(13550)),s=o(n(27812)),a=n(49521),c=n(84920),u=n(25532),d=n(56393),l=n(44497),f=n(9743),p=n(24873),y=o(n(12707));function h(e){return JSON.parse(Buffer.from(e).toString())}function m(e){return Buffer.from(JSON.stringify(e))}class g{constructor(e,t){this.accessKeyByPublicKeyCache={},this.connection=e,this.accountId=t}state(){return r(this,void 0,void 0,(function*(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})}))}printLogsAndFailures(e,t){if(!process.env.NEAR_NO_LOGS)for(const n of t)console.log(`Receipt${n.receiptIds.length>1?"s":""}: ${n.receiptIds.join(", ")}`),this.printLogs(e,n.logs,"\t"),n.failure&&console.warn(`\tFailure [${e}]: ${n.failure}`)}printLogs(e,t,n=""){if(!process.env.NEAR_NO_LOGS)for(const r of t)console.log(`${n}Log [${e}]: ${r}`)}signTransaction(e,t){return r(this,void 0,void 0,(function*(){const n=yield this.findAccessKey(e,t);if(!n)throw new c.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair exists for this account`,"KeyNotFound");const{accessKey:r}=n,o=(yield this.connection.provider.block({finality:"final"})).header.hash,s=r.nonce.add(new i.default(1));return yield(0,a.signTransaction)(e,s,t,(0,u.baseDecode)(o),this.connection.signer,this.accountId,this.connection.networkId)}))}signAndSendTransaction({receiverId:e,actions:t,returnError:n}){return r(this,void 0,void 0,(function*(){let o,i;const s=yield(0,y.default)(500,12,1.5,(()=>r(this,void 0,void 0,(function*(){[o,i]=yield this.signTransaction(e,t);const n=i.transaction.publicKey;try{return yield this.connection.provider.sendTransaction(i)}catch(t){if("InvalidNonce"===t.type)return(0,l.logWarning)(`Retrying transaction ${e}:${(0,u.baseEncode)(o)} with new nonce.`),delete this.accessKeyByPublicKeyCache[n.toString()],null;if("Expired"===t.type)return(0,l.logWarning)(`Retrying transaction ${e}:${(0,u.baseEncode)(o)} due to expired block hash`),null;throw t.context=new c.ErrorContext((0,u.baseEncode)(o)),t}}))));if(!s)throw new c.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");const a=[s.transaction_outcome,...s.receipts_outcome].reduce(((e,t)=>t.outcome.logs.length||"object"==typeof t.outcome.status&&"object"==typeof t.outcome.status.Failure?e.concat({receiptIds:t.outcome.receipt_ids,logs:t.outcome.logs,failure:void 0!==t.outcome.status.Failure?(0,f.parseRpcError)(t.outcome.status.Failure):null}):e),[]);if(this.printLogsAndFailures(i.transaction.receiverId,a),!n&&"object"==typeof s.status&&"object"==typeof s.status.Failure&&null!==s.status.Failure)throw s.status.Failure.error_message&&s.status.Failure.error_type?new c.TypedError(`Transaction ${s.transaction_outcome.id} failed. ${s.status.Failure.error_message}`,s.status.Failure.error_type):(0,f.parseResultError)(s);return s}))}findAccessKey(e,t){return r(this,void 0,void 0,(function*(){const e=yield this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!e)throw new c.TypedError(`no matching key pair found in ${this.connection.signer}`,"PublicKeyNotFound");const t=this.accessKeyByPublicKeyCache[e.toString()];if(void 0!==t)return{publicKey:e,accessKey:t};try{const t=yield this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:e.toString(),finality:"optimistic"}),n=Object.assign(Object.assign({},t),{nonce:new i.default(t.nonce)});return this.accessKeyByPublicKeyCache[e.toString()]?{publicKey:e,accessKey:this.accessKeyByPublicKeyCache[e.toString()]}:(this.accessKeyByPublicKeyCache[e.toString()]=n,{publicKey:e,accessKey:n})}catch(e){if("AccessKeyDoesNotExist"==e.type)return null;throw e}}))}createAndDeployContract(e,t,n,o){return r(this,void 0,void 0,(function*(){const r=(0,a.fullAccessKey)();yield this.signAndSendTransaction({receiverId:e,actions:[(0,a.createAccount)(),(0,a.transfer)(o),(0,a.addKey)(d.PublicKey.from(t),r),(0,a.deployContract)(n)]});return new g(this.connection,e)}))}sendMoney(e,t){return r(this,void 0,void 0,(function*(){return this.signAndSendTransaction({receiverId:e,actions:[(0,a.transfer)(t)]})}))}createAccount(e,t,n){return r(this,void 0,void 0,(function*(){const r=(0,a.fullAccessKey)();return this.signAndSendTransaction({receiverId:e,actions:[(0,a.createAccount)(),(0,a.transfer)(n),(0,a.addKey)(d.PublicKey.from(t),r)]})}))}deleteAccount(e){return r(this,void 0,void 0,(function*(){return process.env.NEAR_NO_LOGS||console.log("Deleting an account does not automatically transfer NFTs and FTs to the beneficiary address. Ensure to transfer assets before deleting."),this.signAndSendTransaction({receiverId:this.accountId,actions:[(0,a.deleteAccount)(e)]})}))}deployContract(e){return r(this,void 0,void 0,(function*(){return this.signAndSendTransaction({receiverId:this.accountId,actions:[(0,a.deployContract)(e)]})}))}encodeJSContractArgs(e,t,n){return Buffer.concat([Buffer.from(e),Buffer.from([0]),Buffer.from(t),Buffer.from([0]),Buffer.from(n)])}functionCall({contractId:e,methodName:t,args:n={},gas:o=p.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:i,walletMeta:s,walletCallbackUrl:c,stringify:u,jsContract:d}){return r(this,void 0,void 0,(function*(){let r;if(this.validateArgs(n),d){r=["call_js_contract",this.encodeJSContractArgs(e,t,JSON.stringify(n)),o,i,null,!0]}else{const e=void 0===u?a.stringifyJsonOrBytes:u;r=[t,n,o,i,e,!1]}return this.signAndSendTransaction({receiverId:d?this.connection.jsvmAccountId:e,actions:[a.functionCall.apply(void 0,r)],walletMeta:s,walletCallbackUrl:c})}))}addKey(e,t,n,o){return r(this,void 0,void 0,(function*(){let r;return n||(n=[]),Array.isArray(n)||(n=[n]),r=t?(0,a.functionCallAccessKey)(t,n,o):(0,a.fullAccessKey)(),this.signAndSendTransaction({receiverId:this.accountId,actions:[(0,a.addKey)(d.PublicKey.from(e),r)]})}))}deleteKey(e){return r(this,void 0,void 0,(function*(){return this.signAndSendTransaction({receiverId:this.accountId,actions:[(0,a.deleteKey)(d.PublicKey.from(e))]})}))}stake(e,t){return r(this,void 0,void 0,(function*(){return this.signAndSendTransaction({receiverId:this.accountId,actions:[(0,a.stake)(t,d.PublicKey.from(e))]})}))}validateArgs(e){if(!(void 0!==e.byteLength&&e.byteLength===e.length)&&(Array.isArray(e)||"object"!=typeof e))throw new l.PositionalArgsError}viewFunction(...e){return r(this,void 0,void 0,(function*(){if("string"==typeof e[0]){const t=e[0],n=e[1],r=e[2],o=e[3];return yield this.viewFunctionV1(t,n,r,o)}return yield this.viewFunctionV2(e[0])}))}viewFunctionV1(e,t,n={},{parse:o=h,stringify:i=m,jsContract:a=!1,blockQuery:c={finality:"optimistic"}}={}){return r(this,void 0,void 0,(function*(){return(0,s.default)("Account.viewFunction(contractId, methodName, args, options)")("use `Account.viewFunction(ViewFunctionCallOptions)` instead"),this.viewFunctionV2({contractId:e,methodName:t,args:n,parse:o,stringify:i,jsContract:a,blockQuery:c})}))}viewFunctionV2({contractId:e,methodName:t,args:n,parse:o=h,stringify:i=m,jsContract:s=!1,blockQuery:a={finality:"optimistic"}}){return r(this,void 0,void 0,(function*(){let r;this.validateArgs(n),r=s?this.encodeJSContractArgs(e,t,Object.keys(n).length>0?JSON.stringify(n):""):i(n);const c=yield this.connection.provider.query(Object.assign(Object.assign({request_type:"call_function"},a),{account_id:s?this.connection.jsvmAccountId:e,method_name:s?"view_js_contract":t,args_base64:r.toString("base64")}));return c.logs&&this.printLogs(e,c.logs),c.result&&c.result.length>0&&o(Buffer.from(c.result))}))}viewState(e,t={finality:"optimistic"}){return r(this,void 0,void 0,(function*(){const{values:n}=yield this.connection.provider.query(Object.assign(Object.assign({request_type:"view_state"},t),{account_id:this.accountId,prefix_base64:Buffer.from(e).toString("base64")}));return n.map((({key:e,value:t})=>({key:Buffer.from(e,"base64"),value:Buffer.from(t,"base64")})))}))}getAccessKeys(){var e;return r(this,void 0,void 0,(function*(){const t=yield this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"});return null===(e=null==t?void 0:t.keys)||void 0===e?void 0:e.map((e=>Object.assign(Object.assign({},e),{access_key:Object.assign(Object.assign({},e.access_key),{nonce:new i.default(e.access_key.nonce)})})))}))}getAccountDetails(){return r(this,void 0,void 0,(function*(){return{authorizedApps:(yield this.getAccessKeys()).filter((e=>"FullAccess"!==e.access_key.permission)).map((e=>{const t=e.access_key.permission;return{contractId:t.FunctionCall.receiver_id,amount:t.FunctionCall.allowance,publicKey:e.public_key}}))}}))}getAccountBalance(){return r(this,void 0,void 0,(function*(){const e=yield this.connection.provider.experimental_protocolConfig({finality:"final"}),t=yield this.state(),n=new i.default(e.runtime_config.storage_amount_per_byte),r=new i.default(t.storage_usage).mul(n),o=new i.default(t.locked),s=new i.default(t.amount).add(o),a=s.sub(i.default.max(o,r));return{total:s.toString(),stateStaked:r.toString(),staked:o.toString(),available:a.toString()}}))}getActiveDelegatedStakeBalance(){return r(this,void 0,void 0,(function*(){const e=yield this.connection.provider.block({finality:"final"}),t=e.header.hash,n=e.header.epoch_id,{current_validators:r,next_validators:o,current_proposals:s}=yield this.connection.provider.validators(n),a=new Set;[...r,...o,...s].forEach((e=>a.add(e.account_id)));const c=[...a],u=c.map((e=>this.viewFunction({contractId:e,methodName:"get_account_total_balance",args:{account_id:this.accountId},blockQuery:{blockId:t}}))),d=yield Promise.allSettled(u);if(d.some((e=>"rejected"===e.status&&"TimeoutError"===e.reason.type)))throw new Error("Failed to get delegated stake balance");const l=d.reduce(((e,t,n)=>{const r=c[n];if("fulfilled"===t.status){const n=new i.default(t.value);if(!n.isZero())return Object.assign(Object.assign({},e),{stakedValidators:[...e.stakedValidators,{validatorId:r,amount:n.toString()}],total:e.total.add(n)})}return"rejected"===t.status?Object.assign(Object.assign({},e),{failedValidators:[...e.failedValidators,{validatorId:r,error:t.reason}]}):e}),{stakedValidators:[],failedValidators:[],total:new i.default(0)});return Object.assign(Object.assign({},l),{total:l.total.toString()})}))}}t.Account=g},96726:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UrlAccountCreator=t.LocalAccountCreator=t.AccountCreator=void 0;const o=n(73490);class i{}t.AccountCreator=i;t.LocalAccountCreator=class extends i{constructor(e,t){super(),this.masterAccount=e,this.initialBalance=t}createAccount(e,t){return r(this,void 0,void 0,(function*(){yield this.masterAccount.createAccount(e,t,this.initialBalance)}))}};t.UrlAccountCreator=class extends i{constructor(e,t){super(),this.connection=e,this.helperUrl=t}createAccount(e,t){return r(this,void 0,void 0,(function*(){yield(0,o.fetchJson)(`${this.helperUrl}/account`,JSON.stringify({newAccountId:e,newAccountPublicKey:t.toString()}))}))}}},95646:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Account2FA=t.AccountMultisig=t.MultisigStateStatus=t.MultisigDeleteRequestRejectionError=t.MULTISIG_CONFIRM_METHODS=t.MULTISIG_CHANGE_METHODS=t.MULTISIG_DEPOSIT=t.MULTISIG_GAS=t.MULTISIG_ALLOWANCE=t.MULTISIG_STORAGE_KEY=void 0;const i=o(n(13550)),s=n(45180),a=n(77084),c=n(56393),u=n(49521),d=n(84920),l=n(73490);var f,p,y;t.MULTISIG_STORAGE_KEY="__multisigRequest",t.MULTISIG_ALLOWANCE=new i.default((0,a.parseNearAmount)("1")),t.MULTISIG_GAS=new i.default("100000000000000"),t.MULTISIG_DEPOSIT=new i.default("0"),t.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"],t.MULTISIG_CONFIRM_METHODS=["confirm"],function(e){e.CANNOT_DESERIALIZE_STATE="Cannot deserialize the contract state",e.MULTISIG_NOT_INITIALIZED="Smart contract panicked: Multisig contract should be initialized before usage",e.NO_SUCH_REQUEST="Smart contract panicked: panicked at 'No such request: either wrong number or already confirmed'",e.REQUEST_COOLDOWN_ERROR="Request cannot be deleted immediately after creation.",e.METHOD_NOT_FOUND="Contract method is not found"}(f=t.MultisigDeleteRequestRejectionError||(t.MultisigDeleteRequestRejectionError={})),function(e){e[e.INVALID_STATE=0]="INVALID_STATE",e[e.STATE_NOT_INITIALIZED=1]="STATE_NOT_INITIALIZED",e[e.VALID_STATE=2]="VALID_STATE",e[e.UNKNOWN_STATE=3]="UNKNOWN_STATE"}(p=t.MultisigStateStatus||(t.MultisigStateStatus={})),function(e){e[e.INVALID_CODE=0]="INVALID_CODE",e[e.VALID_CODE=1]="VALID_CODE",e[e.UNKNOWN_CODE=2]="UNKNOWN_CODE"}(y||(y={}));const h={[t.MULTISIG_STORAGE_KEY]:null};class m extends s.Account{constructor(e,t,n){super(e,t),this.storage=n.storage,this.onAddRequestResult=n.onAddRequestResult}signAndSendTransactionWithAccount(e,t){const n=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return r(this,void 0,void 0,(function*(){return n.signAndSendTransaction.call(this,{receiverId:e,actions:t})}))}signAndSendTransaction({receiverId:e,actions:n}){const o=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return r(this,void 0,void 0,(function*(){const{accountId:r}=this,i=Buffer.from(JSON.stringify({request:{receiver_id:e,actions:v(n,r,e)}}));let s;try{s=yield o.signAndSendTransaction.call(this,{receiverId:r,actions:[(0,u.functionCall)("add_request_and_confirm",i,t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)]})}catch(t){if(t.toString().includes("Account has too many active requests. Confirm or delete some"))return yield this.deleteUnconfirmedRequests(),yield this.signAndSendTransaction({receiverId:e,actions:n});throw t}if(!s.status)throw new Error("Request failed");const a=Object.assign({},s.status);if(!a.SuccessValue||"string"!=typeof a.SuccessValue)throw new Error("Request failed");return this.setRequest({accountId:r,actions:n,requestId:parseInt(Buffer.from(a.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&(yield this.onAddRequestResult(s)),this.deleteUnconfirmedRequests(),s}))}checkMultisigCodeAndStateStatus(e){const n=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return r(this,void 0,void 0,(function*(){const r=4294967295,o=e?y.UNKNOWN_CODE:y.VALID_CODE;try{return e?yield n.signAndSendTransaction.call(this,{receiverId:this.accountId,actions:[(0,u.deployContract)(e),(0,u.functionCall)("delete_request",{request_id:r},t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)]}):yield this.deleteRequest(r),{codeStatus:y.VALID_CODE,stateStatus:p.VALID_STATE}}catch(e){if(new RegExp(f.CANNOT_DESERIALIZE_STATE).test(e&&e.kind&&e.kind.ExecutionError))return{codeStatus:o,stateStatus:p.INVALID_STATE};if(new RegExp(f.MULTISIG_NOT_INITIALIZED).test(e&&e.kind&&e.kind.ExecutionError))return{codeStatus:o,stateStatus:p.STATE_NOT_INITIALIZED};if(new RegExp(f.NO_SUCH_REQUEST).test(e&&e.kind&&e.kind.ExecutionError))return{codeStatus:o,stateStatus:p.VALID_STATE};if(new RegExp(f.METHOD_NOT_FOUND).test(e&&e.message))return{codeStatus:y.INVALID_CODE,stateStatus:p.UNKNOWN_STATE};throw e}}))}deleteRequest(e){return super.signAndSendTransaction({receiverId:this.accountId,actions:[(0,u.functionCall)("delete_request",{request_id:e},t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)]})}deleteAllRequests(){return r(this,void 0,void 0,(function*(){const e=yield this.getRequestIds();e.length&&(yield Promise.all(e.map((e=>this.deleteRequest(e)))))}))}deleteUnconfirmedRequests(){const e=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return r(this,void 0,void 0,(function*(){const n=yield this.getRequestIds(),{requestId:r}=this.getRequest();for(const o of n)if(o!=r)try{yield e.signAndSendTransaction.call(this,{receiverId:this.accountId,actions:[(0,u.functionCall)("delete_request",{request_id:o},t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)]})}catch(e){console.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}}))}getRequestIds(){return r(this,void 0,void 0,(function*(){return this.viewFunction(this.accountId,"list_request_ids")}))}getRequest(){return this.storage?JSON.parse(this.storage.getItem(t.MULTISIG_STORAGE_KEY)||"{}"):h[t.MULTISIG_STORAGE_KEY]}setRequest(e){if(this.storage)return this.storage.setItem(t.MULTISIG_STORAGE_KEY,JSON.stringify(e));h[t.MULTISIG_STORAGE_KEY]=e}}t.AccountMultisig=m;t.Account2FA=class extends m{constructor(e,t,n){super(e,t,n),this.helperUrl="https://helper.testnet.near.org",this.helperUrl=n.helperUrl||this.helperUrl,this.storage=n.storage,this.sendCode=n.sendCode||this.sendCodeDefault,this.getCode=n.getCode||this.getCodeDefault,this.verifyCode=n.verifyCode||this.verifyCodeDefault,this.onConfirmResult=n.onConfirmResult}signAndSendTransaction({receiverId:e,actions:t}){const n=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return r(this,void 0,void 0,(function*(){yield n.signAndSendTransaction.call(this,{receiverId:e,actions:t}),yield this.sendCode();const r=yield this.promptAndVerify();return this.onConfirmResult&&(yield this.onConfirmResult(r)),r}))}deployMultisig(e){const n=Object.create(null,{signAndSendTransactionWithAccount:{get:()=>super.signAndSendTransactionWithAccount}});return r(this,void 0,void 0,(function*(){const{accountId:r}=this,o=(yield this.getRecoveryMethods()).data.filter((({kind:e,publicKey:t})=>("phrase"===e||"ledger"===e)&&null!==t)).map((e=>e.publicKey)),i=(yield this.getAccessKeys()).filter((({public_key:e,access_key:{permission:t}})=>"FullAccess"===t&&!o.includes(e))).map((e=>e.public_key)).map(g),s=g((yield this.postSignedJson("/2fa/getAccessKey",{accountId:r})).publicKey),a=Buffer.from(JSON.stringify({num_confirmations:2})),c=[...i.map((e=>(0,u.deleteKey)(e))),...i.map((e=>(0,u.addKey)(e,(0,u.functionCallAccessKey)(r,t.MULTISIG_CHANGE_METHODS,null)))),(0,u.addKey)(s,(0,u.functionCallAccessKey)(r,t.MULTISIG_CONFIRM_METHODS,null)),(0,u.deployContract)(e)],l=c.concat((0,u.functionCall)("new",a,t.MULTISIG_GAS,t.MULTISIG_DEPOSIT));console.log("deploying multisig contract for",r);const{stateStatus:f}=yield this.checkMultisigCodeAndStateStatus(e);switch(f){case p.STATE_NOT_INITIALIZED:return yield n.signAndSendTransactionWithAccount.call(this,r,l);case p.VALID_STATE:return yield n.signAndSendTransactionWithAccount.call(this,r,c);case p.INVALID_STATE:throw new d.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState");default:throw new d.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown")}}))}disableWithFAK({contractBytes:e,cleanupContractBytes:t}){return r(this,void 0,void 0,(function*(){let n=[];t&&(yield this.deleteAllRequests().catch((e=>e)),n=yield this.get2faDisableCleanupActions(t));const r=yield this.get2faDisableKeyConversionActions(),o=[...n,...r,(0,u.deployContract)(e)],i=yield this.findAccessKey(this.accountId,o);if(i&&i.accessKey&&"FullAccess"!==i.accessKey.permission)throw new d.TypedError("No full access key found in keystore. Unable to bypass multisig","NoFAKFound");return this.signAndSendTransactionWithAccount(this.accountId,o)}))}get2faDisableCleanupActions(e){return r(this,void 0,void 0,(function*(){const n=yield this.viewState("").catch((e=>{const t=e.cause&&e.cause.name;if("NO_CONTRACT_CODE"==t)return[];throw"TOO_LARGE_CONTRACT_STATE"==t?new d.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState"):e})),r=n.map((({key:e})=>e.toString("base64")));return n.length?[(0,u.deployContract)(e),(0,u.functionCall)("clean",{keys:r},t.MULTISIG_GAS,new i.default("0"))]:[]}))}get2faDisableKeyConversionActions(){return r(this,void 0,void 0,(function*(){const{accountId:e}=this,t=(yield this.getAccessKeys()).filter((({access_key:e})=>"FullAccess"!==e.permission)).filter((({access_key:t})=>{const n=t.permission.FunctionCall;return n.receiver_id===e&&4===n.method_names.length&&n.method_names.includes("add_request_and_confirm")})),n=c.PublicKey.from((yield this.postSignedJson("/2fa/getAccessKey",{accountId:e})).publicKey);return[(0,u.deleteKey)(n),...t.map((({public_key:e})=>(0,u.deleteKey)(c.PublicKey.from(e)))),...t.map((({public_key:e})=>(0,u.addKey)(c.PublicKey.from(e),(0,u.fullAccessKey)())))]}))}disable(e,t){return r(this,void 0,void 0,(function*(){const{stateStatus:n}=yield this.checkMultisigCodeAndStateStatus();if(n!==p.VALID_STATE&&n!==p.STATE_NOT_INITIALIZED)throw new d.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown");let r;yield this.deleteAllRequests().catch((e=>r=e));const o=[...yield this.get2faDisableCleanupActions(t).catch((e=>{if("ContractHasExistingState"===e.type)throw r||e;throw e})),...yield this.get2faDisableKeyConversionActions(),(0,u.deployContract)(e)];return console.log("disabling 2fa for",this.accountId),yield this.signAndSendTransaction({receiverId:this.accountId,actions:o})}))}sendCodeDefault(){return r(this,void 0,void 0,(function*(){const{accountId:e}=this,{requestId:t}=this.getRequest(),n=yield this.get2faMethod();return yield this.postSignedJson("/2fa/send",{accountId:e,method:n,requestId:t}),t}))}getCodeDefault(){return r(this,void 0,void 0,(function*(){throw new Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')}))}promptAndVerify(){return r(this,void 0,void 0,(function*(){const e=yield this.get2faMethod(),t=yield this.getCode(e);try{return yield this.verifyCode(t)}catch(e){if(console.warn("Error validating security code:",e),e.toString().includes("invalid 2fa code provided")||e.toString().includes("2fa code not valid"))return yield this.promptAndVerify();throw e}}))}verifyCodeDefault(e){return r(this,void 0,void 0,(function*(){const{accountId:t}=this,n=this.getRequest();if(!n)throw new Error("no request pending");const{requestId:r}=n;return yield this.postSignedJson("/2fa/verify",{accountId:t,securityCode:e,requestId:r})}))}getRecoveryMethods(){return r(this,void 0,void 0,(function*(){const{accountId:e}=this;return{accountId:e,data:yield this.postSignedJson("/account/recoveryMethods",{accountId:e})}}))}get2faMethod(){return r(this,void 0,void 0,(function*(){let{data:e}=yield this.getRecoveryMethods();if(e&&e.length&&(e=e.find((e=>0===e.kind.indexOf("2fa-")))),!e)return null;const{kind:t,detail:n}=e;return{kind:t,detail:n}}))}signatureFor(){return r(this,void 0,void 0,(function*(){const{accountId:e}=this,t=(yield this.connection.provider.block({finality:"final"})).header.height.toString(),n=yield this.connection.signer.signMessage(Buffer.from(t),e,this.connection.networkId);return{blockNumber:t,blockNumberSignature:Buffer.from(n.signature).toString("base64")}}))}postSignedJson(e,t){return r(this,void 0,void 0,(function*(){return yield(0,l.fetchJson)(this.helperUrl+e,JSON.stringify(Object.assign(Object.assign({},t),yield this.signatureFor())))}))}};const g=e=>c.PublicKey.from(e),v=(e,n,r)=>e.map((e=>{const o=e.enum,{gas:i,publicKey:s,methodName:a,args:c,deposit:u,accessKey:d,code:l}=e[o],f={type:o[0].toUpperCase()+o.substr(1),gas:i&&i.toString()||void 0,public_key:s&&(p=s,p.toString().replace("ed25519:",""))||void 0,method_name:a,args:c&&Buffer.from(c).toString("base64")||void 0,code:l&&Buffer.from(l).toString("base64")||void 0,amount:u&&u.toString()||void 0,deposit:u&&u.toString()||"0",permission:void 0};var p;if(d&&(r===n&&"fullAccess"!==d.permission.enum&&(f.permission={receiver_id:n,allowance:t.MULTISIG_ALLOWANCE.toString(),method_names:t.MULTISIG_CHANGE_METHODS}),"functionCall"===d.permission.enum)){const{receiverId:e,methodNames:t,allowance:n}=d.permission.functionCall;f.permission={receiver_id:e,allowance:n&&n.toString()||void 0,method_names:t}}return f}))},43960:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.connect=void 0;const o=n(27757);t.connect=function(e){return r(this,void 0,void 0,(function*(){return new o.Near(e)}))}},68447:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.keyStores=void 0,t.keyStores=i(n(89510)),s(n(71137),t),s(n(43960),t),n(58010)},71137:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnection=t.ConnectedWalletAccount=t.Near=t.KeyPair=t.Signer=t.InMemorySigner=t.Contract=t.Connection=t.Account=t.multisig=t.validators=t.transactions=t.utils=t.providers=t.accountCreator=void 0;const s=i(n(84920));t.providers=s;const a=i(n(64481));t.utils=a;const c=i(n(49521));t.transactions=c;const u=i(n(90296));t.validators=u;const d=n(45180);Object.defineProperty(t,"Account",{enumerable:!0,get:function(){return d.Account}});const l=i(n(95646));t.multisig=l;const f=i(n(96726));t.accountCreator=f;const p=n(19249);Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return p.Connection}});const y=n(31344);Object.defineProperty(t,"Signer",{enumerable:!0,get:function(){return y.Signer}}),Object.defineProperty(t,"InMemorySigner",{enumerable:!0,get:function(){return y.InMemorySigner}});const h=n(45918);Object.defineProperty(t,"Contract",{enumerable:!0,get:function(){return h.Contract}});const m=n(56393);Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return m.KeyPair}});const g=n(27757);Object.defineProperty(t,"Near",{enumerable:!0,get:function(){return g.Near}});const v=n(39802);Object.defineProperty(t,"ConnectedWalletAccount",{enumerable:!0,get:function(){return v.ConnectedWalletAccount}}),Object.defineProperty(t,"WalletConnection",{enumerable:!0,get:function(){return v.WalletConnection}})},19249:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;const r=n(84920),o=n(31344);class i{constructor(e,t,n,r){this.networkId=e,this.provider=t,this.signer=n,this.jsvmAccountId=r}static fromConfig(e){const t=function(e){switch(e.type){case void 0:return e;case"JsonRpcProvider":return new r.JsonRpcProvider(Object.assign({},e.args));default:throw new Error(`Unknown provider type ${e.type}`)}}(e.provider),n=function(e){switch(e.type){case void 0:return e;case"InMemorySigner":return new o.InMemorySigner(e.keyStore);default:throw new Error(`Unknown signer type ${e.type}`)}}(e.signer);return new i(e.networkId,t,n,e.jsvmAccountId)}}t.Connection=i},24873:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_FUNCTION_CALL_GAS=void 0;const o=r(n(13550));t.DEFAULT_FUNCTION_CALL_GAS=new o.default("30000000000000")},45918:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Contract=void 0;const i=o(n(13550)),s=o(n(27812)),a=n(84920),c=n(44497);function u(e,t){return{[e](...e){return t(...e)}}[e]}const d=e=>e&&void 0!==e.byteLength&&e.byteLength===e.length,l=e=>"[object Object]"===Object.prototype.toString.call(e);t.Contract=class{constructor(e,t,n){this.account=e,this.contractId=t;const{viewMethods:o=[],changeMethods:i=[]}=n;o.forEach((e=>{Object.defineProperty(this,e,{writable:!1,enumerable:!0,value:u(e,((t={},n={},...o)=>r(this,void 0,void 0,(function*(){if(o.length||!l(t)&&!d(t)||!l(n))throw new c.PositionalArgsError;return this.account.viewFunction(this.contractId,e,t,n)}))))})})),i.forEach((e=>{Object.defineProperty(this,e,{writable:!1,enumerable:!0,value:u(e,((...t)=>r(this,void 0,void 0,(function*(){if(t.length&&(t.length>3||!l(t[0])&&!d(t[0])))throw new c.PositionalArgsError;if(t.length>1||!t[0]||!t[0].args){return(0,s.default)("contract.methodName(args, gas, amount)")("use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead"),this._changeMethod({methodName:e,args:t[0],gas:t[1],amount:t[2]})}return this._changeMethod(Object.assign({methodName:e},t[0]))}))))})}))}_changeMethod({args:e,methodName:t,gas:n,amount:o,meta:s,callbackUrl:u}){return r(this,void 0,void 0,(function*(){!function(e){const t="number, decimal string or BN";for(const n of Object.keys(e)){const r=e[n];if(r&&!i.default.isBN(r)&&isNaN(r))throw new c.ArgumentTypeError(n,t,r)}}({gas:n,amount:o});const r=yield this.account.functionCall({contractId:this.contractId,methodName:t,args:e,gas:n,attachedDeposit:o,walletMeta:s,walletCallbackUrl:u});return(0,a.getTransactionLastResult)(r)}))}}},89510:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=t.BrowserLocalStorageKeyStore=t.InMemoryKeyStore=t.KeyStore=void 0;const r=n(76165);Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return r.KeyStore}});const o=n(22657);Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return o.InMemoryKeyStore}});const i=n(17884);Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return i.BrowserLocalStorageKeyStore}});const s=n(50850);Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return s.MergeKeyStore}})},17884:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserLocalStorageKeyStore=void 0;const o=n(76165),i=n(56393);class s extends o.KeyStore{constructor(e=window.localStorage,t="near-api-js:keystore:"){super(),this.localStorage=e,this.prefix=t}setKey(e,t,n){return r(this,void 0,void 0,(function*(){this.localStorage.setItem(this.storageKeyForSecretKey(e,t),n.toString())}))}getKey(e,t){return r(this,void 0,void 0,(function*(){const n=this.localStorage.getItem(this.storageKeyForSecretKey(e,t));return n?i.KeyPair.fromString(n):null}))}removeKey(e,t){return r(this,void 0,void 0,(function*(){this.localStorage.removeItem(this.storageKeyForSecretKey(e,t))}))}clear(){return r(this,void 0,void 0,(function*(){for(const e of this.storageKeys())e.startsWith(this.prefix)&&this.localStorage.removeItem(e)}))}getNetworks(){return r(this,void 0,void 0,(function*(){const e=new Set;for(const t of this.storageKeys())if(t.startsWith(this.prefix)){const n=t.substring(this.prefix.length).split(":");e.add(n[1])}return Array.from(e.values())}))}getAccounts(e){return r(this,void 0,void 0,(function*(){const t=new Array;for(const n of this.storageKeys())if(n.startsWith(this.prefix)){const r=n.substring(this.prefix.length).split(":");r[1]===e&&t.push(r[0])}return t}))}storageKeyForSecretKey(e,t){return`${this.prefix}${t}:${e}`}*storageKeys(){for(let e=0;e<this.localStorage.length;e++)yield this.localStorage.key(e)}}t.BrowserLocalStorageKeyStore=s},22657:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryKeyStore=void 0;const o=n(76165),i=n(56393);class s extends o.KeyStore{constructor(){super(),this.keys={}}setKey(e,t,n){return r(this,void 0,void 0,(function*(){this.keys[`${t}:${e}`]=n.toString()}))}getKey(e,t){return r(this,void 0,void 0,(function*(){const n=this.keys[`${t}:${e}`];return n?i.KeyPair.fromString(n):null}))}removeKey(e,t){return r(this,void 0,void 0,(function*(){delete this.keys[`${t}:${e}`]}))}clear(){return r(this,void 0,void 0,(function*(){this.keys={}}))}getNetworks(){return r(this,void 0,void 0,(function*(){const e=new Set;return Object.keys(this.keys).forEach((t=>{const n=t.split(":");e.add(n[1])})),Array.from(e.values())}))}getAccounts(e){return r(this,void 0,void 0,(function*(){const t=new Array;return Object.keys(this.keys).forEach((n=>{const r=n.split(":");r[r.length-1]===e&&t.push(r.slice(0,r.length-1).join(":"))})),t}))}toString(){return"InMemoryKeyStore"}}t.InMemoryKeyStore=s},76165:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyStore=void 0;t.KeyStore=class{}},50850:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=void 0;const o=n(76165);class i extends o.KeyStore{constructor(e,t={writeKeyStoreIndex:0}){super(),this.options=t,this.keyStores=e}setKey(e,t,n){return r(this,void 0,void 0,(function*(){yield this.keyStores[this.options.writeKeyStoreIndex].setKey(e,t,n)}))}getKey(e,t){return r(this,void 0,void 0,(function*(){for(const n of this.keyStores){const r=yield n.getKey(e,t);if(r)return r}return null}))}removeKey(e,t){return r(this,void 0,void 0,(function*(){for(const n of this.keyStores)yield n.removeKey(e,t)}))}clear(){return r(this,void 0,void 0,(function*(){for(const e of this.keyStores)yield e.clear()}))}getNetworks(){return r(this,void 0,void 0,(function*(){const e=new Set;for(const t of this.keyStores)for(const n of yield t.getNetworks())e.add(n);return Array.from(e)}))}getAccounts(e){return r(this,void 0,void 0,(function*(){const t=new Set;for(const n of this.keyStores)for(const r of yield n.getAccounts(e))t.add(r);return Array.from(t)}))}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}t.MergeKeyStore=i},27757:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Near=void 0;const i=o(n(13550)),s=n(45180),a=n(19249),c=n(96726);t.Near=class{constructor(e){if(this.config=e,this.connection=a.Connection.fromConfig({networkId:e.networkId,provider:{type:"JsonRpcProvider",args:{url:e.nodeUrl,headers:e.headers}},signer:e.signer||{type:"InMemorySigner",keyStore:e.keyStore},jsvmAccountId:e.jsvmAccountId||`jsvm.${e.networkId}`}),e.masterAccount){const t=e.initialBalance?new i.default(e.initialBalance):new i.default("500000000000000000000000000");this.accountCreator=new c.LocalAccountCreator(new s.Account(this.connection,e.masterAccount),t)}else e.helperUrl?this.accountCreator=new c.UrlAccountCreator(this.connection,e.helperUrl):this.accountCreator=null}account(e){return r(this,void 0,void 0,(function*(){return new s.Account(this.connection,e)}))}createAccount(e,t){return r(this,void 0,void 0,(function*(){if(!this.accountCreator)throw new Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return yield this.accountCreator.createAccount(e,t),new s.Account(this.connection,e)}))}}},84920:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorContext=t.TypedError=t.getTransactionLastResult=t.FinalExecutionStatusBasic=t.JsonRpcProvider=t.Provider=void 0;const r=n(31374);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return r.Provider}}),Object.defineProperty(t,"getTransactionLastResult",{enumerable:!0,get:function(){return r.getTransactionLastResult}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return r.FinalExecutionStatusBasic}});const o=n(26550);Object.defineProperty(t,"JsonRpcProvider",{enumerable:!0,get:function(){return o.JsonRpcProvider}}),Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return o.TypedError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return o.ErrorContext}})},26550:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcProvider=t.ErrorContext=t.TypedError=void 0;const s=n(31374),a=n(73490),c=n(44497);Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return c.TypedError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return c.ErrorContext}});const u=n(25532),d=i(n(12707)),l=n(9743);let f=123;class p extends s.Provider{constructor(e){super(),this.connection=e||{url:""}}status(){return r(this,void 0,void 0,(function*(){return this.sendJsonRpc("status",[])}))}sendTransaction(e){return r(this,void 0,void 0,(function*(){const t=e.encode();return this.sendJsonRpc("broadcast_tx_commit",[Buffer.from(t).toString("base64")])}))}sendTransactionAsync(e){return r(this,void 0,void 0,(function*(){const t=e.encode();return this.sendJsonRpc("broadcast_tx_async",[Buffer.from(t).toString("base64")])}))}txStatus(e,t){return r(this,void 0,void 0,(function*(){return"string"==typeof e?this.txStatusString(e,t):this.txStatusUint8Array(e,t)}))}txStatusUint8Array(e,t){return r(this,void 0,void 0,(function*(){return this.sendJsonRpc("tx",[(0,u.baseEncode)(e),t])}))}txStatusString(e,t){return r(this,void 0,void 0,(function*(){return this.sendJsonRpc("tx",[e,t])}))}txStatusReceipts(e,t){return r(this,void 0,void 0,(function*(){return"string"==typeof e?this.sendJsonRpc("EXPERIMENTAL_tx_status",[e,t]):this.sendJsonRpc("EXPERIMENTAL_tx_status",[(0,u.baseEncode)(e),t])}))}query(...e){return r(this,void 0,void 0,(function*(){let t;if(1===e.length){const n=e[0],{block_id:r,blockId:i}=n,s=o(n,["block_id","blockId"]);t=yield this.sendJsonRpc("query",Object.assign(Object.assign({},s),{block_id:r||i}))}else{const[n,r]=e;t=yield this.sendJsonRpc("query",[n,r])}if(t&&t.error)throw new c.TypedError(`Querying failed: ${t.error}.\n${JSON.stringify(t,null,2)}`,t.error.name);return t}))}block(e){return r(this,void 0,void 0,(function*(){const{finality:t}=e,{blockId:n}=e;return this.sendJsonRpc("block",{block_id:n,finality:t})}))}blockChanges(e){return r(this,void 0,void 0,(function*(){const{finality:t}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:n,finality:t})}))}chunk(e){return r(this,void 0,void 0,(function*(){return this.sendJsonRpc("chunk",[e])}))}validators(e){return r(this,void 0,void 0,(function*(){return this.sendJsonRpc("validators",[e])}))}experimental_protocolConfig(e){return r(this,void 0,void 0,(function*(){const t=e,{blockId:n}=t,r=o(t,["blockId"]);return yield this.sendJsonRpc("EXPERIMENTAL_protocol_config",Object.assign(Object.assign({},r),{block_id:n}))}))}lightClientProof(e){return r(this,void 0,void 0,(function*(){return yield this.sendJsonRpc("EXPERIMENTAL_light_client_proof",e)}))}accessKeyChanges(e,t){return r(this,void 0,void 0,(function*(){const{finality:n}=t,{blockId:r}=t;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:e,block_id:r,finality:n})}))}singleAccessKeyChanges(e,t){return r(this,void 0,void 0,(function*(){const{finality:n}=t,{blockId:r}=t;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:e,block_id:r,finality:n})}))}accountChanges(e,t){return r(this,void 0,void 0,(function*(){const{finality:n}=t,{blockId:r}=t;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:e,block_id:r,finality:n})}))}contractStateChanges(e,t,n=""){return r(this,void 0,void 0,(function*(){const{finality:r}=t,{blockId:o}=t;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:e,key_prefix_base64:n,block_id:o,finality:r})}))}contractCodeChanges(e,t){return r(this,void 0,void 0,(function*(){const{finality:n}=t,{blockId:r}=t;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:e,block_id:r,finality:n})}))}gasPrice(e){return r(this,void 0,void 0,(function*(){return yield this.sendJsonRpc("gas_price",[e])}))}sendJsonRpc(e,t){return r(this,void 0,void 0,(function*(){const n=yield(0,d.default)(500,12,1.5,(()=>r(this,void 0,void 0,(function*(){try{const n={method:e,params:t,id:f++,jsonrpc:"2.0"},r=yield(0,a.fetchJson)(this.connection,JSON.stringify(n));if(r.error){if("object"==typeof r.error.data){if("string"==typeof r.error.data.error_message&&"string"==typeof r.error.data.error_type)throw new c.TypedError(r.error.data.error_message,r.error.data.error_type);throw(0,l.parseRpcError)(r.error.data)}{const e=`[${r.error.code}] ${r.error.message}: ${r.error.data}`;if("Timeout"===r.error.data||e.includes("Timeout error")||e.includes("query has timed out"))throw new c.TypedError(e,"TimeoutError");throw new c.TypedError(e,r.error.name)}}return r}catch(n){if("TimeoutError"===n.type)return process.env.NEAR_NO_LOGS||console.warn(`Retrying request to ${e} as it has timed out`,t),null;throw n}})))),{result:o}=n;if(void 0===o)throw new c.TypedError(`Exceeded 12 attempts for request to ${e}.`,"RetriesExceeded");return o}))}}t.JsonRpcProvider=p},31374:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getTransactionLastResult=t.Provider=t.IdType=t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=void 0,function(e){e.Unknown="Unknown",e.Pending="Pending",e.Failure="Failure"}(t.ExecutionStatusBasic||(t.ExecutionStatusBasic={})),function(e){e.NotStarted="NotStarted",e.Started="Started",e.Failure="Failure"}(t.FinalExecutionStatusBasic||(t.FinalExecutionStatusBasic={})),function(e){e.Transaction="transaction",e.Receipt="receipt"}(t.IdType||(t.IdType={}));t.Provider=class{},t.getTransactionLastResult=function(e){if("object"==typeof e.status&&"string"==typeof e.status.SuccessValue){const t=Buffer.from(e.status.SuccessValue,"base64").toString();try{return JSON.parse(t)}catch(e){return t}}return null}},31344:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InMemorySigner=t.Signer=void 0;const i=o(n(72023)),s=n(56393),a=n(22657);class c{}t.Signer=c;class u extends c{constructor(e){super(),this.keyStore=e}static fromKeyPair(e,t,n){return r(this,void 0,void 0,(function*(){const r=new a.InMemoryKeyStore;return yield r.setKey(e,t,n),new u(r)}))}createKey(e,t){return r(this,void 0,void 0,(function*(){const n=s.KeyPair.fromRandom("ed25519");return yield this.keyStore.setKey(t,e,n),n.getPublicKey()}))}getPublicKey(e,t){return r(this,void 0,void 0,(function*(){const n=yield this.keyStore.getKey(t,e);return null===n?null:n.getPublicKey()}))}signMessage(e,t,n){return r(this,void 0,void 0,(function*(){const r=new Uint8Array(i.default.sha256.array(e));if(!t)throw new Error("InMemorySigner requires provided account id");const o=yield this.keyStore.getKey(n,t);if(null===o)throw new Error(`Key for ${t} not found in ${n}`);return o.sign(r)}))}toString(){return`InMemorySigner(${this.keyStore})`}}t.InMemorySigner=u},49521:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.signTransaction=t.createTransaction=t.SCHEMA=t.Action=t.SignedTransaction=t.Transaction=t.Signature=t.deleteAccount=t.deleteKey=t.addKey=t.stake=t.transfer=t.functionCall=t.stringifyJsonOrBytes=t.deployContract=t.createAccount=t.DeleteAccount=t.DeleteKey=t.AddKey=t.Stake=t.Transfer=t.FunctionCall=t.DeployContract=t.CreateAccount=t.IAction=t.functionCallAccessKey=t.fullAccessKey=t.AccessKey=t.AccessKeyPermission=t.FullAccessPermission=t.FunctionCallPermission=void 0;const i=o(n(72023)),s=n(93221),a=n(25532),c=n(56393);class u extends s.Assignable{}t.FunctionCallPermission=u;class d extends s.Assignable{}t.FullAccessPermission=d;class l extends s.Enum{}t.AccessKeyPermission=l;class f extends s.Assignable{}t.AccessKey=f,t.fullAccessKey=function(){return new f({permission:new l({fullAccess:new d({})})})},t.functionCallAccessKey=function(e,t,n){return new f({permission:new l({functionCall:new u({receiverId:e,allowance:n,methodNames:t})})})};class p extends s.Assignable{}t.IAction=p;class y extends p{}t.CreateAccount=y;class h extends p{}t.DeployContract=h;class m extends p{}t.FunctionCall=m;class g extends p{}t.Transfer=g;class v extends p{}t.Stake=v;class _ extends p{}t.AddKey=_;class b extends p{}t.DeleteKey=b;class I extends p{}function E(e){return void 0!==e.byteLength&&e.byteLength===e.length?e:Buffer.from(JSON.stringify(e))}t.DeleteAccount=I,t.createAccount=function(){return new T({createAccount:new y({})})},t.deployContract=function(e){return new T({deployContract:new h({code:e})})},t.stringifyJsonOrBytes=E,t.functionCall=function(e,t,n,r,o=E,i=!1){return new T(i?{functionCall:new m({methodName:e,args:t,gas:n,deposit:r})}:{functionCall:new m({methodName:e,args:o(t),gas:n,deposit:r})})},t.transfer=function(e){return new T({transfer:new g({deposit:e})})},t.stake=function(e,t){return new T({stake:new v({stake:e,publicKey:t})})},t.addKey=function(e,t){return new T({addKey:new _({publicKey:e,accessKey:t})})},t.deleteKey=function(e){return new T({deleteKey:new b({publicKey:e})})},t.deleteAccount=function(e){return new T({deleteAccount:new I({beneficiaryId:e})})};class w extends s.Assignable{}t.Signature=w;class A extends s.Assignable{encode(){return(0,a.serialize)(t.SCHEMA,this)}static decode(e){return(0,a.deserialize)(t.SCHEMA,A,e)}}t.Transaction=A;class S extends s.Assignable{encode(){return(0,a.serialize)(t.SCHEMA,this)}static decode(e){return(0,a.deserialize)(t.SCHEMA,S,e)}}t.SignedTransaction=S;class T extends s.Enum{}function k(e,t,n,r,o,i){return new A({signerId:e,publicKey:t,nonce:r,receiverId:n,actions:o,blockHash:i})}function N(e,n,o,s){return r(this,void 0,void 0,(function*(){const r=(0,a.serialize)(t.SCHEMA,e),c=new Uint8Array(i.default.sha256.array(r)),u=yield n.signMessage(r,o,s);return[c,new S({transaction:e,signature:new w({keyType:e.publicKey.keyType,data:u.signature})})]}))}t.Action=T,t.SCHEMA=new Map([[w,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[S,{kind:"struct",fields:[["transaction",A],["signature",w]]}],[A,{kind:"struct",fields:[["signerId","string"],["publicKey",c.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[T]]]}],[c.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[f,{kind:"struct",fields:[["nonce","u64"],["permission",l]]}],[l,{kind:"enum",field:"enum",values:[["functionCall",u],["fullAccess",d]]}],[u,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[d,{kind:"struct",fields:[]}],[T,{kind:"enum",field:"enum",values:[["createAccount",y],["deployContract",h],["functionCall",m],["transfer",g],["stake",v],["addKey",_],["deleteKey",b],["deleteAccount",I]]}],[y,{kind:"struct",fields:[]}],[h,{kind:"struct",fields:[["code",["u8"]]]}],[m,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[g,{kind:"struct",fields:[["deposit","u128"]]}],[v,{kind:"struct",fields:[["stake","u128"],["publicKey",c.PublicKey]]}],[_,{kind:"struct",fields:[["publicKey",c.PublicKey],["accessKey",f]]}],[b,{kind:"struct",fields:[["publicKey",c.PublicKey]]}],[I,{kind:"struct",fields:[["beneficiaryId","string"]]}]]),t.createTransaction=k,t.signTransaction=function(...e){return r(this,void 0,void 0,(function*(){if(e[0].constructor===A){const[t,n,r,o]=e;return N(t,n,r,o)}{const[t,n,r,o,i,s,a]=e;return N(k(s,yield i.getPublicKey(s,a),t,n,r,o),i,s,a)}}))}},93221:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Assignable=t.Enum=void 0;t.Enum=class{constructor(e){if(1!==Object.keys(e).length)throw new Error("Enum can only take single value");Object.keys(e).map((t=>{this[t]=e[t],this.enum=t}))}};t.Assignable=class{constructor(e){Object.keys(e).map((t=>{this[t]=e[t]}))}}},44497:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.logWarning=t.ErrorContext=t.TypedError=t.ArgumentTypeError=t.PositionalArgsError=void 0;class n extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}t.PositionalArgsError=n;class r extends Error{constructor(e,t,n){super(`Expected ${t} for '${e}' argument, but got '${JSON.stringify(n)}'`)}}t.ArgumentTypeError=r;class o extends Error{constructor(e,t,n){super(e),this.type=t||"UntypedError",this.context=n}}t.TypedError=o;t.ErrorContext=class{constructor(e){this.transactionHash=e}},t.logWarning=function(...e){process.env.NEAR_NO_LOGS||console.warn(...e)}},12707:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};function r(e){return new Promise((t=>setTimeout(t,e)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,o,i){return n(this,void 0,void 0,(function*(){let n=e;for(let e=0;e<t;e++){const e=yield i();if(e)return e;yield r(n),n*=o}return null}))}},77084:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseNearAmount=t.formatNearAmount=t.NEAR_NOMINATION=t.NEAR_NOMINATION_EXP=void 0;const o=r(n(13550));t.NEAR_NOMINATION_EXP=24,t.NEAR_NOMINATION=new o.default("10",10).pow(new o.default(t.NEAR_NOMINATION_EXP,10));const i=[],s=new o.default(10);for(let e=0,n=new o.default(5);e<t.NEAR_NOMINATION_EXP;e++,n=n.mul(s))i[e]=n;t.formatNearAmount=function(e,n=t.NEAR_NOMINATION_EXP){const r=new o.default(e,10);if(n!==t.NEAR_NOMINATION_EXP){const e=t.NEAR_NOMINATION_EXP-n-1;e>0&&r.iadd(i[e])}const s=(e=r.toString()).substring(0,e.length-t.NEAR_NOMINATION_EXP)||"0",a=e.substring(e.length-t.NEAR_NOMINATION_EXP).padStart(t.NEAR_NOMINATION_EXP,"0").substring(0,n);return`${function(e){const t=/(-?\d+)(\d{3})/;for(;t.test(e);)e=e.replace(t,"$1,$2");return e}(s)}.${a}`.replace(/\.?0*$/,"")},t.parseNearAmount=function(e){if(!e)return null;const n=(e=e.replace(/,/g,"").trim()).split("."),r=n[0],o=n[1]||"";if(n.length>2||o.length>t.NEAR_NOMINATION_EXP)throw new Error(`Cannot parse '${e}' as NEAR amount`);return function(e){if(""===(e=e.replace(/^0+/,"")))return"0";return e}(r+o.padEnd(t.NEAR_NOMINATION_EXP,"0"))}},64481:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.logWarning=t.rpc_errors=t.KeyPairEd25519=t.KeyPair=t.PublicKey=t.format=t.enums=t.web=t.serialize=t.key_pair=void 0;const s=i(n(56393));t.key_pair=s;const a=i(n(39803));t.serialize=a;const c=i(n(73490));t.web=c;const u=i(n(93221));t.enums=u;const d=i(n(77084));t.format=d;const l=i(n(9743));t.rpc_errors=l;const f=n(56393);Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return f.PublicKey}}),Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return f.KeyPair}}),Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return f.KeyPairEd25519}});const p=n(44497);Object.defineProperty(t,"logWarning",{enumerable:!0,get:function(){return p.logWarning}})},56393:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyPairEd25519=t.KeyPair=t.PublicKey=t.KeyType=void 0;const o=r(n(50780)),i=n(39803),s=n(93221);var a;function c(e){if("ed25519"===e.toLowerCase())return a.ED25519;throw new Error(`Unknown key type ${e}`)}!function(e){e[e.ED25519=0]="ED25519"}(a=t.KeyType||(t.KeyType={}));class u extends s.Assignable{static from(e){return"string"==typeof e?u.fromString(e):e}static fromString(e){const t=e.split(":");if(1===t.length)return new u({keyType:a.ED25519,data:(0,i.base_decode)(t[0])});if(2===t.length)return new u({keyType:c(t[0]),data:(0,i.base_decode)(t[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${function(e){if(e===a.ED25519)return"ed25519";throw new Error(`Unknown key type ${e}`)}(this.keyType)}:${(0,i.base_encode)(this.data)}`}verify(e,t){if(this.keyType===a.ED25519)return o.default.sign.detached.verify(e,t,this.data);throw new Error(`Unknown key type ${this.keyType}`)}}t.PublicKey=u;class d{static fromRandom(e){if("ED25519"===e.toUpperCase())return l.fromRandom();throw new Error(`Unknown curve ${e}`)}static fromString(e){const t=e.split(":");if(1===t.length)return new l(t[0]);if(2===t.length){if("ED25519"===t[0].toUpperCase())return new l(t[1]);throw new Error(`Unknown curve: ${t[0]}`)}throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}t.KeyPair=d;class l extends d{constructor(e){super();const t=o.default.sign.keyPair.fromSecretKey((0,i.base_decode)(e));this.publicKey=new u({keyType:a.ED25519,data:t.publicKey}),this.secretKey=e}static fromRandom(){const e=o.default.sign.keyPair();return new l((0,i.base_encode)(e.secretKey))}sign(e){return{signature:o.default.sign.detached(e,(0,i.base_decode)(this.secretKey)),publicKey:this.publicKey}}verify(e,t){return this.publicKey.verify(e,t)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}t.KeyPairEd25519=l},9743:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.formatError=t.parseResultError=t.parseRpcError=t.ServerError=void 0;const o=r(n(466)),i=r(n(56527)),s=r(n(87930)),a=n(71137),c=n(44497),u={formatNear:()=>(e,t)=>a.utils.format.formatNearAmount(t(e))};class d extends c.TypedError{}t.ServerError=d;class l extends d{}function f(e){const t={},n=y(e,i.default.schema,t,""),r=new d(p(n,t),n);return Object.assign(r,t),r}function p(e,t){return"string"==typeof s.default[e]?o.default.render(s.default[e],Object.assign(Object.assign({},t),u)):JSON.stringify(t)}function y(e,t,n,r){let o,i,s;for(const n in t){if(a=e[n],"[object String]"===Object.prototype.toString.call(a))return e[n];if(h(e[n]))o=e[n],i=t[n],s=n;else{if(!h(e.kind)||!h(e.kind[n]))continue;o=e.kind[n],i=t[n],s=n}}var a;if(o&&i){for(const e of Object.keys(i.props))n[e]=o[e];return y(o,t,n,s)}return n.kind=e,r}function h(e){return"[object Object]"===Object.prototype.toString.call(e)}t.parseRpcError=f,t.parseResultError=function(e){const t=f(e.status.Failure),n=new l;return Object.assign(n,t),n.type=t.type,n.message=t.message,n.transaction_outcome=e.transaction_outcome,n},t.formatError=p},39803:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BinaryReader=t.BinaryWriter=t.BorshError=t.deserialize=t.serialize=t.base_decode=t.base_encode=void 0;var r=n(25532);Object.defineProperty(t,"base_encode",{enumerable:!0,get:function(){return r.baseEncode}}),Object.defineProperty(t,"base_decode",{enumerable:!0,get:function(){return r.baseDecode}}),Object.defineProperty(t,"serialize",{enumerable:!0,get:function(){return r.serialize}}),Object.defineProperty(t,"deserialize",{enumerable:!0,get:function(){return r.deserialize}}),Object.defineProperty(t,"BorshError",{enumerable:!0,get:function(){return r.BorshError}}),Object.defineProperty(t,"BinaryWriter",{enumerable:!0,get:function(){return r.BinaryWriter}}),Object.defineProperty(t,"BinaryReader",{enumerable:!0,get:function(){return r.BinaryReader}})},73490:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchJson=void 0;const i=o(n(60969)),s=o(n(12707)),a=n(84920),c=n(44497);t.fetchJson=function(e,t){return r(this,void 0,void 0,(function*(){let n={url:null};"string"==typeof e?n.url=e:n=e;const o=yield(0,s.default)(1e3,10,1.5,(()=>r(this,void 0,void 0,(function*(){try{const e=yield fetch(n.url,{method:t?"POST":"GET",body:t||void 0,headers:Object.assign(Object.assign({},n.headers),{"Content-Type":"application/json"})});if(!e.ok){if(503===e.status)return(0,c.logWarning)(`Retrying HTTP request for ${n.url} as it's not available now`),null;throw(0,i.default)(e.status,yield e.text())}return e}catch(e){if(e.toString().includes("FetchError")||e.toString().includes("Failed to fetch"))return(0,c.logWarning)(`Retrying HTTP request for ${n.url} because of error: ${e}`),null;throw e}}))));if(!o)throw new a.TypedError(`Exceeded 10 attempts for ${n.url}.`,"RetriesExceeded");return yield o.json()}))}},90296:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.diffEpochValidators=t.findSeatPrice=void 0;const o=r(n(13550)),i=r(n(27812));t.findSeatPrice=function(e,t,n,r){if(r&&r<49)return function(e,t){const n=e.map((e=>new o.default(e.stake,10))).sort(((e,t)=>e.cmp(t))),r=new o.default(t),i=n.reduce(((e,t)=>e.add(t)));if(i.lt(r))throw new Error("Stakes are below seats");let s=new o.default(1),a=i.add(new o.default(1));for(;!s.eq(a.sub(new o.default(1)));){const e=s.add(a).div(new o.default(2));let t=!1,i=new o.default(0);for(let o=0;o<n.length;++o)if(i=i.add(n[o].div(e)),i.gte(r)){s=e,t=!0;break}t||(a=e)}return s}(e,t);if(!n){(0,i.default)("findSeatPrice(validators, maxNumberOfSeats)")("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),n=[1,6250]}return function(e,t,n){if(2!=n.length)throw Error("minimumStakeRatio should have 2 elements");const r=e.map((e=>new o.default(e.stake,10))).sort(((e,t)=>e.cmp(t))),i=r.reduce(((e,t)=>e.add(t)));return e.length<t?i.mul(new o.default(n[0])).div(new o.default(n[1])):r[0].add(new o.default(1))}(e,t,n)},t.diffEpochValidators=function(e,t){const n=new Map;e.forEach((e=>n.set(e.account_id,e)));const r=new Set(t.map((e=>e.account_id)));return{newValidators:t.filter((e=>!n.has(e.account_id))),removedValidators:e.filter((e=>!r.has(e.account_id))),changedValidators:t.filter((e=>n.has(e.account_id)&&n.get(e.account_id).stake!=e.stake)).map((e=>({current:n.get(e.account_id),next:e})))}}},39802:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedWalletAccount=t.WalletConnection=void 0;const i=n(45180),s=n(49521),a=n(64481),c=n(25532),u=n(25532),d=o(n(13550)),l="pending_key";t.WalletConnection=class{constructor(e,t){if("undefined"==typeof window)return new Proxy(this,{get(e,t){return"isSignedIn"===t?()=>!1:"getAccountId"===t?()=>"":e[t]&&"function"==typeof e[t]?()=>{throw new Error("No window found in context, please ensure you are using WalletConnection on the browser")}:e[t]}});this._near=e;const n=t+"_wallet_auth_key",r=JSON.parse(window.localStorage.getItem(n));this._networkId=e.config.networkId,this._walletBaseUrl=e.config.walletUrl,t=t||e.config.contractName||"default",this._keyStore=e.connection.signer.keyStore,this._authData=r||{allKeys:[]},this._authDataKey=n,this.isSignedIn()||(this._completeSignInPromise=this._completeSignInWithAccessKey())}isSignedIn(){return!!this._authData.accountId}isSignedInAsync(){return r(this,void 0,void 0,(function*(){return this._completeSignInPromise?(yield this._completeSignInPromise,this.isSignedIn()):this.isSignedIn()}))}getAccountId(){return this._authData.accountId||""}requestSignIn({contractId:e,methodNames:t,successUrl:n,failureUrl:o}){return r(this,void 0,void 0,(function*(){const r=new URL(window.location.href),i=new URL(this._walletBaseUrl+"/login/");if(i.searchParams.set("success_url",n||r.href),i.searchParams.set("failure_url",o||r.href),e){const t=yield this._near.account(e);yield t.state(),i.searchParams.set("contract_id",e);const n=a.KeyPair.fromRandom("ed25519");i.searchParams.set("public_key",n.getPublicKey().toString()),yield this._keyStore.setKey(this._networkId,l+n.getPublicKey(),n)}t&&t.forEach((e=>{i.searchParams.append("methodNames",e)})),window.location.assign(i.toString())}))}requestSignTransactions({transactions:e,meta:t,callbackUrl:n}){return r(this,void 0,void 0,(function*(){const r=new URL(window.location.href),o=new URL("sign",this._walletBaseUrl);o.searchParams.set("transactions",e.map((e=>(0,u.serialize)(s.SCHEMA,e))).map((e=>Buffer.from(e).toString("base64"))).join(",")),o.searchParams.set("callbackUrl",n||r.href),t&&o.searchParams.set("meta",t),window.location.assign(o.toString())}))}_completeSignInWithAccessKey(){return r(this,void 0,void 0,(function*(){const e=new URL(window.location.href),t=e.searchParams.get("public_key")||"",n=(e.searchParams.get("all_keys")||"").split(","),r=e.searchParams.get("account_id")||"";if(r){const e={accountId:r,allKeys:n};window.localStorage.setItem(this._authDataKey,JSON.stringify(e)),t&&(yield this._moveKeyFromTempToPermanent(r,t)),this._authData=e}e.searchParams.delete("public_key"),e.searchParams.delete("all_keys"),e.searchParams.delete("account_id"),e.searchParams.delete("meta"),e.searchParams.delete("transactionHashes"),window.history.replaceState({},document.title,e.toString())}))}_moveKeyFromTempToPermanent(e,t){return r(this,void 0,void 0,(function*(){const n=yield this._keyStore.getKey(this._networkId,l+t);yield this._keyStore.setKey(this._networkId,e,n),yield this._keyStore.removeKey(this._networkId,l+t)}))}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new f(this,this._near.connection,this._authData.accountId)),this._connectedAccount}};class f extends i.Account{constructor(e,t,n){super(t,n),this.walletConnection=e}signAndSendTransaction({receiverId:e,actions:t,walletMeta:n,walletCallbackUrl:o=window.location.href}){const i=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return r(this,void 0,void 0,(function*(){const r=yield this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);let u=yield this.accessKeyForTransaction(e,t,r);if(!u)throw new Error(`Cannot find matching key for transaction sent to ${e}`);if(r&&r.toString()===u.public_key)try{return yield i.signAndSendTransaction.call(this,{receiverId:e,actions:t})}catch(n){if("NotEnoughAllowance"!==n.type)throw n;u=yield this.accessKeyForTransaction(e,t)}const l=yield this.connection.provider.block({finality:"final"}),f=(0,c.baseDecode)(l.header.hash),p=a.PublicKey.from(u.public_key),y=u.access_key.nonce.add(new d.default(1)),h=(0,s.createTransaction)(this.accountId,p,e,y,t,f);return yield this.walletConnection.requestSignTransactions({transactions:[h],meta:n,callbackUrl:o}),new Promise(((e,t)=>{setTimeout((()=>{t(new Error("Failed to redirect to sign transaction"))}),1e3)}))}))}accessKeyMatchesTransaction(e,t,n){return r(this,void 0,void 0,(function*(){const{access_key:{permission:r}}=e;if("FullAccess"===r)return!0;if(r.FunctionCall){const{receiver_id:e,method_names:o}=r.FunctionCall;if(e===this.accountId&&o.includes("add_request_and_confirm"))return!0;if(e===t){if(1!==n.length)return!1;const[{functionCall:e}]=n;return e&&(!e.deposit||"0"===e.deposit.toString())&&(0===o.length||o.includes(e.methodName))}}return!1}))}accessKeyForTransaction(e,t,n){return r(this,void 0,void 0,(function*(){const r=yield this.getAccessKeys();if(n){const o=r.find((e=>e.public_key.toString()===n.toString()));if(o&&(yield this.accessKeyMatchesTransaction(o,e,t)))return o}const o=this.walletConnection._authData.allKeys;for(const n of r)if(-1!==o.indexOf(n.public_key)&&(yield this.accessKeyMatchesTransaction(n,e,t)))return n;return null}))}}t.ConnectedWalletAccount=f},60969:function(e,t,n){var r,o=n(17254)("http-errors"),i=n(66644),s=n(12823),a=n(35717),c=n(72953);function u(e){return Number(String(e).charAt(0)+"00")}function d(e,t){var n=Object.getOwnPropertyDescriptor(e,"name");n&&n.configurable&&(n.value=t,Object.defineProperty(e,"name",n))}function l(e){return"Error"!==e.substr(-5)?e+"Error":e}e.exports=function e(){for(var t,n,r=500,i={},a=0;a<arguments.length;a++){var c=arguments[a];if(c instanceof Error)r=(t=c).status||t.statusCode||r;else switch(typeof c){case"string":n=c;break;case"number":r=c,0!==a&&o("non-first-argument status code; replace with createError("+c+", ...)");break;case"object":i=c}}"number"==typeof r&&(r<400||r>=600)&&o("non-error status code; use only 4xx or 5xx status codes");("number"!=typeof r||!s[r]&&(r<400||r>=600))&&(r=500);var d=e[r]||e[u(r)];t||(t=d?new d(n):new Error(n||s[r]),Error.captureStackTrace(t,e));d&&t instanceof d&&t.status===r||(t.expose=r<500,t.status=t.statusCode=r);for(var l in i)"status"!==l&&"statusCode"!==l&&(t[l]=i[l]);return t},e.exports.HttpError=function(){function e(){throw new TypeError("cannot construct abstract class")}return a(e,Error),e}(),e.exports.isHttpError=(r=e.exports.HttpError,function(e){return!(!e||"object"!=typeof e)&&(e instanceof r||e instanceof Error&&"boolean"==typeof e.expose&&"number"==typeof e.statusCode&&e.status===e.statusCode)}),function(e,t,n){t.forEach((function(t){var r,o=c(s[t]);switch(u(t)){case 400:r=function(e,t,n){var r=l(t);function o(e){var t=null!=e?e:s[n],a=new Error(t);return Error.captureStackTrace(a,o),i(a,o.prototype),Object.defineProperty(a,"message",{enumerable:!0,configurable:!0,value:t,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:r,writable:!0}),a}return a(o,e),d(o,r),o.prototype.status=n,o.prototype.statusCode=n,o.prototype.expose=!0,o}(n,o,t);break;case 500:r=function(e,t,n){var r=l(t);function o(e){var t=null!=e?e:s[n],a=new Error(t);return Error.captureStackTrace(a,o),i(a,o.prototype),Object.defineProperty(a,"message",{enumerable:!0,configurable:!0,value:t,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:r,writable:!0}),a}return a(o,e),d(o,r),o.prototype.status=n,o.prototype.statusCode=n,o.prototype.expose=!1,o}(n,o,t)}r&&(e[t]=r,e[o]=r)})),e["I'mateapot"]=o.function(e.ImATeapot,'"I\'mateapot"; use "ImATeapot" instead')}(e.exports,s.codes,e.exports.HttpError)},17254:function(e){function t(e,t){if("function"!=typeof e)throw new TypeError("argument fn must be a function");return e}function n(e,t,n){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("argument obj must be object");var r=Object.getOwnPropertyDescriptor(e,t);if(!r)throw new TypeError("must call property on owner object");if(!r.configurable)throw new TypeError("property must be configurable")}e.exports=function(e){if(!e)throw new TypeError("argument namespace is required");function r(e){}return r._file=void 0,r._ignored=!0,r._namespace=e,r._traced=!1,r._warned=Object.create(null),r.function=t,r.property=n,r}},12823:function(e,t,n){var r=n(10798);function o(e){if("number"==typeof e){if(!o[e])throw new Error("invalid status code: "+e);return e}if("string"!=typeof e)throw new TypeError("code must be a number or string");var t=parseInt(e,10);if(!isNaN(t)){if(!o[t])throw new Error("invalid status code: "+t);return t}if(!(t=o[e.toLowerCase()]))throw new Error('invalid status message: "'+e+'"');return t}e.exports=o,o.STATUS_CODES=r,o.codes=function(e,t){var n=[];return Object.keys(t).forEach((function(r){var o=t[r],i=Number(r);e[i]=o,e[o]=i,e[o.toLowerCase()]=i,n.push(i)})),n}(o,r),o.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},o.empty={204:!0,205:!0,304:!0},o.retry={502:!0,503:!0,504:!0}},56527:function(e){e.exports=JSON.parse('{"schema":{"BadUTF16":{"name":"BadUTF16","subtypes":[],"props":{}},"BadUTF8":{"name":"BadUTF8","subtypes":[],"props":{}},"BalanceExceeded":{"name":"BalanceExceeded","subtypes":[],"props":{}},"BreakpointTrap":{"name":"BreakpointTrap","subtypes":[],"props":{}},"CacheError":{"name":"CacheError","subtypes":["ReadError","WriteError","DeserializationError","SerializationError"],"props":{}},"CallIndirectOOB":{"name":"CallIndirectOOB","subtypes":[],"props":{}},"CannotAppendActionToJointPromise":{"name":"CannotAppendActionToJointPromise","subtypes":[],"props":{}},"CannotReturnJointPromise":{"name":"CannotReturnJointPromise","subtypes":[],"props":{}},"CodeDoesNotExist":{"name":"CodeDoesNotExist","subtypes":[],"props":{"account_id":""}},"CompilationError":{"name":"CompilationError","subtypes":["CodeDoesNotExist","PrepareError","WasmerCompileError"],"props":{}},"ContractSizeExceeded":{"name":"ContractSizeExceeded","subtypes":[],"props":{"limit":"","size":""}},"Deprecated":{"name":"Deprecated","subtypes":[],"props":{"method_name":""}},"Deserialization":{"name":"Deserialization","subtypes":[],"props":{}},"DeserializationError":{"name":"DeserializationError","subtypes":[],"props":{}},"EmptyMethodName":{"name":"EmptyMethodName","subtypes":[],"props":{}},"FunctionCallError":{"name":"FunctionCallError","subtypes":["CompilationError","LinkError","MethodResolveError","WasmTrap","WasmUnknownError","HostError","EvmError"],"props":{}},"GasExceeded":{"name":"GasExceeded","subtypes":[],"props":{}},"GasInstrumentation":{"name":"GasInstrumentation","subtypes":[],"props":{}},"GasLimitExceeded":{"name":"GasLimitExceeded","subtypes":[],"props":{}},"GenericTrap":{"name":"GenericTrap","subtypes":[],"props":{}},"GuestPanic":{"name":"GuestPanic","subtypes":[],"props":{"panic_msg":""}},"HostError":{"name":"HostError","subtypes":["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated"],"props":{}},"IllegalArithmetic":{"name":"IllegalArithmetic","subtypes":[],"props":{}},"IncorrectCallIndirectSignature":{"name":"IncorrectCallIndirectSignature","subtypes":[],"props":{}},"Instantiate":{"name":"Instantiate","subtypes":[],"props":{}},"IntegerOverflow":{"name":"IntegerOverflow","subtypes":[],"props":{}},"InternalMemoryDeclared":{"name":"InternalMemoryDeclared","subtypes":[],"props":{}},"InvalidAccountId":{"name":"InvalidAccountId","subtypes":[],"props":{"account_id":""}},"InvalidIteratorIndex":{"name":"InvalidIteratorIndex","subtypes":[],"props":{"iterator_index":""}},"InvalidMethodName":{"name":"InvalidMethodName","subtypes":[],"props":{}},"InvalidPromiseIndex":{"name":"InvalidPromiseIndex","subtypes":[],"props":{"promise_idx":""}},"InvalidPromiseResultIndex":{"name":"InvalidPromiseResultIndex","subtypes":[],"props":{"result_idx":""}},"InvalidPublicKey":{"name":"InvalidPublicKey","subtypes":[],"props":{}},"InvalidReceiptIndex":{"name":"InvalidReceiptIndex","subtypes":[],"props":{"receipt_index":""}},"InvalidRegisterId":{"name":"InvalidRegisterId","subtypes":[],"props":{"register_id":""}},"IteratorWasInvalidated":{"name":"IteratorWasInvalidated","subtypes":[],"props":{"iterator_index":""}},"KeyLengthExceeded":{"name":"KeyLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"LinkError":{"name":"LinkError","subtypes":[],"props":{"msg":""}},"Memory":{"name":"Memory","subtypes":[],"props":{}},"MemoryAccessViolation":{"name":"MemoryAccessViolation","subtypes":[],"props":{}},"MemoryOutOfBounds":{"name":"MemoryOutOfBounds","subtypes":[],"props":{}},"MethodEmptyName":{"name":"MethodEmptyName","subtypes":[],"props":{}},"MethodInvalidSignature":{"name":"MethodInvalidSignature","subtypes":[],"props":{}},"MethodNotFound":{"name":"MethodNotFound","subtypes":[],"props":{}},"MethodResolveError":{"name":"MethodResolveError","subtypes":["MethodEmptyName","MethodUTF8Error","MethodNotFound","MethodInvalidSignature"],"props":{}},"MethodUTF8Error":{"name":"MethodUTF8Error","subtypes":[],"props":{}},"MisalignedAtomicAccess":{"name":"MisalignedAtomicAccess","subtypes":[],"props":{}},"NumberInputDataDependenciesExceeded":{"name":"NumberInputDataDependenciesExceeded","subtypes":[],"props":{"limit":"","number_of_input_data_dependencies":""}},"NumberOfLogsExceeded":{"name":"NumberOfLogsExceeded","subtypes":[],"props":{"limit":""}},"NumberPromisesExceeded":{"name":"NumberPromisesExceeded","subtypes":[],"props":{"limit":"","number_of_promises":""}},"PrepareError":{"name":"PrepareError","subtypes":["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory"],"props":{}},"ProhibitedInView":{"name":"ProhibitedInView","subtypes":[],"props":{"method_name":""}},"ReadError":{"name":"ReadError","subtypes":[],"props":{}},"ReturnedValueLengthExceeded":{"name":"ReturnedValueLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"Serialization":{"name":"Serialization","subtypes":[],"props":{}},"SerializationError":{"name":"SerializationError","subtypes":[],"props":{"hash":""}},"StackHeightInstrumentation":{"name":"StackHeightInstrumentation","subtypes":[],"props":{}},"StackOverflow":{"name":"StackOverflow","subtypes":[],"props":{}},"TotalLogLengthExceeded":{"name":"TotalLogLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"Unreachable":{"name":"Unreachable","subtypes":[],"props":{}},"ValueLengthExceeded":{"name":"ValueLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"WasmTrap":{"name":"WasmTrap","subtypes":["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","BreakpointTrap","StackOverflow","GenericTrap"],"props":{}},"WasmUnknownError":{"name":"WasmUnknownError","subtypes":[],"props":{}},"WasmerCompileError":{"name":"WasmerCompileError","subtypes":[],"props":{"msg":""}},"WriteError":{"name":"WriteError","subtypes":[],"props":{}},"AccessKeyNotFound":{"name":"AccessKeyNotFound","subtypes":[],"props":{"account_id":"","public_key":""}},"AccountAlreadyExists":{"name":"AccountAlreadyExists","subtypes":[],"props":{"account_id":""}},"AccountDoesNotExist":{"name":"AccountDoesNotExist","subtypes":[],"props":{"account_id":""}},"ActionError":{"name":"ActionError","subtypes":["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed"],"props":{"index":""}},"ActionsValidationError":{"name":"ActionsValidationError","subtypes":["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas"],"props":{}},"ActorNoPermission":{"name":"ActorNoPermission","subtypes":[],"props":{"account_id":"","actor_id":""}},"AddKeyAlreadyExists":{"name":"AddKeyAlreadyExists","subtypes":[],"props":{"account_id":"","public_key":""}},"AddKeyMethodNameLengthExceeded":{"name":"AddKeyMethodNameLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"AddKeyMethodNamesNumberOfBytesExceeded":{"name":"AddKeyMethodNamesNumberOfBytesExceeded","subtypes":[],"props":{"limit":"","total_number_of_bytes":""}},"BalanceMismatchError":{"name":"BalanceMismatchError","subtypes":[],"props":{"final_accounts_balance":"","final_postponed_receipts_balance":"","incoming_receipts_balance":"","incoming_validator_rewards":"","initial_accounts_balance":"","initial_postponed_receipts_balance":"","new_delayed_receipts_balance":"","other_burnt_amount":"","outgoing_receipts_balance":"","processed_delayed_receipts_balance":"","slashed_burnt_amount":"","tx_burnt_amount":""}},"CostOverflow":{"name":"CostOverflow","subtypes":[],"props":{}},"CreateAccountNotAllowed":{"name":"CreateAccountNotAllowed","subtypes":[],"props":{"account_id":"","predecessor_id":""}},"CreateAccountOnlyByRegistrar":{"name":"CreateAccountOnlyByRegistrar","subtypes":[],"props":{"account_id":"","predecessor_id":"","registrar_account_id":""}},"DeleteAccountStaking":{"name":"DeleteAccountStaking","subtypes":[],"props":{"account_id":""}},"DeleteActionMustBeFinal":{"name":"DeleteActionMustBeFinal","subtypes":[],"props":{}},"DeleteKeyDoesNotExist":{"name":"DeleteKeyDoesNotExist","subtypes":[],"props":{"account_id":"","public_key":""}},"DepositWithFunctionCall":{"name":"DepositWithFunctionCall","subtypes":[],"props":{}},"Expired":{"name":"Expired","subtypes":[],"props":{}},"FunctionCallArgumentsLengthExceeded":{"name":"FunctionCallArgumentsLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"FunctionCallMethodNameLengthExceeded":{"name":"FunctionCallMethodNameLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"FunctionCallZeroAttachedGas":{"name":"FunctionCallZeroAttachedGas","subtypes":[],"props":{}},"InsufficientStake":{"name":"InsufficientStake","subtypes":[],"props":{"account_id":"","minimum_stake":"","stake":""}},"InvalidAccessKeyError":{"name":"InvalidAccessKeyError","subtypes":["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],"props":{}},"InvalidChain":{"name":"InvalidChain","subtypes":[],"props":{}},"InvalidDataReceiverId":{"name":"InvalidDataReceiverId","subtypes":[],"props":{"account_id":""}},"InvalidNonce":{"name":"InvalidNonce","subtypes":[],"props":{"ak_nonce":"","tx_nonce":""}},"InvalidPredecessorId":{"name":"InvalidPredecessorId","subtypes":[],"props":{"account_id":""}},"InvalidReceiverId":{"name":"InvalidReceiverId","subtypes":[],"props":{"account_id":""}},"InvalidSignature":{"name":"InvalidSignature","subtypes":[],"props":{}},"InvalidSignerId":{"name":"InvalidSignerId","subtypes":[],"props":{"account_id":""}},"InvalidTxError":{"name":"InvalidTxError","subtypes":["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation"],"props":{}},"LackBalanceForState":{"name":"LackBalanceForState","subtypes":[],"props":{"account_id":"","amount":""}},"MethodNameMismatch":{"name":"MethodNameMismatch","subtypes":[],"props":{"method_name":""}},"NotEnoughAllowance":{"name":"NotEnoughAllowance","subtypes":[],"props":{"account_id":"","allowance":"","cost":"","public_key":""}},"NotEnoughBalance":{"name":"NotEnoughBalance","subtypes":[],"props":{"balance":"","cost":"","signer_id":""}},"OnlyImplicitAccountCreationAllowed":{"name":"OnlyImplicitAccountCreationAllowed","subtypes":[],"props":{"account_id":""}},"ReceiptValidationError":{"name":"ReceiptValidationError","subtypes":["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation"],"props":{}},"ReceiverMismatch":{"name":"ReceiverMismatch","subtypes":[],"props":{"ak_receiver":"","tx_receiver":""}},"RequiresFullAccess":{"name":"RequiresFullAccess","subtypes":[],"props":{}},"SignerDoesNotExist":{"name":"SignerDoesNotExist","subtypes":[],"props":{"signer_id":""}},"TotalNumberOfActionsExceeded":{"name":"TotalNumberOfActionsExceeded","subtypes":[],"props":{"limit":"","total_number_of_actions":""}},"TotalPrepaidGasExceeded":{"name":"TotalPrepaidGasExceeded","subtypes":[],"props":{"limit":"","total_prepaid_gas":""}},"TriesToStake":{"name":"TriesToStake","subtypes":[],"props":{"account_id":"","balance":"","locked":"","stake":""}},"TriesToUnstake":{"name":"TriesToUnstake","subtypes":[],"props":{"account_id":""}},"TxExecutionError":{"name":"TxExecutionError","subtypes":["ActionError","InvalidTxError"],"props":{}},"UnsuitableStakingKey":{"name":"UnsuitableStakingKey","subtypes":[],"props":{"public_key":""}},"Closed":{"name":"Closed","subtypes":[],"props":{}},"InternalError":{"name":"InternalError","subtypes":[],"props":{}},"ServerError":{"name":"ServerError","subtypes":["TxExecutionError","Timeout","Closed","InternalError"],"props":{}},"Timeout":{"name":"Timeout","subtypes":[],"props":{}}}}')},87930:function(e){e.exports=JSON.parse('{"GasLimitExceeded":"Exceeded the maximum amount of gas allowed to burn per contract","MethodEmptyName":"Method name is empty","WasmerCompileError":"Wasmer compilation error: {{msg}}","GuestPanic":"Smart contract panicked: {{panic_msg}}","Memory":"Error creating Wasm memory","GasExceeded":"Exceeded the prepaid gas","MethodUTF8Error":"Method name is not valid UTF8 string","BadUTF16":"String encoding is bad UTF-16 sequence","WasmTrap":"WebAssembly trap: {{msg}}","GasInstrumentation":"Gas instrumentation failed or contract has denied instructions.","InvalidPromiseIndex":"{{promise_idx}} does not correspond to existing promises","InvalidPromiseResultIndex":"Accessed invalid promise result index: {{result_idx}}","Deserialization":"Error happened while deserializing the module","MethodNotFound":"Contract method is not found","InvalidRegisterId":"Accessed invalid register id: {{register_id}}","InvalidReceiptIndex":"VM Logic returned an invalid receipt index: {{receipt_index}}","EmptyMethodName":"Method name is empty in contract call","CannotReturnJointPromise":"Returning joint promise is currently prohibited","StackHeightInstrumentation":"Stack instrumentation failed","CodeDoesNotExist":"Cannot find contract code for account {{account_id}}","MethodInvalidSignature":"Invalid method signature","IntegerOverflow":"Integer overflow happened during contract execution","MemoryAccessViolation":"MemoryAccessViolation","InvalidIteratorIndex":"Iterator index {{iterator_index}} does not exist","IteratorWasInvalidated":"Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie","InvalidAccountId":"VM Logic returned an invalid account id","Serialization":"Error happened while serializing the module","CannotAppendActionToJointPromise":"Actions can only be appended to non-joint promise.","InternalMemoryDeclared":"Internal memory declaration has been found in the module","Instantiate":"Error happened during instantiation","ProhibitedInView":"{{method_name}} is not allowed in view calls","InvalidMethodName":"VM Logic returned an invalid method name","BadUTF8":"String encoding is bad UTF-8 sequence","BalanceExceeded":"Exceeded the account balance","LinkError":"Wasm contract link error: {{msg}}","InvalidPublicKey":"VM Logic provided an invalid public key","ActorNoPermission":"Actor {{actor_id}} doesn\'t have permission to account {{account_id}} to complete the action","LackBalanceForState":"The account {{account_id}} wouldn\'t have enough balance to cover storage, required to have {{amount}} yoctoNEAR more","ReceiverMismatch":"Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.","CostOverflow":"Transaction gas or balance cost is too high","InvalidSignature":"Transaction is not signed with the given public key","AccessKeyNotFound":"Signer \\"{{account_id}}\\" doesn\'t have access key with the given public_key {{public_key}}","NotEnoughBalance":"Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}","NotEnoughAllowance":"Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}","Expired":"Transaction has expired","DeleteAccountStaking":"Account {{account_id}} is staking and can not be deleted","SignerDoesNotExist":"Signer {{signer_id}} does not exist","TriesToStake":"Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}","AddKeyAlreadyExists":"The public key {{public_key}} is already used for an existing access key","InvalidSigner":"Invalid signer account ID {{signer_id}} according to requirements","CreateAccountNotAllowed":"The new account_id {{account_id}} can\'t be created by {{predecessor_id}}","RequiresFullAccess":"The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key","TriesToUnstake":"Account {{account_id}} is not yet staked, but tried to unstake","InvalidNonce":"Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}","AccountAlreadyExists":"Can\'t create a new account {{account_id}}, because it already exists","InvalidChain":"Transaction parent block hash doesn\'t belong to the current chain","AccountDoesNotExist":"Can\'t complete the action because account {{account_id}} doesn\'t exist","MethodNameMismatch":"Transaction method name {{method_name}} isn\'t allowed by the access key","DeleteAccountHasRent":"Account {{account_id}} can\'t be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent","DeleteAccountHasEnoughBalance":"Account {{account_id}} can\'t be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it\'s storage","InvalidReceiver":"Invalid receiver account ID {{receiver_id}} according to requirements","DeleteKeyDoesNotExist":"Account {{account_id}} tries to remove an access key that doesn\'t exist","Timeout":"Timeout exceeded","Closed":"Connection closed"}')},10798:function(e){e.exports=JSON.parse('{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","306":"(Unused)","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I\'m a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Unordered Collection","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}')}}]);