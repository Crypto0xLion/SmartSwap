(self.webpackChunksmardex_web=self.webpackChunksmardex_web||[]).push([[9177],{58162:function(e,t,r){"use strict";var n=r(89509).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==t[o])throw new TypeError(s+" is ambiguous");t[o]=i}var a=e.length,f=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function c(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var r=0,i=0,s=0;e[r]===f;)i++,r++;for(var o=(e.length-r)*u+1>>>0,h=new Uint8Array(o);e[r];){var c=t[e.charCodeAt(r)];if(255===c)return;for(var l=0,p=o-1;(0!==c||l<s)&&-1!==p;p--,l++)c+=a*h[p]>>>0,h[p]=c%256>>>0,c=c/256>>>0;if(0!==c)throw new Error("Non-zero carry");s=l,r++}for(var d=o-s;d!==o&&0===h[d];)d++;var g=n.allocUnsafe(i+(o-d));g.fill(0,0,i);for(var b=i;d!==o;)g[b++]=h[d++];return g}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,i=0,s=0,o=t.length;s!==o&&0===t[s];)s++,r++;for(var u=(o-s)*h+1>>>0,c=new Uint8Array(u);s!==o;){for(var l=t[s],p=0,d=u-1;(0!==l||p<i)&&-1!==d;d--,p++)l+=256*c[d]>>>0,c[d]=l%a>>>0,l=l/a>>>0;if(0!==l)throw new Error("Non-zero carry");i=p,s++}for(var g=u-i;g!==u&&0===c[g];)g++;for(var b=f.repeat(r);g<u;++g)b+=e.charAt(c[g]);return b},decodeUnsafe:c,decode:function(e){var t=c(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}},79742:function(e,t){"use strict";t.byteLength=function(e){var t=a(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,s=a(e),o=s[0],f=s[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,o,f)),h=0,c=f>0?o-4:o;for(r=0;r<c;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[h++]=t>>16&255,u[h++]=t>>8&255,u[h++]=255&t;2===f&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[h++]=255&t);1===f&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[h++]=t>>8&255,u[h++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=16383,a=0,u=n-i;a<u;a+=o)s.push(f(e,a,a+o>u?u:a+o));1===i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function f(e,t,n){for(var i,s,o=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},92882:function(e){"use strict";for(var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",r={},n=0;n<32;n++){var i=t.charAt(n);if(void 0!==r[i])throw new TypeError(i+" is ambiguous");r[i]=n}function s(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function o(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=s(t)^n>>5}for(t=s(t),r=0;r<e.length;++r){var i=e.charCodeAt(r);t=s(t)^31&i}return t}function a(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var n=e.toLowerCase(),i=e.toUpperCase();if(e!==n&&e!==i)return"Mixed-case string "+e;var a=(e=n).lastIndexOf("1");if(-1===a)return"No separator character for "+e;if(0===a)return"Missing prefix for "+e;var f=e.slice(0,a),u=e.slice(a+1);if(u.length<6)return"Data too short";var h=o(f);if("string"==typeof h)return h;for(var c=[],l=0;l<u.length;++l){var p=u.charAt(l),d=r[p];if(void 0===d)return"Unknown character "+p;h=s(h)^d,l+6>=u.length||c.push(d)}return 1!==h?"Invalid checksum for "+e:{prefix:f,words:c}}function f(e,t,r,n){for(var i=0,s=0,o=(1<<r)-1,a=[],f=0;f<e.length;++f)for(i=i<<t|e[f],s+=t;s>=r;)s-=r,a.push(i>>s&o);if(n)s>0&&a.push(i<<r-s&o);else{if(s>=t)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return a}e.exports={decodeUnsafe:function(){var e=a.apply(null,arguments);if("object"==typeof e)return e},decode:function(e){var t=a.apply(null,arguments);if("object"==typeof t)return t;throw new Error(t)},encode:function(e,r,n){if(n=n||90,e.length+7+r.length>n)throw new TypeError("Exceeds length limit");var i=o(e=e.toLowerCase());if("string"==typeof i)throw new Error(i);for(var a=e+"1",f=0;f<r.length;++f){var u=r[f];if(u>>5!=0)throw new Error("Non 5-bit word");i=s(i)^u,a+=t.charAt(u)}for(f=0;f<6;++f)i=s(i);for(i^=1,f=0;f<6;++f){a+=t.charAt(i>>5*(5-f)&31)}return a},toWordsUnsafe:function(e){var t=f(e,8,5,!0);if(Array.isArray(t))return t},toWords:function(e){var t=f(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},fromWordsUnsafe:function(e){var t=f(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function(e){var t=f(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}}},93302:function(e,t,r){var n;!function(i){"use strict";var s,o=1e6,a=1e6,f="[big.js] ",u=f+"Invalid ",h=u+"decimal places",c=u+"rounding mode",l=f+"Division by zero",p={},d=void 0,g=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function b(e,t,r,n){var i=e.c,s=e.e+t+1;if(s<i.length){if(1===r)n=i[s]>=5;else if(2===r)n=i[s]>5||5==i[s]&&(n||s<0||i[s+1]!==d||1&i[s-1]);else if(3===r)n=n||!!i[0];else if(n=!1,0!==r)throw Error(c);if(s<1)i.length=1,n?(e.e=-t,i[0]=1):i[0]=e.e=0;else{if(i.length=s--,n)for(;++i[s]>9;)i[s]=0,s--||(++e.e,i.unshift(1));for(s=i.length;!i[--s];)i.pop()}}else if(r<0||r>3||r!==~~r)throw Error(c);return e}function w(e,t,r,n){var i,s,a=e.constructor,f=!e.c[0];if(r!==d){if(r!==~~r||r<(3==t)||r>o)throw Error(3==t?u+"precision":h);for(r=n-(e=new a(e)).e,e.c.length>++n&&b(e,r,a.RM),2==t&&(n=e.e+r+1);e.c.length<n;)e.c.push(0)}if(i=e.e,r=(s=e.c.join("")).length,2!=t&&(1==t||3==t&&n<=i||i<=a.NE||i>=a.PE))s=s.charAt(0)+(r>1?"."+s.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)s="0"+s;s="0."+s}else if(i>0)if(++i>r)for(i-=r;i--;)s+="0";else i<r&&(s=s.slice(0,i)+"."+s.slice(i));else r>1&&(s=s.charAt(0)+"."+s.slice(1));return e.s<0&&(!f||4==t)?"-"+s:s}p.abs=function(){var e=new this.constructor(this);return e.s=1,e},p.cmp=function(e){var t,r=this,n=r.c,i=(e=new r.constructor(e)).c,s=r.s,o=e.s,a=r.e,f=e.e;if(!n[0]||!i[0])return n[0]?s:i[0]?-o:0;if(s!=o)return s;if(t=s<0,a!=f)return a>f^t?1:-1;for(o=(a=n.length)<(f=i.length)?a:f,s=-1;++s<o;)if(n[s]!=i[s])return n[s]>i[s]^t?1:-1;return a==f?0:a>f^t?1:-1},p.div=function(e){var t=this,r=t.constructor,n=t.c,i=(e=new r(e)).c,s=t.s==e.s?1:-1,a=r.DP;if(a!==~~a||a<0||a>o)throw Error(h);if(!i[0])throw Error(l);if(!n[0])return new r(0*s);var f,u,c,p,g,w=i.slice(),v=f=i.length,$=n.length,m=n.slice(0,f),C=m.length,y=e,N=y.c=[],E=0,x=a+(y.e=t.e-e.e)+1;for(y.s=s,s=x<0?0:x,w.unshift(0);C++<f;)m.push(0);do{for(c=0;c<10;c++){if(f!=(C=m.length))p=f>C?1:-1;else for(g=-1,p=0;++g<f;)if(i[g]!=m[g]){p=i[g]>m[g]?1:-1;break}if(!(p<0))break;for(u=C==f?i:w;C;){if(m[--C]<u[C]){for(g=C;g&&!m[--g];)m[g]=9;--m[g],m[C]+=10}m[C]-=u[C]}for(;!m[0];)m.shift()}N[E++]=p?c:++c,m[0]&&p?m[C]=n[v]||0:m=[n[v]]}while((v++<$||m[0]!==d)&&s--);return N[0]||1==E||(N.shift(),y.e--),E>x&&b(y,a,r.RM,m[0]!==d),y},p.eq=function(e){return!this.cmp(e)},p.gt=function(e){return this.cmp(e)>0},p.gte=function(e){return this.cmp(e)>-1},p.lt=function(e){return this.cmp(e)<0},p.lte=function(e){return this.cmp(e)<1},p.minus=p.sub=function(e){var t,r,n,i,s=this,o=s.constructor,a=s.s,f=(e=new o(e)).s;if(a!=f)return e.s=-f,s.plus(e);var u=s.c.slice(),h=s.e,c=e.c,l=e.e;if(!u[0]||!c[0])return c[0]?(e.s=-f,e):new o(u[0]?s:0);if(a=h-l){for((i=a<0)?(a=-a,n=u):(l=h,n=c),n.reverse(),f=a;f--;)n.push(0);n.reverse()}else for(r=((i=u.length<c.length)?u:c).length,a=f=0;f<r;f++)if(u[f]!=c[f]){i=u[f]<c[f];break}if(i&&(n=u,u=c,c=n,e.s=-e.s),(f=(r=c.length)-(t=u.length))>0)for(;f--;)u[t++]=0;for(f=t;r>a;){if(u[--r]<c[r]){for(t=r;t&&!u[--t];)u[t]=9;--u[t],u[r]+=10}u[r]-=c[r]}for(;0===u[--f];)u.pop();for(;0===u[0];)u.shift(),--l;return u[0]||(e.s=1,u=[l=0]),e.c=u,e.e=l,e},p.mod=function(e){var t,r=this,n=r.constructor,i=r.s,s=(e=new n(e)).s;if(!e.c[0])throw Error(l);return r.s=e.s=1,t=1==e.cmp(r),r.s=i,e.s=s,t?new n(r):(i=n.DP,s=n.RM,n.DP=n.RM=0,r=r.div(e),n.DP=i,n.RM=s,this.minus(r.times(e)))},p.plus=p.add=function(e){var t,r=this,n=r.constructor,i=r.s,s=(e=new n(e)).s;if(i!=s)return e.s=-s,r.minus(e);var o=r.e,a=r.c,f=e.e,u=e.c;if(!a[0]||!u[0])return u[0]?e:new n(a[0]?r:0*i);if(a=a.slice(),i=o-f){for(i>0?(f=o,t=u):(i=-i,t=a),t.reverse();i--;)t.push(0);t.reverse()}for(a.length-u.length<0&&(t=u,u=a,a=t),i=u.length,s=0;i;a[i]%=10)s=(a[--i]=a[i]+u[i]+s)/10|0;for(s&&(a.unshift(s),++f),i=a.length;0===a[--i];)a.pop();return e.c=a,e.e=f,e},p.pow=function(e){var t=this,r=new t.constructor(1),n=r,i=e<0;if(e!==~~e||e<-1e6||e>a)throw Error(u+"exponent");for(i&&(e=-e);1&e&&(n=n.times(t)),e>>=1;)t=t.times(t);return i?r.div(n):n},p.round=function(e,t){var r=this.constructor;if(e===d)e=0;else if(e!==~~e||e<-o||e>o)throw Error(h);return b(new r(this),e,t===d?r.RM:t)},p.sqrt=function(){var e,t,r,n=this,i=n.constructor,s=n.s,o=n.e,a=new i(.5);if(!n.c[0])return new i(n);if(s<0)throw Error(f+"No square root");0===(s=Math.sqrt(n+""))||s===1/0?((t=n.c.join("")).length+o&1||(t+="0"),o=((o+1)/2|0)-(o<0||1&o),e=new i(((s=Math.sqrt(t))==1/0?"1e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+o)):e=new i(s),o=e.e+(i.DP+=4);do{r=e,e=a.times(r.plus(n.div(r)))}while(r.c.slice(0,o).join("")!==e.c.slice(0,o).join(""));return b(e,i.DP-=4,i.RM)},p.times=p.mul=function(e){var t,r=this,n=r.constructor,i=r.c,s=(e=new n(e)).c,o=i.length,a=s.length,f=r.e,u=e.e;if(e.s=r.s==e.s?1:-1,!i[0]||!s[0])return new n(0*e.s);for(e.e=f+u,o<a&&(t=i,i=s,s=t,u=o,o=a,a=u),t=new Array(u=o+a);u--;)t[u]=0;for(f=a;f--;){for(a=0,u=o+f;u>f;)a=t[u]+s[f]*i[u-f-1]+a,t[u--]=a%10,a=a/10|0;t[u]=(t[u]+a)%10}for(a?++e.e:t.shift(),f=t.length;!t[--f];)t.pop();return e.c=t,e},p.toExponential=function(e){return w(this,1,e,e)},p.toFixed=function(e){return w(this,2,e,this.e+e)},p.toPrecision=function(e){return w(this,3,e,e-1)},p.toString=function(){return w(this)},p.valueOf=p.toJSON=function(){return w(this,4)},s=function e(){function t(r){var n=this;if(!(n instanceof t))return r===d?e():new t(r);r instanceof t?(n.s=r.s,n.e=r.e,n.c=r.c.slice()):function(e,t){var r,n,i;if(0===t&&1/t<0)t="-0";else if(!g.test(t+=""))throw Error(u+"number");e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(r=t.indexOf("."))>-1&&(t=t.replace(".",""));(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length);for(i=t.length,n=0;n<i&&"0"==t.charAt(n);)++n;if(n==i)e.c=[e.e=0];else{for(;i>0&&"0"==t.charAt(--i););for(e.e=r-n-1,e.c=[],r=0;n<=i;)e.c[r++]=+t.charAt(n++)}}(n,r),n.constructor=t}return t.prototype=p,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.version="5.2.2",t}(),s.default=s.Big=s,void 0===(n=function(){return s}.call(t,r,t,e))||(e.exports=n)}()},40475:function(e,t){"use strict";t.oU=function(e){{const t=Buffer.from(e);t.reverse();const r=t.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}},t.k$=function(e,t){{const r=e.toString(16),n=Buffer.from(r.padStart(2*t,"0").slice(0,2*t),"hex");return n.reverse(),n}}},44431:function(e,t,r){var n;!function(i){"use strict";var s,o=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,f=Math.floor,u="[BigNumber Error] ",h=u+"Number primitive has more than 15 significant digits: ",c=1e14,l=14,p=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],g=1e7,b=1e9;function w(e){var t=0|e;return e>0||e===t?t:t-1}function v(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=l-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function $(e,t){var r,n,i=e.c,s=t.c,o=e.s,a=t.s,f=e.e,u=t.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=f==u,!i||!s)return n?0:!i^r?1:-1;if(!n)return f>u^r?1:-1;for(a=(f=i.length)<(u=s.length)?f:u,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return f==u?0:f>u^r?1:-1}function m(e,t,r,n){if(e<t||e>r||e!==f(e))throw Error(u+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function C(e){var t=e.c.length-1;return w(e.e/l)==t&&e.c[t]%2!=0}function y(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function N(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}s=function e(t){var r,n,i,s,E,x,A,V,O,U,k=z.prototype={constructor:z,toString:null,valueOf:null},P=new z(1),T=20,I=4,S=-7,R=21,B=-1e7,D=1e7,M=!1,j=1,F=0,_={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},L="0123456789abcdefghijklmnopqrstuvwxyz",q=!0;function z(e,t){var r,s,a,u,c,d,g,b,w=this;if(!(w instanceof z))return new z(e,t);if(null==t){if(e&&!0===e._isBigNumber)return w.s=e.s,void(!e.c||e.e>D?w.c=w.e=null:e.e<B?w.c=[w.e=0]:(w.e=e.e,w.c=e.c.slice()));if((d="number"==typeof e)&&0*e==0){if(w.s=1/e<0?(e=-e,-1):1,e===~~e){for(u=0,c=e;c>=10;c/=10,u++);return void(u>D?w.c=w.e=null:(w.e=u,w.c=[e]))}b=String(e)}else{if(!o.test(b=String(e)))return i(w,b,d);w.s=45==b.charCodeAt(0)?(b=b.slice(1),-1):1}(u=b.indexOf("."))>-1&&(b=b.replace(".","")),(c=b.search(/e/i))>0?(u<0&&(u=c),u+=+b.slice(c+1),b=b.substring(0,c)):u<0&&(u=b.length)}else{if(m(t,2,L.length,"Base"),10==t&&q)return J(w=new z(e),T+w.e+1,I);if(b=String(e),d="number"==typeof e){if(0*e!=0)return i(w,b,d,t);if(w.s=1/e<0?(b=b.slice(1),-1):1,z.DEBUG&&b.replace(/^0\.0*|\./,"").length>15)throw Error(h+e)}else w.s=45===b.charCodeAt(0)?(b=b.slice(1),-1):1;for(r=L.slice(0,t),u=c=0,g=b.length;c<g;c++)if(r.indexOf(s=b.charAt(c))<0){if("."==s){if(c>u){u=g;continue}}else if(!a&&(b==b.toUpperCase()&&(b=b.toLowerCase())||b==b.toLowerCase()&&(b=b.toUpperCase()))){a=!0,c=-1,u=0;continue}return i(w,String(e),d,t)}d=!1,(u=(b=n(b,t,10,w.s)).indexOf("."))>-1?b=b.replace(".",""):u=b.length}for(c=0;48===b.charCodeAt(c);c++);for(g=b.length;48===b.charCodeAt(--g););if(b=b.slice(c,++g)){if(g-=c,d&&z.DEBUG&&g>15&&(e>p||e!==f(e)))throw Error(h+w.s*e);if((u=u-c-1)>D)w.c=w.e=null;else if(u<B)w.c=[w.e=0];else{if(w.e=u,w.c=[],c=(u+1)%l,u<0&&(c+=l),c<g){for(c&&w.c.push(+b.slice(0,c)),g-=l;c<g;)w.c.push(+b.slice(c,c+=l));c=l-(b=b.slice(c)).length}else c-=g;for(;c--;b+="0");w.c.push(+b)}}else w.c=[w.e=0]}function G(e,t,r,n){var i,s,o,a,f;if(null==r?r=I:m(r,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)f=v(e.c),f=1==n||2==n&&(o<=S||o>=R)?y(f,o):N(f,o,"0");else if(s=(e=J(new z(e),t,r)).e,a=(f=v(e.c)).length,1==n||2==n&&(t<=s||s<=S)){for(;a<t;f+="0",a++);f=y(f,s)}else if(t-=o,f=N(f,s,"0"),s+1>a){if(--t>0)for(f+=".";t--;f+="0");}else if((t+=s-a)>0)for(s+1==a&&(f+=".");t--;f+="0");return e.s<0&&i?"-"+f:f}function W(e,t){for(var r,n=1,i=new z(e[0]);n<e.length;n++){if(!(r=new z(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function H(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*l-1)>D?e.c=e.e=null:r<B?e.c=[e.e=0]:(e.e=r,e.c=t),e}function J(e,t,r,n){var i,s,o,u,h,p,g,b=e.c,w=d;if(b){e:{for(i=1,u=b[0];u>=10;u/=10,i++);if((s=t-i)<0)s+=l,o=t,g=(h=b[p=0])/w[i-o-1]%10|0;else if((p=a((s+1)/l))>=b.length){if(!n)break e;for(;b.length<=p;b.push(0));h=g=0,i=1,o=(s%=l)-l+1}else{for(h=u=b[p],i=1;u>=10;u/=10,i++);g=(o=(s%=l)-l+i)<0?0:h/w[i-o-1]%10|0}if(n=n||t<0||null!=b[p+1]||(o<0?h:h%w[i-o-1]),n=r<4?(g||n)&&(0==r||r==(e.s<0?3:2)):g>5||5==g&&(4==r||n||6==r&&(s>0?o>0?h/w[i-o]:0:b[p-1])%10&1||r==(e.s<0?8:7)),t<1||!b[0])return b.length=0,n?(t-=e.e+1,b[0]=w[(l-t%l)%l],e.e=-t||0):b[0]=e.e=0,e;if(0==s?(b.length=p,u=1,p--):(b.length=p+1,u=w[l-s],b[p]=o>0?f(h/w[i-o]%w[o])*u:0),n)for(;;){if(0==p){for(s=1,o=b[0];o>=10;o/=10,s++);for(o=b[0]+=u,u=1;o>=10;o/=10,u++);s!=u&&(e.e++,b[0]==c&&(b[0]=1));break}if(b[p]+=u,b[p]!=c)break;b[p--]=0,u=1}for(s=b.length;0===b[--s];b.pop());}e.e>D?e.c=e.e=null:e.e<B&&(e.c=[e.e=0])}return e}function X(e){var t,r=e.e;return null===r?e.toString():(t=v(e.c),t=r<=S||r>=R?y(t,r):N(t,r,"0"),e.s<0?"-"+t:t)}return z.clone=e,z.ROUND_UP=0,z.ROUND_DOWN=1,z.ROUND_CEIL=2,z.ROUND_FLOOR=3,z.ROUND_HALF_UP=4,z.ROUND_HALF_DOWN=5,z.ROUND_HALF_EVEN=6,z.ROUND_HALF_CEIL=7,z.ROUND_HALF_FLOOR=8,z.EUCLID=9,z.config=z.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(u+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(m(r=e[t],0,b,t),T=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(m(r=e[t],0,8,t),I=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(m(r[0],-b,0,t),m(r[1],0,b,t),S=r[0],R=r[1]):(m(r,-b,b,t),S=-(R=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)m(r[0],-b,-1,t),m(r[1],1,b,t),B=r[0],D=r[1];else{if(m(r,-b,b,t),!r)throw Error(u+t+" cannot be zero: "+r);B=-(D=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(u+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw M=!r,Error(u+"crypto unavailable");M=r}else M=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(m(r=e[t],0,9,t),j=r),e.hasOwnProperty(t="POW_PRECISION")&&(m(r=e[t],0,b,t),F=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(u+t+" not an object: "+r);_=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(u+t+" invalid: "+r);q="0123456789"==r.slice(0,10),L=r}}return{DECIMAL_PLACES:T,ROUNDING_MODE:I,EXPONENTIAL_AT:[S,R],RANGE:[B,D],CRYPTO:M,MODULO_MODE:j,POW_PRECISION:F,FORMAT:_,ALPHABET:L}},z.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!z.DEBUG)return!0;var t,r,n=e.c,i=e.e,s=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===s||-1===s)&&i>=-b&&i<=b&&i===f(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%l)<1&&(t+=l),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=c||r!==f(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(u+"Invalid BigNumber: "+e)},z.maximum=z.max=function(){return W(arguments,k.lt)},z.minimum=z.min=function(){return W(arguments,k.gt)},z.random=(s=9007199254740992,E=Math.random()*s&2097151?function(){return f(Math.random()*s)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,i,s,o=0,h=[],c=new z(P);if(null==e?e=T:m(e,0,b),i=a(e/l),M)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));o<i;)(s=131072*t[o]+(t[o+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[o]=r[0],t[o+1]=r[1]):(h.push(s%1e14),o+=2);o=i/2}else{if(!crypto.randomBytes)throw M=!1,Error(u+"crypto unavailable");for(t=crypto.randomBytes(i*=7);o<i;)(s=281474976710656*(31&t[o])+1099511627776*t[o+1]+4294967296*t[o+2]+16777216*t[o+3]+(t[o+4]<<16)+(t[o+5]<<8)+t[o+6])>=9e15?crypto.randomBytes(7).copy(t,o):(h.push(s%1e14),o+=7);o=i/7}if(!M)for(;o<i;)(s=E())<9e15&&(h[o++]=s%1e14);for(i=h[--o],e%=l,i&&e&&(s=d[l-e],h[o]=f(i/s)*s);0===h[o];h.pop(),o--);if(o<0)h=[n=0];else{for(n=-1;0===h[0];h.splice(0,1),n-=l);for(o=1,s=h[0];s>=10;s/=10,o++);o<l&&(n-=l-o)}return c.e=n,c.c=h,c}),z.sum=function(){for(var e=1,t=arguments,r=new z(t[0]);e<t.length;)r=r.plus(t[e++]);return r},n=function(){var e="0123456789";function t(e,t,r,n){for(var i,s,o=[0],a=0,f=e.length;a<f;){for(s=o.length;s--;o[s]*=t);for(o[0]+=n.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(n,i,s,o,a){var f,u,h,c,l,p,d,g,b=n.indexOf("."),w=T,$=I;for(b>=0&&(c=F,F=0,n=n.replace(".",""),p=(g=new z(i)).pow(n.length-b),F=c,g.c=t(N(v(p.c),p.e,"0"),10,s,e),g.e=g.c.length),h=c=(d=t(n,i,s,a?(f=L,e):(f=e,L))).length;0==d[--c];d.pop());if(!d[0])return f.charAt(0);if(b<0?--h:(p.c=d,p.e=h,p.s=o,d=(p=r(p,g,w,$,s)).c,l=p.r,h=p.e),b=d[u=h+w+1],c=s/2,l=l||u<0||null!=d[u+1],l=$<4?(null!=b||l)&&(0==$||$==(p.s<0?3:2)):b>c||b==c&&(4==$||l||6==$&&1&d[u-1]||$==(p.s<0?8:7)),u<1||!d[0])n=l?N(f.charAt(1),-w,f.charAt(0)):f.charAt(0);else{if(d.length=u,l)for(--s;++d[--u]>s;)d[u]=0,u||(++h,d=[1].concat(d));for(c=d.length;!d[--c];);for(b=0,n="";b<=c;n+=f.charAt(d[b++]));n=N(n,h,f.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,s,o,a=0,f=e.length,u=t%g,h=t/g|0;for(e=e.slice();f--;)a=((i=u*(s=e[f]%g)+(n=h*s+(o=e[f]/g|0)*u)%g*g+a)/r|0)+(n/g|0)+h*o,e[f]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,s,o,a){var u,h,p,d,g,b,v,$,m,C,y,N,E,x,A,V,O,U=n.s==i.s?1:-1,k=n.c,P=i.c;if(!(k&&k[0]&&P&&P[0]))return new z(n.s&&i.s&&(k?!P||k[0]!=P[0]:P)?k&&0==k[0]||!P?0*U:U/0:NaN);for(m=($=new z(U)).c=[],U=s+(h=n.e-i.e)+1,a||(a=c,h=w(n.e/l)-w(i.e/l),U=U/l|0),p=0;P[p]==(k[p]||0);p++);if(P[p]>(k[p]||0)&&h--,U<0)m.push(1),d=!0;else{for(x=k.length,V=P.length,p=0,U+=2,(g=f(a/(P[0]+1)))>1&&(P=e(P,g,a),k=e(k,g,a),V=P.length,x=k.length),E=V,y=(C=k.slice(0,V)).length;y<V;C[y++]=0);O=P.slice(),O=[0].concat(O),A=P[0],P[1]>=a/2&&A++;do{if(g=0,(u=t(P,C,V,y))<0){if(N=C[0],V!=y&&(N=N*a+(C[1]||0)),(g=f(N/A))>1)for(g>=a&&(g=a-1),v=(b=e(P,g,a)).length,y=C.length;1==t(b,C,v,y);)g--,r(b,V<v?O:P,v,a),v=b.length,u=1;else 0==g&&(u=g=1),v=(b=P.slice()).length;if(v<y&&(b=[0].concat(b)),r(C,b,y,a),y=C.length,-1==u)for(;t(P,C,V,y)<1;)g++,r(C,V<y?O:P,y,a),y=C.length}else 0===u&&(g++,C=[0]);m[p++]=g,C[0]?C[y++]=k[E]||0:(C=[k[E]],y=1)}while((E++<x||null!=C[0])&&U--);d=null!=C[0],m[0]||m.splice(0,1)}if(a==c){for(p=1,U=m[0];U>=10;U/=10,p++);J($,s+($.e=p+h*l-1)+1,o,d)}else $.e=h,$.r=+d;return $}}(),x=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,V=/^\.([^.]+)$/,O=/^-?(Infinity|NaN)$/,U=/^\s*\+(?=[\w.])|^\s+|\s+$/g,i=function(e,t,r,n){var i,s=r?t:t.replace(U,"");if(O.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(x,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,s=s.replace(A,"$1").replace(V,"0.$1")),t!=s))return new z(s,i);if(z.DEBUG)throw Error(u+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},k.absoluteValue=k.abs=function(){var e=new z(this);return e.s<0&&(e.s=1),e},k.comparedTo=function(e,t){return $(this,new z(e,t))},k.decimalPlaces=k.dp=function(e,t){var r,n,i,s=this;if(null!=e)return m(e,0,b),null==t?t=I:m(t,0,8),J(new z(s),e+s.e+1,t);if(!(r=s.c))return null;if(n=((i=r.length-1)-w(this.e/l))*l,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},k.dividedBy=k.div=function(e,t){return r(this,new z(e,t),T,I)},k.dividedToIntegerBy=k.idiv=function(e,t){return r(this,new z(e,t),0,1)},k.exponentiatedBy=k.pow=function(e,t){var r,n,i,s,o,h,c,p,d=this;if((e=new z(e)).c&&!e.isInteger())throw Error(u+"Exponent not an integer: "+X(e));if(null!=t&&(t=new z(t)),o=e.e>14,!d.c||!d.c[0]||1==d.c[0]&&!d.e&&1==d.c.length||!e.c||!e.c[0])return p=new z(Math.pow(+X(d),o?e.s*(2-C(e)):+X(e))),t?p.mod(t):p;if(h=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new z(NaN);(n=!h&&d.isInteger()&&t.isInteger())&&(d=d.mod(t))}else{if(e.e>9&&(d.e>0||d.e<-1||(0==d.e?d.c[0]>1||o&&d.c[1]>=24e7:d.c[0]<8e13||o&&d.c[0]<=9999975e7)))return s=d.s<0&&C(e)?-0:0,d.e>-1&&(s=1/s),new z(h?1/s:s);F&&(s=a(F/l+2))}for(o?(r=new z(.5),h&&(e.s=1),c=C(e)):c=(i=Math.abs(+X(e)))%2,p=new z(P);;){if(c){if(!(p=p.times(d)).c)break;s?p.c.length>s&&(p.c.length=s):n&&(p=p.mod(t))}if(i){if(0===(i=f(i/2)))break;c=i%2}else if(J(e=e.times(r),e.e+1,1),e.e>14)c=C(e);else{if(0===(i=+X(e)))break;c=i%2}d=d.times(d),s?d.c&&d.c.length>s&&(d.c.length=s):n&&(d=d.mod(t))}return n?p:(h&&(p=P.div(p)),t?p.mod(t):s?J(p,F,I,undefined):p)},k.integerValue=function(e){var t=new z(this);return null==e?e=I:m(e,0,8),J(t,t.e+1,e)},k.isEqualTo=k.eq=function(e,t){return 0===$(this,new z(e,t))},k.isFinite=function(){return!!this.c},k.isGreaterThan=k.gt=function(e,t){return $(this,new z(e,t))>0},k.isGreaterThanOrEqualTo=k.gte=function(e,t){return 1===(t=$(this,new z(e,t)))||0===t},k.isInteger=function(){return!!this.c&&w(this.e/l)>this.c.length-2},k.isLessThan=k.lt=function(e,t){return $(this,new z(e,t))<0},k.isLessThanOrEqualTo=k.lte=function(e,t){return-1===(t=$(this,new z(e,t)))||0===t},k.isNaN=function(){return!this.s},k.isNegative=function(){return this.s<0},k.isPositive=function(){return this.s>0},k.isZero=function(){return!!this.c&&0==this.c[0]},k.minus=function(e,t){var r,n,i,s,o=this,a=o.s;if(t=(e=new z(e,t)).s,!a||!t)return new z(NaN);if(a!=t)return e.s=-t,o.plus(e);var f=o.e/l,u=e.e/l,h=o.c,p=e.c;if(!f||!u){if(!h||!p)return h?(e.s=-t,e):new z(p?o:NaN);if(!h[0]||!p[0])return p[0]?(e.s=-t,e):new z(h[0]?o:3==I?-0:0)}if(f=w(f),u=w(u),h=h.slice(),a=f-u){for((s=a<0)?(a=-a,i=h):(u=f,i=p),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(s=(a=h.length)<(t=p.length))?a:t,a=t=0;t<n;t++)if(h[t]!=p[t]){s=h[t]<p[t];break}if(s&&(i=h,h=p,p=i,e.s=-e.s),(t=(n=p.length)-(r=h.length))>0)for(;t--;h[r++]=0);for(t=c-1;n>a;){if(h[--n]<p[n]){for(r=n;r&&!h[--r];h[r]=t);--h[r],h[n]+=c}h[n]-=p[n]}for(;0==h[0];h.splice(0,1),--u);return h[0]?H(e,h,u):(e.s=3==I?-1:1,e.c=[e.e=0],e)},k.modulo=k.mod=function(e,t){var n,i,s=this;return e=new z(e,t),!s.c||!e.s||e.c&&!e.c[0]?new z(NaN):!e.c||s.c&&!s.c[0]?new z(s):(9==j?(i=e.s,e.s=1,n=r(s,e,0,3),e.s=i,n.s*=i):n=r(s,e,0,j),(e=s.minus(n.times(e))).c[0]||1!=j||(e.s=s.s),e)},k.multipliedBy=k.times=function(e,t){var r,n,i,s,o,a,f,u,h,p,d,b,v,$,m,C=this,y=C.c,N=(e=new z(e,t)).c;if(!(y&&N&&y[0]&&N[0]))return!C.s||!e.s||y&&!y[0]&&!N||N&&!N[0]&&!y?e.c=e.e=e.s=null:(e.s*=C.s,y&&N?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=w(C.e/l)+w(e.e/l),e.s*=C.s,(f=y.length)<(p=N.length)&&(v=y,y=N,N=v,i=f,f=p,p=i),i=f+p,v=[];i--;v.push(0));for($=c,m=g,i=p;--i>=0;){for(r=0,d=N[i]%m,b=N[i]/m|0,s=i+(o=f);s>i;)r=((u=d*(u=y[--o]%m)+(a=b*u+(h=y[o]/m|0)*d)%m*m+v[s]+r)/$|0)+(a/m|0)+b*h,v[s--]=u%$;v[s]=r}return r?++n:v.splice(0,1),H(e,v,n)},k.negated=function(){var e=new z(this);return e.s=-e.s||null,e},k.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new z(e,t)).s,!i||!t)return new z(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/l,o=e.e/l,a=n.c,f=e.c;if(!s||!o){if(!a||!f)return new z(i/0);if(!a[0]||!f[0])return f[0]?e:new z(a[0]?n:0*i)}if(s=w(s),o=w(o),a=a.slice(),i=s-o){for(i>0?(o=s,r=f):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=f.length)<0&&(r=f,f=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+f[t]+i)/c|0,a[t]=c===a[t]?0:a[t]%c;return i&&(a=[i].concat(a),++o),H(e,a,o)},k.precision=k.sd=function(e,t){var r,n,i,s=this;if(null!=e&&e!==!!e)return m(e,1,b),null==t?t=I:m(t,0,8),J(new z(s),e,t);if(!(r=s.c))return null;if(n=(i=r.length-1)*l+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&s.e+1>n&&(n=s.e+1),n},k.shiftedBy=function(e){return m(e,-9007199254740991,p),this.times("1e"+e)},k.squareRoot=k.sqrt=function(){var e,t,n,i,s,o=this,a=o.c,f=o.s,u=o.e,h=T+4,c=new z("0.5");if(1!==f||!a||!a[0])return new z(!f||f<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(f=Math.sqrt(+X(o)))||f==1/0?(((t=v(a)).length+u)%2==0&&(t+="0"),f=Math.sqrt(+t),u=w((u+1)/2)-(u<0||u%2),n=new z(t=f==1/0?"5e"+u:(t=f.toExponential()).slice(0,t.indexOf("e")+1)+u)):n=new z(f+""),n.c[0])for((f=(u=n.e)+h)<3&&(f=0);;)if(s=n,n=c.times(s.plus(r(o,s,h,1))),v(s.c).slice(0,f)===(t=v(n.c)).slice(0,f)){if(n.e<u&&--f,"9999"!=(t=t.slice(f-3,f+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(J(n,n.e+T+2,1),e=!n.times(n).eq(o));break}if(!i&&(J(s,s.e+T+2,0),s.times(s).eq(o))){n=s;break}h+=4,f+=4,i=1}return J(n,n.e+T+1,I,e)},k.toExponential=function(e,t){return null!=e&&(m(e,0,b),e++),G(this,e,t,1)},k.toFixed=function(e,t){return null!=e&&(m(e,0,b),e=e+this.e+1),G(this,e,t)},k.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=_;else if("object"!=typeof r)throw Error(u+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var s,o=n.split("."),a=+r.groupSize,f=+r.secondaryGroupSize,h=r.groupSeparator||"",c=o[0],l=o[1],p=i.s<0,d=p?c.slice(1):c,g=d.length;if(f&&(s=a,a=f,f=s,g-=s),a>0&&g>0){for(s=g%a||a,c=d.substr(0,s);s<g;s+=a)c+=h+d.substr(s,a);f>0&&(c+=h+d.slice(s)),p&&(c="-"+c)}n=l?c+(r.decimalSeparator||"")+((f=+r.fractionGroupSize)?l.replace(new RegExp("\\d{"+f+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):l):c}return(r.prefix||"")+n+(r.suffix||"")},k.toFraction=function(e){var t,n,i,s,o,a,f,h,c,p,g,b,w=this,$=w.c;if(null!=e&&(!(f=new z(e)).isInteger()&&(f.c||1!==f.s)||f.lt(P)))throw Error(u+"Argument "+(f.isInteger()?"out of range: ":"not an integer: ")+X(f));if(!$)return new z(w);for(t=new z(P),c=n=new z(P),i=h=new z(P),b=v($),o=t.e=b.length-w.e-1,t.c[0]=d[(a=o%l)<0?l+a:a],e=!e||f.comparedTo(t)>0?o>0?t:c:f,a=D,D=1/0,f=new z(b),h.c[0]=0;p=r(f,t,0,1),1!=(s=n.plus(p.times(i))).comparedTo(e);)n=i,i=s,c=h.plus(p.times(s=c)),h=s,t=f.minus(p.times(s=t)),f=s;return s=r(e.minus(n),i,0,1),h=h.plus(s.times(c)),n=n.plus(s.times(i)),h.s=c.s=w.s,g=r(c,i,o*=2,I).minus(w).abs().comparedTo(r(h,n,o,I).minus(w).abs())<1?[c,i]:[h,n],D=a,g},k.toNumber=function(){return+X(this)},k.toPrecision=function(e,t){return null!=e&&m(e,1,b),G(this,e,t,2)},k.toString=function(e){var t,r=this,i=r.s,s=r.e;return null===s?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=s<=S||s>=R?y(v(r.c),s):N(v(r.c),s,"0"):10===e&&q?t=N(v((r=J(new z(r),T+s+1,I)).c),r.e,"0"):(m(e,2,L.length,"Base"),t=n(N(v(r.c),s,"0"),10,e,i,!0)),i<0&&r.c[0]&&(t="-"+t)),t},k.valueOf=k.toJSON=function(){return X(this)},k._isBigNumber=!0,null!=t&&z.set(t),z}(),s.default=s.BigNumber=s,void 0===(n=function(){return s}.call(t,r,t,e))||(e.exports=n)}()},10291:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;class r{constructor(e,t){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=e,this.useContextVariables=t}generateVariable(e){const t=[...this.scopes[this.scopes.length-1]];return e&&t.push(e),t.join(".")}generateOption(e){switch(typeof e){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return`${this.addImport(e)}.call(${this.generateVariable()}, vars)`}}generateError(e){this.pushCode(`throw new Error(${e});`)}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(e){this.code+=e+"\n"}pushPath(e){e&&this.scopes[this.scopes.length-1].push(e)}popPath(e){e&&this.scopes[this.scopes.length-1].pop()}pushScope(e){this.scopes.push([e])}popScope(){this.scopes.pop()}addImport(e){if(!this.importPath)return`(${e})`;let t=this.reverseImports.get(e);return t||(t=this.imports.push(e)-1,this.reverseImports.set(e,t)),`${this.importPath}[${t}]`}addReference(e){this.references.has(e)||this.references.set(e,{resolved:!1,requested:!1})}markResolved(e){const t=this.references.get(e);t&&(t.resolved=!0)}markRequested(e){e.forEach((e=>{const t=this.references.get(e);t&&(t.requested=!0)}))}getUnresolvedReferences(){return Array.from(this.references).filter((([e,t])=>!t.resolved&&!t.requested)).map((([e,t])=>e))}}const n=new Map,i="___parser_",s={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},o={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},a={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1};class f{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new f}primitiveGenerateN(e,t){const r=o[e],n=a[e];t.pushCode(`${t.generateVariable(this.varName)} = dataView.get${r}(offset, ${n});`),t.pushCode(`offset += ${s[e]};`)}primitiveN(e,t,r){return this.setNextParser(e,t,r)}useThisEndian(e){return e+this.endian.toLowerCase()}uint8(e,t={}){return this.primitiveN("uint8",e,t)}uint16(e,t={}){return this.primitiveN(this.useThisEndian("uint16"),e,t)}uint16le(e,t={}){return this.primitiveN("uint16le",e,t)}uint16be(e,t={}){return this.primitiveN("uint16be",e,t)}uint32(e,t={}){return this.primitiveN(this.useThisEndian("uint32"),e,t)}uint32le(e,t={}){return this.primitiveN("uint32le",e,t)}uint32be(e,t={}){return this.primitiveN("uint32be",e,t)}int8(e,t={}){return this.primitiveN("int8",e,t)}int16(e,t={}){return this.primitiveN(this.useThisEndian("int16"),e,t)}int16le(e,t={}){return this.primitiveN("int16le",e,t)}int16be(e,t={}){return this.primitiveN("int16be",e,t)}int32(e,t={}){return this.primitiveN(this.useThisEndian("int32"),e,t)}int32le(e,t={}){return this.primitiveN("int32le",e,t)}int32be(e,t={}){return this.primitiveN("int32be",e,t)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(e,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),e,t)}int64be(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64be",e,t)}int64le(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64le",e,t)}uint64(e,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),e,t)}uint64be(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64be",e,t)}uint64le(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64le",e,t)}floatle(e,t={}){return this.primitiveN("floatle",e,t)}floatbe(e,t={}){return this.primitiveN("floatbe",e,t)}doublele(e,t={}){return this.primitiveN("doublele",e,t)}doublebe(e,t={}){return this.primitiveN("doublebe",e,t)}bitN(e,t,r){return r.length=e,this.setNextParser("bit",t,r)}bit1(e,t={}){return this.bitN(1,e,t)}bit2(e,t={}){return this.bitN(2,e,t)}bit3(e,t={}){return this.bitN(3,e,t)}bit4(e,t={}){return this.bitN(4,e,t)}bit5(e,t={}){return this.bitN(5,e,t)}bit6(e,t={}){return this.bitN(6,e,t)}bit7(e,t={}){return this.bitN(7,e,t)}bit8(e,t={}){return this.bitN(8,e,t)}bit9(e,t={}){return this.bitN(9,e,t)}bit10(e,t={}){return this.bitN(10,e,t)}bit11(e,t={}){return this.bitN(11,e,t)}bit12(e,t={}){return this.bitN(12,e,t)}bit13(e,t={}){return this.bitN(13,e,t)}bit14(e,t={}){return this.bitN(14,e,t)}bit15(e,t={}){return this.bitN(15,e,t)}bit16(e,t={}){return this.bitN(16,e,t)}bit17(e,t={}){return this.bitN(17,e,t)}bit18(e,t={}){return this.bitN(18,e,t)}bit19(e,t={}){return this.bitN(19,e,t)}bit20(e,t={}){return this.bitN(20,e,t)}bit21(e,t={}){return this.bitN(21,e,t)}bit22(e,t={}){return this.bitN(22,e,t)}bit23(e,t={}){return this.bitN(23,e,t)}bit24(e,t={}){return this.bitN(24,e,t)}bit25(e,t={}){return this.bitN(25,e,t)}bit26(e,t={}){return this.bitN(26,e,t)}bit27(e,t={}){return this.bitN(27,e,t)}bit28(e,t={}){return this.bitN(28,e,t)}bit29(e,t={}){return this.bitN(29,e,t)}bit30(e,t={}){return this.bitN(30,e,t)}bit31(e,t={}){return this.bitN(31,e,t)}bit32(e,t={}){return this.bitN(32,e,t)}namely(e){return n.set(e,this),this.alias=e,this}skip(e,t={}){return this.seek(e,t)}seek(e,t={}){if(t.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:e})}string(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!t.length&&!t.greedy)throw new Error("length or greedy must be defined if stripNull is enabled.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)}buffer(e,t){if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",e,t)}wrapped(e,t){if("object"!=typeof t&&"object"==typeof e&&(t=e,e=""),!t||!t.wrapper||!t.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",e,t)}array(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!t.type)throw new Error("type is required for array.");if("string"==typeof t.type&&!n.has(t.type)&&!(t.type in s))throw new Error(`Array element type "${t.type}" is unkown.`);return this.setNextParser("array",e,t)}choice(e,t){if("object"!=typeof t&&"object"==typeof e&&(t=e,e=""),!t)throw new Error("tag and choices are are required for choice.");if(!t.tag)throw new Error("tag is requird for choice.");if(!t.choices)throw new Error("choices is required for choice.");for(const e in t.choices){const r=parseInt(e,10),i=t.choices[r];if(isNaN(r))throw new Error(`Choice key "${e}" is not a number.`);if("string"==typeof i&&!n.has(i)&&!(i in s))throw new Error(`Choice type "${i}" is unkown.`)}return this.setNextParser("choice",e,t)}nest(e,t){if("object"!=typeof t&&"object"==typeof e&&(t=e,e=""),!t||!t.type)throw new Error("type is required for nest.");if(!(t.type instanceof f||n.has(t.type)))throw new Error("type must be a known parser name or a Parser object.");if(!(t.type instanceof f||e))throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",e,t)}pointer(e,t){if(!t.offset)throw new Error("offset is required for pointer.");if(!t.type)throw new Error("type is required for pointer.");if("string"==typeof t.type&&!(t.type in s)&&!n.has(t.type))throw new Error(`Pointer type "${t.type}" is unkown.`);return this.setNextParser("pointer",e,t)}saveOffset(e,t={}){return this.setNextParser("saveOffset",e,t)}endianness(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(e){return this.endianness(e)}useContextVars(e=!0){return this.useContextVariables=e,this}create(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this}getContext(e){const t=new r(e,this.useContextVariables);return t.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(t),t.pushCode(`return ${i+this.alias}(0).result;`)):this.addRawCode(t),t}getCode(){return this.getContext("imports").code}addRawCode(e){e.pushCode("var offset = 0;"),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("vars.$parent = null;"),e.pushCode("vars.$root = vars;"),this.generate(e),this.resolveReferences(e),e.pushCode("delete vars.$parent;"),e.pushCode("delete vars.$root;"),e.pushCode("return vars;")}addAliasedCode(e){return e.pushCode(`function ${i+this.alias}(offset, context) {`),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),e.pushCode("vars = Object.assign(vars, ctx);"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e}resolveReferences(e){const t=e.getUnresolvedReferences();e.markRequested(t),t.forEach((t=>{var r;null===(r=n.get(t))||void 0===r||r.addAliasedCode(e)}))}compile(){const e="imports",t=this.getContext(e);this.compiled=new Function(e,"TextDecoder",`return function (buffer, constructorFn) { ${t.code} };`)(t.imports,TextDecoder)}sizeOf(){let e=NaN;if(Object.keys(s).indexOf(this.type)>=0)e=s[this.type];else if("string"===this.type&&"number"==typeof this.options.length)e=this.options.length;else if("buffer"===this.type&&"number"==typeof this.options.length)e=this.options.length;else if("array"===this.type&&"number"==typeof this.options.length){let t=NaN;"string"==typeof this.options.type?t=s[this.options.type]:this.options.type instanceof f&&(t=this.options.type.sizeOf()),e=this.options.length*t}else"seek"===this.type?e=this.options.length:"nest"===this.type?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e}parse(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn)}setNextParser(e,t,r){const n=new f;return n.type=e,n.varName=t,n.options=r,n.endian=this.endian,this.head?this.head.next=n:this.next=n,this.head=n,this}generate(e){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,e);break;case"bit":this.generateBit(e);break;case"string":this.generateString(e);break;case"buffer":this.generateBuffer(e);break;case"seek":this.generateSeek(e);break;case"nest":this.generateNest(e);break;case"array":this.generateArray(e);break;case"choice":this.generateChoice(e);break;case"pointer":this.generatePointer(e);break;case"saveOffset":this.generateSaveOffset(e);break;case"wrapper":this.generateWrapper(e)}"bit"!==this.type&&this.generateAssert(e)}const t=e.generateVariable(this.varName);return this.options.formatter&&"bit"!==this.type&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)}generateAssert(e){if(!this.options.assert)return;const t=e.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{const r=e.addImport(this.options.assert);e.pushCode(`if (!${r}.call(vars, ${t})) {`)}break;case"number":e.pushCode(`if (${this.options.assert} !== ${t}) {`);break;case"string":e.pushCode(`if (${JSON.stringify(this.options.assert)} !== ${t}) {`);break;default:throw new Error("assert option must be a string, number or a function.")}e.generateError(`"Assertion error: ${t} is " + ${JSON.stringify(this.options.assert.toString())}`),e.pushCode("}")}generateNext(e){return this.next&&(e=this.next.generate(e)),e}generateBit(e){const t=JSON.parse(JSON.stringify(this));if(t.options=this.options,t.generateAssert=this.generateAssert.bind(this),t.generateFormatter=this.generateFormatter.bind(this),t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){const t=e.generateTmpVariable();e.pushCode(`var ${t} = 0;`);const r=(t=0)=>{let r=0;for(let n=t;n<e.bitFields.length;n++){const t=e.bitFields[n].options.length;if(r+t>32)break;r+=t}return r},n=r=>(r<=8?(e.pushCode(`${t} = dataView.getUint8(offset);`),r=8):r<=16?(e.pushCode(`${t} = dataView.getUint16(offset);`),r=16):r<=24?(e.pushCode(`${t} = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);`),r=24):(e.pushCode(`${t} = dataView.getUint32(offset);`),r=32),e.pushCode(`offset += ${r/8};`),r);let i=0;const s="be"===this.endian;let o=0,a=0;e.bitFields.forEach(((f,u)=>{let h=f.options.length;if(h>a){if(a){const r=-1>>>32-a;e.pushCode(`${f.varName} = (${t} & 0x${r.toString(16)}) << ${h-a};`),h-=a}i=0,a=o=n(r(u)-a)}const c=s?o-i-h:i,l=-1>>>32-h;e.pushCode(`${f.varName} ${h<f.options.length?"|=":"="} ${t} >> ${c} & 0x${l.toString(16)};`),32===f.options.length&&e.pushCode(`${f.varName} >>>= 0`),f.options.assert&&f.generateAssert(e),f.options.formatter&&f.generateFormatter(e,f.varName,f.options.formatter),i+=h,a-=h})),e.bitFields=[]}}generateSeek(e){const t=e.generateOption(this.options.length);e.pushCode(`offset += ${t};`)}generateString(e){const t=e.generateVariable(this.varName),r=e.generateTmpVariable(),n=this.options.encoding,i="hex"===n.toLowerCase(),s='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){const o=this.options.length;e.pushCode(`var ${r} = offset;`),e.pushCode(`while(dataView.getUint8(offset++) !== 0 && offset - ${r} < ${o});`);const a=`offset - ${r} < ${o} ? offset - 1 : offset`;e.pushCode(i?`${t} = Array.from(buffer.subarray(${r}, ${a}), ${s}).join('');`:`${t} = new TextDecoder('${n}').decode(buffer.subarray(${r}, ${a}));`)}else if(this.options.length){const r=e.generateOption(this.options.length);e.pushCode(i?`${t} = Array.from(buffer.subarray(offset, offset + ${r}), ${s}).join('');`:`${t} = new TextDecoder('${n}').decode(buffer.subarray(offset, offset + ${r}));`),e.pushCode(`offset += ${r};`)}else this.options.zeroTerminated?(e.pushCode(`var ${r} = offset;`),e.pushCode("while(dataView.getUint8(offset++) !== 0);"),e.pushCode(i?`${t} = Array.from(buffer.subarray(${r}, offset - 1), ${s}).join('');`:`${t} = new TextDecoder('${n}').decode(buffer.subarray(${r}, offset - 1));`)):this.options.greedy&&(e.pushCode(`var ${r} = offset;`),e.pushCode("while(buffer.length > offset++);"),e.pushCode(i?`${t} = Array.from(buffer.subarray(${r}, offset), ${s}).join('');`:`${t} = new TextDecoder('${n}').decode(buffer.subarray(${r}, offset));`));this.options.stripNull&&e.pushCode(`${t} = ${t}.replace(/\\x00+$/g, '')`)}generateBuffer(e){const t=e.generateVariable(this.varName);if("function"==typeof this.options.readUntil){const r=this.options.readUntil,n=e.generateTmpVariable(),i=e.generateTmpVariable();e.pushCode(`var ${n} = offset;`),e.pushCode(`var ${i} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${i} = dataView.getUint8(offset);`);const s=e.addImport(r);e.pushCode(`if (${s}.call(${e.generateVariable()}, ${i}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${t} = buffer.subarray(${n}, offset);`)}else if("eof"===this.options.readUntil)e.pushCode(`${t} = buffer.subarray(offset);`);else{const r=e.generateOption(this.options.length);e.pushCode(`${t} = buffer.subarray(offset, offset + ${r});`),e.pushCode(`offset += ${r};`)}this.options.clone&&e.pushCode(`${t} = buffer.constructor.from(${t});`)}generateArray(e){const t=e.generateOption(this.options.length),r=e.generateOption(this.options.lengthInBytes),u=this.options.type,h=e.generateTmpVariable(),c=e.generateVariable(this.varName),l=e.generateTmpVariable(),p=this.options.key,d="string"==typeof p;if(d?e.pushCode(`${c} = {};`):e.pushCode(`${c} = [];`),"function"==typeof this.options.readUntil?e.pushCode("do {"):"eof"===this.options.readUntil?e.pushCode(`for (var ${h} = 0; offset < buffer.length; ${h}++) {`):void 0!==r?e.pushCode(`for (var ${h} = offset + ${r}; offset < ${h}; ) {`):e.pushCode(`for (var ${h} = ${t}; ${h} > 0; ${h}--) {`),"string"==typeof u)if(n.get(u)){const n=e.generateTmpVariable();if(e.pushCode(`var ${n} = ${i+u}(offset, {`),e.useContextVariables){const n=e.generateVariable();e.pushCode(`$parent: ${n},`),e.pushCode(`$root: ${n}.$root,`),this.options.readUntil||void 0!==r||e.pushCode(`$index: ${t} - ${h},`)}e.pushCode("});"),e.pushCode(`var ${l} = ${n}.result; offset = ${n}.offset;`),u!==this.alias&&e.addReference(u)}else{const t=o[u],r=a[u];e.pushCode(`var ${l} = dataView.get${t}(offset, ${r});`),e.pushCode(`offset += ${s[u]};`)}else if(u instanceof f){e.pushCode(`var ${l} = {};`);const n=e.generateVariable();e.pushScope(l),e.useContextVariables&&(e.pushCode(`${l}.$parent = ${n};`),e.pushCode(`${l}.$root = ${n}.$root;`),this.options.readUntil||void 0!==r||e.pushCode(`${l}.$index = ${t} - ${h};`)),u.generate(e),e.useContextVariables&&(e.pushCode(`delete ${l}.$parent;`),e.pushCode(`delete ${l}.$root;`),e.pushCode(`delete ${l}.$index;`)),e.popScope()}if(d?e.pushCode(`${c}[${l}.${p}] = ${l};`):e.pushCode(`${c}.push(${l});`),e.pushCode("}"),"function"==typeof this.options.readUntil){const t=this.options.readUntil,r=e.addImport(t);e.pushCode(`while (!${r}.call(${e.generateVariable()}, ${l}, buffer.subarray(offset)));`)}}generateChoiceCase(e,t,r){if("string"==typeof r){const t=e.generateVariable(this.varName);if(n.has(r)){const n=e.generateTmpVariable();e.pushCode(`var ${n} = ${i+r}(offset, {`),e.useContextVariables&&(e.pushCode(`$parent: ${t}.$parent,`),e.pushCode(`$root: ${t}.$root,`)),e.pushCode("});"),e.pushCode(`${t} = ${n}.result; offset = ${n}.offset;`),r!==this.alias&&e.addReference(r)}else{const n=o[r],i=a[r];e.pushCode(`${t} = dataView.get${n}(offset, ${i});`),e.pushCode(`offset += ${s[r]}`)}}else r instanceof f&&(e.pushPath(t),r.generate(e),e.popPath(t))}generateChoice(e){const t=e.generateOption(this.options.tag),r=e.generateVariable(this.varName);if(this.varName&&(e.pushCode(`${r} = {};`),e.useContextVariables)){const t=e.generateVariable();e.pushCode(`${r}.$parent = ${t};`),e.pushCode(`${r}.$root = ${t}.$root;`)}e.pushCode(`switch(${t}) {`);for(const t in this.options.choices){const r=parseInt(t,10),n=this.options.choices[r];e.pushCode(`case ${r}:`),this.generateChoiceCase(e,this.varName,n),e.pushCode("break;")}e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError(`"Met undefined tag value " + ${t} + " at choice"`),e.pushCode("}"),this.varName&&e.useContextVariables&&(e.pushCode(`delete ${r}.$parent;`),e.pushCode(`delete ${r}.$root;`))}generateNest(e){const t=e.generateVariable(this.varName);if(this.options.type instanceof f){if(this.varName&&(e.pushCode(`${t} = {};`),e.useContextVariables)){const r=e.generateVariable();e.pushCode(`${t}.$parent = ${r};`),e.pushCode(`${t}.$root = ${r}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),this.varName&&e.useContextVariables&&e.useContextVariables&&(e.pushCode(`delete ${t}.$parent;`),e.pushCode(`delete ${t}.$root;`))}else if(n.has(this.options.type)){const r=e.generateTmpVariable();if(e.pushCode(`var ${r} = ${i+this.options.type}(offset, {`),e.useContextVariables){const t=e.generateVariable();e.pushCode(`$parent: ${t},`),e.pushCode(`$root: ${t}.$root,`)}e.pushCode("});"),e.pushCode(`${t} = ${r}.result; offset = ${r}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}}generateWrapper(e){const t=e.generateVariable(this.varName),r=e.generateTmpVariable();if("function"==typeof this.options.readUntil){const t=this.options.readUntil,n=e.generateTmpVariable(),i=e.generateTmpVariable();e.pushCode(`var ${n} = offset;`),e.pushCode(`var ${i} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${i} = dataView.getUint8(offset);`);const s=e.addImport(t);e.pushCode(`if (${s}.call(${e.generateVariable()}, ${i}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${r} = buffer.subarray(${n}, offset);`)}else if("eof"===this.options.readUntil)e.pushCode(`${r} = buffer.subarray(offset);`);else{const t=e.generateOption(this.options.length);e.pushCode(`${r} = buffer.subarray(offset, offset + ${t});`),e.pushCode(`offset += ${t};`)}this.options.clone&&e.pushCode(`${r} = buffer.constructor.from(${r});`);const s=e.generateTmpVariable(),o=e.generateTmpVariable(),a=e.generateTmpVariable(),u=e.addImport(this.options.wrapper);if(e.pushCode(`${r} = ${u}.call(this, ${r}).subarray(0);`),e.pushCode(`var ${s} = buffer;`),e.pushCode(`var ${o} = offset;`),e.pushCode(`var ${a} = dataView;`),e.pushCode(`buffer = ${r};`),e.pushCode("offset = 0;"),e.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof f)this.varName&&e.pushCode(`${t} = {};`),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(n.has(this.options.type)){const r=e.generateTmpVariable();e.pushCode(`var ${r} = ${i+this.options.type}(0);`),e.pushCode(`${t} = ${r}.result;`),this.options.type!==this.alias&&e.addReference(this.options.type)}e.pushCode(`buffer = ${s};`),e.pushCode(`dataView = ${a};`),e.pushCode(`offset = ${o};`)}generateFormatter(e,t,r){if("function"==typeof r){const n=e.addImport(r);e.pushCode(`${t} = ${n}.call(${e.generateVariable()}, ${t});`)}}generatePointer(e){const t=this.options.type,r=e.generateOption(this.options.offset),u=e.generateTmpVariable(),h=e.generateVariable(this.varName);if(e.pushCode(`var ${u} = offset;`),e.pushCode(`offset = ${r};`),this.options.type instanceof f){if(e.pushCode(`${h} = {};`),e.useContextVariables){const t=e.generateVariable();e.pushCode(`${h}.$parent = ${t};`),e.pushCode(`${h}.$root = ${t}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),e.useContextVariables&&(e.pushCode(`delete ${h}.$parent;`),e.pushCode(`delete ${h}.$root;`))}else if(n.has(this.options.type)){const t=e.generateTmpVariable();if(e.pushCode(`var ${t} = ${i+this.options.type}(offset, {`),e.useContextVariables){const t=e.generateVariable();e.pushCode(`$parent: ${t},`),e.pushCode(`$root: ${t}.$root,`)}e.pushCode("});"),e.pushCode(`${h} = ${t}.result; offset = ${t}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}else if(Object.keys(s).indexOf(this.options.type)>=0){const r=o[t],n=a[t];e.pushCode(`${h} = dataView.get${r}(offset, ${n});`),e.pushCode(`offset += ${s[t]};`)}e.pushCode(`offset = ${u};`)}generateSaveOffset(e){const t=e.generateVariable(this.varName);e.pushCode(`${t} = offset`)}}t.Parser=f}}]);