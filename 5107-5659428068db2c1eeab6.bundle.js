(self.webpackChunksmardex_web=self.webpackChunksmardex_web||[]).push([[5107],{76990:function(e,t,r){"use strict";var i,n=Object.create,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,c=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,u=(e,t,r,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of o(t))h.call(e,n)||n===r||s(e,n,{get:()=>t[n],enumerable:!(i=a(t,n))||i.enumerable});return e},f={};function p(e,t){for(var r,i,n,s=e.replace(/[^A-Za-z0-9+/]/g,""),a=s.length,o=t?Math.ceil((3*a+1>>2)/t)*t:3*a+1>>2,c=new Uint8Array(o),h=0,u=0,f=0;f<a;f++)if(i=3&f,h|=((n=s.charCodeAt(f))>64&&n<91?n-65:n>96&&n<123?n-71:n>47&&n<58?n+4:43===n?62:47===n?63:0)<<6*(3-i),3===i||a-f==1){for(r=0;r<3&&u<o;r++,u++)c[u]=h>>>(16>>>r&24)&255;h=0}return c}function y(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function d(e){for(var t=2,r="",i=e.length,n=0,s=0;s<i;s++)t=s%3,s>0&&4*s/3%76==0&&(r+=""),n|=e[s]<<(16>>>t&24),2!==t&&e.length-s!=1||(r+=String.fromCodePoint(y(n>>>18&63),y(n>>>12&63),y(n>>>6&63),y(63&n)),n=0);return r.slice(0,r.length-2+t)+(2===t?"":1===t?"=":"==")}function l(e){let t=e.replace("0x","").match(/.{1,2}/g).map((e=>parseInt(e,16)));if(null===t)throw new Error(`Unable to parse HEX: ${e}`);return Uint8Array.from(t)}function w(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(f,{BCS:()=>v,BcsReader:()=>S,BcsWriter:()=>A,decodeStr:()=>O,encodeStr:()=>$,fromB58:()=>E,fromB64:()=>p,fromHEX:()=>l,getRustConfig:()=>V,getSuiMoveConfig:()=>B,registerPrimitives:()=>I,toB58:()=>T,toB64:()=>d,toHEX:()=>w}),e.exports=(i=f,u(s({},"__esModule",{value:!0}),i));var g=((e,t,r)=>(r=null!=e?n(c(e)):{},u(!t&&e&&e.__esModule?r:s(r,"default",{value:e,enumerable:!0}),e)))(r(77474)),m=32;function b(e,t){let r=new Uint8Array(t),i=0;for(;e>0;)r[i]=Number(e%BigInt(256)),e/=BigInt(256),i+=1;return r}var T=e=>g.default.encode(e),E=e=>g.default.decode(e),S=class{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),t=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+t).toString(10)}read128(){let e=BigInt(this.read64()),t=BigInt(this.read64()).toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+t).toString(10)}read256(){let e=BigInt(this.read128()),t=BigInt(this.read128()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+t).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),r}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:r,length:i}=function(e){let t=0,r=0,i=0;for(;;){let n=e[i];if(i+=1,t|=(127&n)<<r,0==(128&n))break;r+=7}return{value:t,length:i}}(t);return this.shift(i),r}readVec(e){let t=this.readULEB(),r=[];for(let i=0;i<t;i++)r.push(e(this,i,t));return r}},A=class{constructor({size:e=1024,maxSize:t,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t||e,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const e=Math.min(this.maxSize,this.size+this.allocateSize);if(t>e)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=e;const r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return b(BigInt(e),8).forEach((e=>this.write8(e))),this}write128(e){return b(BigInt(e),16).forEach((e=>this.write8(e))),this}write256(e){return b(BigInt(e),32).forEach((e=>this.write8(e))),this}writeULEB(e){return function(e){let t=[],r=0;if(0===e)return[0];for(;e>0;)t[r]=127&e,(e>>=7)&&(t[r]|=128),r+=1;return t}(e).forEach((e=>this.write8(e))),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach(((r,i)=>t(this,r,i,e.length))),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return $(this.toBytes(),e)}};var U=class{constructor(e){if(this.types=new Map,this.counter=0,e instanceof U)return this.schema=e.schema,void(this.types=new Map(e.types));if(this.schema=e,this.registerAddressType(U.ADDRESS,e.addressLength,e.addressEncoding),this.registerVectorType(e.vectorType),e.types&&e.types.structs)for(let t of Object.keys(e.types.structs))this.registerStructType(t,e.types.structs[t]);if(e.types&&e.types.enums)for(let t of Object.keys(e.types.enums))this.registerEnumType(t,e.types.enums[t]);if(e.types&&e.types.aliases)for(let t of Object.keys(e.types.aliases))this.registerAlias(t,e.types.aliases[t]);!1!==e.withPrimitives&&I(this)}tempKey(){return"bcs-struct-"+ ++this.counter}ser(e,t,r){if("string"==typeof e||Array.isArray(e)){const{name:i,params:n}=this.parseTypeName(e);return this.getTypeInterface(i).encode(this,t,r,n)}if("object"==typeof e){const i=this.tempKey();return new U(this).registerStructType(i,e).ser(i,t,r)}throw new Error(`Incorrect type passed into the '.ser()' function. \n${JSON.stringify(e)}`)}de(e,t,r){if("string"==typeof t){if(!r)throw new Error("To pass a string to `bcs.de`, specify encoding");t=O(t,r)}if("string"==typeof e||Array.isArray(e)){const{name:r,params:i}=this.parseTypeName(e);return this.getTypeInterface(r).decode(this,t,i)}if("object"==typeof e){const i=new U(this),n=this.tempKey();return i.registerStructType(n,e).de(n,t,r)}throw new Error(`Incorrect type passed into the '.de()' function. \n${JSON.stringify(e)}`)}hasType(e){return this.types.has(e)}registerAlias(e,t){return this.types.set(e,t),this}registerType(e,t,r,i=(()=>!0)){const{name:n,params:s}=this.parseTypeName(e);return this.types.set(n,{encode(e,t,r,i){const n=s.reduce(((e,t,r)=>Object.assign(e,{[t]:i[r]})),{});return this._encodeRaw.call(e,new A(r),t,i,n)},decode(e,t,r){const i=s.reduce(((e,t,i)=>Object.assign(e,{[t]:r[i]})),{});return this._decodeRaw.call(e,new S(t),r,i)},_encodeRaw(e,r,s,a){if(i(r))return t.call(this,e,r,s,a);throw new Error(`Validation failed for type ${n}, data: ${r}`)},_decodeRaw(e,t,i){return r.call(this,e,t,i)}}),this}registerAddressType(e,t,r="hex"){switch(r){case"base64":return this.registerType(e,(function(e,t){return p(t).reduce(((e,t)=>e.write8(t)),e)}),(function(e){return d(e.readBytes(t))}));case"hex":return this.registerType(e,(function(e,t){return l(t).reduce(((e,t)=>e.write8(t)),e)}),(function(e){return w(e.readBytes(t))}));default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(e){let{name:t,params:r}=this.parseTypeName(e);if(r.length>1)throw new Error("Vector can have only one type parameter; got "+t);return this.registerType(e,(function(t,r,i,n){return t.writeVec(r,((t,r)=>{let s=i[0];if(!s)throw new Error(`Incorrect number of type parameters passed a to vector '${e}'`);let{name:a,params:o}=this.parseTypeName(s);if(this.hasType(a))return this.getTypeInterface(a)._encodeRaw.call(this,t,r,o,n);if(!(a in n))throw new Error(`Unable to find a matching type definition for ${a} in vector; make sure you passed a generic`);let{name:c,params:h}=this.parseTypeName(n[a]);return this.getTypeInterface(c)._encodeRaw.call(this,t,r,h,n)}))}),(function(t,r,i){return t.readVec((t=>{let n=r[0];if(!n)throw new Error(`Incorrect number of type parameters passed to a vector '${e}'`);let{name:s,params:a}=this.parseTypeName(n);if(this.hasType(s))return this.getTypeInterface(s)._decodeRaw.call(this,t,a,i);if(!(s in i))throw new Error(`Unable to find a matching type definition for ${s} in vector; make sure you passed a generic`);let{name:o,params:c}=this.parseTypeName(i[s]);this.getTypeInterface(o)._decodeRaw.call(this,t,c,i)}))}))}registerStructType(e,t){for(let e in t){let r=this.tempKey(),i=t[e];Array.isArray(i)||"string"==typeof i||(t[e]=r,this.registerStructType(r,i))}let r=Object.freeze(t),i=Object.keys(r),{name:n,params:s}=this.parseTypeName(e);return this.registerType(e,(function(e,t,a,o){if(!t||t.constructor!==Object)throw new Error(`Expected ${n} to be an Object, got: ${t}`);if(a.length!==s.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${s.length}, got: ${a.length}`);for(let c of i){if(!(c in t))throw new Error(`Struct ${n} requires field ${c}:${r[c]}`);const{name:i,params:h}=this.parseTypeName(r[c]);if(s.includes(i)){const r=s.indexOf(i);let{name:h,params:u}=this.parseTypeName(a[r]);if(this.hasType(h)){this.getTypeInterface(h)._encodeRaw.call(this,e,t[c],u,o);continue}if(!(h in o))throw new Error(`Unable to find a matching type definition for ${h} in ${n}; make sure you passed a generic`);let{name:f,params:p}=this.parseTypeName(o[h]);this.getTypeInterface(f)._encodeRaw.call(this,e,t[c],p,o)}else this.getTypeInterface(i)._encodeRaw.call(this,e,t[c],h,o)}return e}),(function(e,t,a){if(t.length!==s.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${s.length}, got: ${t.length}`);let o={};for(let c of i){const{name:i,params:h}=this.parseTypeName(r[c]);if(s.includes(i)){const r=s.indexOf(i);let{name:h,params:u}=this.parseTypeName(t[r]);if(this.hasType(h)){o[c]=this.getTypeInterface(h)._decodeRaw.call(this,e,u,a);continue}if(!(h in a))throw new Error(`Unable to find a matching type definition for ${h} in ${n}; make sure you passed a generic`);let{name:f,params:p}=this.parseTypeName(a[h]);o[c]=this.getTypeInterface(f)._decodeRaw.call(this,e,p,a)}else o[c]=this.getTypeInterface(i)._decodeRaw.call(this,e,h,a)}return o}))}registerEnumType(e,t){for(let e in t){let r=this.tempKey(),i=t[e];null===i||Array.isArray(i)||"string"==typeof i||(t[e]=r,this.registerStructType(r,i))}let r=Object.freeze(t),i=Object.keys(r),{name:n,params:s}=this.parseTypeName(e);return this.registerType(e,(function(e,t,a,o){if(!t)throw new Error(`Unable to write enum "${n}", missing data.\nReceived: "${t}"`);if("object"!=typeof t)throw new Error(`Incorrect data passed into enum "${n}", expected object with properties: "${i.join(" | ")}".\nReceived: "${JSON.stringify(t)}"`);let c=Object.keys(t)[0];if(void 0===c)throw new Error(`Empty object passed as invariant of the enum "${n}"`);let h=i.indexOf(c);if(-1===h)throw new Error(`Unknown invariant of the enum "${n}", allowed values: "${i.join(" | ")}"; received "${c}"`);let u=i[h],f=r[u];if(e.write8(h),null===f)return e;let p=s.indexOf(f),y=-1===p?f:a[p];{let{name:r,params:i}=this.parseTypeName(y);return this.getTypeInterface(r)._encodeRaw.call(this,e,t[c],i,o)}}),(function(e,t,a){let o=e.readULEB(),c=i[o],h=r[c];if(-1===o)throw new Error(`Decoding type mismatch, expected enum "${n}" invariant index, received "${o}"`);if(null===h)return{[c]:!0};let u=s.indexOf(h),f=-1===u?h:t[u];{let{name:t,params:r}=this.parseTypeName(f);return{[c]:this.getTypeInterface(t)._decodeRaw.call(this,e,r,a)}}}))}getTypeInterface(e){let t=this.types.get(e);if("string"==typeof t){let e=[];for(;"string"==typeof t;){if(e.includes(t))throw new Error(`Recursive definition found: ${e.join(" -> ")} -> ${t}`);e.push(t),t=this.types.get(t)}}if(void 0===t)throw new Error(`Type ${e} is not registered`);return t}parseTypeName(e){if(Array.isArray(e)){let[t,...r]=e;return{name:t,params:r}}if("string"!=typeof e)throw new Error(`Illegal type passed as a name of the type: ${e}`);let[t,r]=this.schema.genericSeparators||["<",">"],i=e.indexOf(t),n=Array.from(e).reverse().indexOf(r);if(-1===i&&-1===n)return{name:e,params:[]};if(-1===i||-1===n)throw new Error(`Unclosed generic in name '${e}'`);return{name:e.slice(0,i),params:e.slice(i+1,e.length-n-1).split(",").map((e=>e.trim()))}}},v=U;function $(e,t){switch(t){case"base58":return T(e);case"base64":return d(e);case"hex":return w(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function O(e,t){switch(t){case"base58":return E(e);case"base64":return p(e);case"hex":return l(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function I(e){e.registerType(v.U8,(function(e,t){return e.write8(t)}),(function(e){return e.read8()}),(e=>e<256)),e.registerType(v.U16,(function(e,t){return e.write16(t)}),(function(e){return e.read16()}),(e=>e<65536)),e.registerType(v.U32,(function(e,t){return e.write32(t)}),(function(e){return e.read32()}),(e=>e<=4294967296n)),e.registerType(v.U64,(function(e,t){return e.write64(t)}),(function(e){return e.read64()})),e.registerType(v.U128,(function(e,t){return e.write128(t)}),(function(e){return e.read128()})),e.registerType(v.U256,(function(e,t){return e.write256(t)}),(function(e){return e.read256()})),e.registerType(v.BOOL,(function(e,t){return e.write8(t)}),(function(e){return"1"===e.read8().toString(10)})),e.registerType(v.STRING,(function(e,t){return e.writeVec(Array.from(t),((e,t)=>e.write8(t.charCodeAt(0))))}),(function(e){return e.readVec((e=>e.read8())).map((e=>String.fromCharCode(Number(e)))).join("")}),(e=>!0)),e.registerType(v.HEX,(function(e,t){return e.writeVec(Array.from(l(t)),((e,t)=>e.write8(t)))}),(function(e){let t=e.readVec((e=>e.read8()));return w(new Uint8Array(t))})),e.registerType(v.BASE58,(function(e,t){return e.writeVec(Array.from(E(t)),((e,t)=>e.write8(t)))}),(function(e){let t=e.readVec((e=>e.read8()));return T(new Uint8Array(t))})),e.registerType(v.BASE64,(function(e,t){return e.writeVec(Array.from(p(t)),((e,t)=>e.write8(t)))}),(function(e){let t=e.readVec((e=>e.read8()));return d(new Uint8Array(t))}))}function V(){return{genericSeparators:["<",">"],vectorType:"Vec",addressLength:m,addressEncoding:"hex"}}function B(){return{genericSeparators:["<",">"],vectorType:"vector",addressLength:m,addressEncoding:"hex"}}v.U8="u8",v.U16="u16",v.U32="u32",v.U64="u64",v.U128="u128",v.U256="u256",v.BOOL="bool",v.VECTOR="vector",v.ADDRESS="address",v.STRING="string",v.HEX="hex-string",v.BASE58="base58-string",v.BASE64="base64-string"},28855:function(e){"use strict";e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var n=e.charAt(i),s=n.charCodeAt(0);if(255!==t[s])throw new TypeError(n+" is ambiguous");t[s]=i}var a=e.length,o=e.charAt(0),c=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function u(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,i=0,n=0;e[r]===o;)i++,r++;for(var s=(e.length-r)*c+1>>>0,h=new Uint8Array(s);e[r];){var u=t[e.charCodeAt(r)];if(255===u)return;for(var f=0,p=s-1;(0!==u||f<n)&&-1!==p;p--,f++)u+=a*h[p]>>>0,h[p]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");n=f,r++}for(var y=s-n;y!==s&&0===h[y];)y++;for(var d=new Uint8Array(i+(s-y)),l=i;y!==s;)d[l++]=h[y++];return d}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var c=(s-n)*h+1>>>0,u=new Uint8Array(c);n!==s;){for(var f=t[n],p=0,y=c-1;(0!==f||p<i)&&-1!==y;y--,p++)f+=256*u[y]>>>0,u[y]=f%a>>>0,f=f/a>>>0;if(0!==f)throw new Error("Non-zero carry");i=p,n++}for(var d=c-i;d!==c&&0===u[d];)d++;for(var l=o.repeat(r);d<c;++d)l+=e.charAt(u[d]);return l},decodeUnsafe:u,decode:function(e){var t=u(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}},77474:function(e,t,r){const i=r(28855);e.exports=i("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},52353:function(e,t,r){"use strict";r.d(t,{Ce:function(){return l},FA:function(){return n},ye:function(){return w},zF:function(){return a}});var i=r(77474);function n(e,t){for(var r,i,n,s=e.replace(/[^A-Za-z0-9+/]/g,""),a=s.length,o=t?Math.ceil((3*a+1>>2)/t)*t:3*a+1>>2,c=new Uint8Array(o),h=0,u=0,f=0;f<a;f++)if(i=3&f,h|=((n=s.charCodeAt(f))>64&&n<91?n-65:n>96&&n<123?n-71:n>47&&n<58?n+4:43===n?62:47===n?63:0)<<6*(3-i),3===i||a-f==1){for(r=0;r<3&&u<o;r++,u++)c[u]=h>>>(16>>>r&24)&255;h=0}return c}function s(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function a(e){for(var t=2,r="",i=e.length,n=0,a=0;a<i;a++)t=a%3,a>0&&4*a/3%76==0&&(r+=""),n|=e[a]<<(16>>>t&24),2!==t&&e.length-a!=1||(r+=String.fromCodePoint(s(n>>>18&63),s(n>>>12&63),s(n>>>6&63),s(63&n)),n=0);return r.slice(0,r.length-2+t)+(2===t?"":1===t?"=":"==")}function o(e){let t=e.replace("0x","").match(/.{1,2}/g).map((e=>parseInt(e,16)));if(null===t)throw new Error(`Unable to parse HEX: ${e}`);return Uint8Array.from(t)}function c(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}var h=32;function u(e,t){let r=new Uint8Array(t),i=0;for(;e>0;)r[i]=Number(e%BigInt(256)),e/=BigInt(256),i+=1;return r}var f=e=>i.encode(e),p=e=>i.decode(e),y=class{constructor({size:e=1024,maxSize:t,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t||e,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const e=Math.min(this.maxSize,this.size+this.allocateSize);if(t>e)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=e;const r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return u(BigInt(e),8).forEach((e=>this.write8(e))),this}write128(e){return u(BigInt(e),16).forEach((e=>this.write8(e))),this}write256(e){return u(BigInt(e),32).forEach((e=>this.write8(e))),this}writeULEB(e){return function(e){let t=[],r=0;if(0===e)return[0];for(;e>0;)t[r]=127&e,(e>>=7)&&(t[r]|=128),r+=1;return t}(e).forEach((e=>this.write8(e))),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach(((r,i)=>t(this,r,i,e.length))),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return function(e,t){switch(t){case"base58":return f(e);case"base64":return a(e);case"hex":return c(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}(this.toBytes(),e)}};var d=class{constructor(e){if(this.types=new Map,this.counter=0,e instanceof d)return this.schema=e.schema,void(this.types=new Map(e.types));if(this.schema=e,this.registerAddressType(d.ADDRESS,e.addressLength,e.addressEncoding),this.registerVectorType(e.vectorType),e.types&&e.types.structs)for(let t of Object.keys(e.types.structs))this.registerStructType(t,e.types.structs[t]);if(e.types&&e.types.enums)for(let t of Object.keys(e.types.enums))this.registerEnumType(t,e.types.enums[t]);if(e.types&&e.types.aliases)for(let t of Object.keys(e.types.aliases))this.registerAlias(t,e.types.aliases[t]);var t;!1!==e.withPrimitives&&((t=this).registerType(l.U8,(function(e,t){return e.write8(t)}),(function(e){return e.read8()}),(e=>e<256)),t.registerType(l.U16,(function(e,t){return e.write16(t)}),(function(e){return e.read16()}),(e=>e<65536)),t.registerType(l.U32,(function(e,t){return e.write32(t)}),(function(e){return e.read32()}),(e=>e<=4294967296n)),t.registerType(l.U64,(function(e,t){return e.write64(t)}),(function(e){return e.read64()})),t.registerType(l.U128,(function(e,t){return e.write128(t)}),(function(e){return e.read128()})),t.registerType(l.U256,(function(e,t){return e.write256(t)}),(function(e){return e.read256()})),t.registerType(l.BOOL,(function(e,t){return e.write8(t)}),(function(e){return"1"===e.read8().toString(10)})),t.registerType(l.STRING,(function(e,t){return e.writeVec(Array.from(t),((e,t)=>e.write8(t.charCodeAt(0))))}),(function(e){return e.readVec((e=>e.read8())).map((e=>String.fromCharCode(Number(e)))).join("")}),(e=>!0)),t.registerType(l.HEX,(function(e,t){return e.writeVec(Array.from(o(t)),((e,t)=>e.write8(t)))}),(function(e){let t=e.readVec((e=>e.read8()));return c(new Uint8Array(t))})),t.registerType(l.BASE58,(function(e,t){return e.writeVec(Array.from(p(t)),((e,t)=>e.write8(t)))}),(function(e){let t=e.readVec((e=>e.read8()));return f(new Uint8Array(t))})),t.registerType(l.BASE64,(function(e,t){return e.writeVec(Array.from(n(t)),((e,t)=>e.write8(t)))}),(function(e){let t=e.readVec((e=>e.read8()));return a(new Uint8Array(t))})))}tempKey(){return"bcs-struct-"+ ++this.counter}ser(e,t,r){if("string"==typeof e||Array.isArray(e)){const{name:i,params:n}=this.parseTypeName(e);return this.getTypeInterface(i).encode(this,t,r,n)}if("object"==typeof e){const i=this.tempKey();return new d(this).registerStructType(i,e).ser(i,t,r)}throw new Error(`Incorrect type passed into the '.ser()' function. \n${JSON.stringify(e)}`)}de(e,t,r){if("string"==typeof t){if(!r)throw new Error("To pass a string to `bcs.de`, specify encoding");t=function(e,t){switch(t){case"base58":return p(e);case"base64":return n(e);case"hex":return o(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}(t,r)}if("string"==typeof e||Array.isArray(e)){const{name:r,params:i}=this.parseTypeName(e);return this.getTypeInterface(r).decode(this,t,i)}if("object"==typeof e){const i=new d(this),n=this.tempKey();return i.registerStructType(n,e).de(n,t,r)}throw new Error(`Incorrect type passed into the '.de()' function. \n${JSON.stringify(e)}`)}hasType(e){return this.types.has(e)}registerAlias(e,t){return this.types.set(e,t),this}registerType(e,t,r,i=(()=>!0)){const{name:n,params:s}=this.parseTypeName(e);return this.types.set(n,{encode(e,t,r,i){const n=s.reduce(((e,t,r)=>Object.assign(e,{[t]:i[r]})),{});return this._encodeRaw.call(e,new y(r),t,i,n)},decode(e,t,r){const i=s.reduce(((e,t,i)=>Object.assign(e,{[t]:r[i]})),{});return this._decodeRaw.call(e,new class{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),t=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+t).toString(10)}read128(){let e=BigInt(this.read64()),t=BigInt(this.read64()).toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+t).toString(10)}read256(){let e=BigInt(this.read128()),t=BigInt(this.read128()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+t).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),r}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:r,length:i}=function(e){let t=0,r=0,i=0;for(;;){let n=e[i];if(i+=1,t|=(127&n)<<r,0==(128&n))break;r+=7}return{value:t,length:i}}(t);return this.shift(i),r}readVec(e){let t=this.readULEB(),r=[];for(let i=0;i<t;i++)r.push(e(this,i,t));return r}}(t),r,i)},_encodeRaw(e,r,s,a){if(i(r))return t.call(this,e,r,s,a);throw new Error(`Validation failed for type ${n}, data: ${r}`)},_decodeRaw(e,t,i){return r.call(this,e,t,i)}}),this}registerAddressType(e,t,r="hex"){switch(r){case"base64":return this.registerType(e,(function(e,t){return n(t).reduce(((e,t)=>e.write8(t)),e)}),(function(e){return a(e.readBytes(t))}));case"hex":return this.registerType(e,(function(e,t){return o(t).reduce(((e,t)=>e.write8(t)),e)}),(function(e){return c(e.readBytes(t))}));default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(e){let{name:t,params:r}=this.parseTypeName(e);if(r.length>1)throw new Error("Vector can have only one type parameter; got "+t);return this.registerType(e,(function(t,r,i,n){return t.writeVec(r,((t,r)=>{let s=i[0];if(!s)throw new Error(`Incorrect number of type parameters passed a to vector '${e}'`);let{name:a,params:o}=this.parseTypeName(s);if(this.hasType(a))return this.getTypeInterface(a)._encodeRaw.call(this,t,r,o,n);if(!(a in n))throw new Error(`Unable to find a matching type definition for ${a} in vector; make sure you passed a generic`);let{name:c,params:h}=this.parseTypeName(n[a]);return this.getTypeInterface(c)._encodeRaw.call(this,t,r,h,n)}))}),(function(t,r,i){return t.readVec((t=>{let n=r[0];if(!n)throw new Error(`Incorrect number of type parameters passed to a vector '${e}'`);let{name:s,params:a}=this.parseTypeName(n);if(this.hasType(s))return this.getTypeInterface(s)._decodeRaw.call(this,t,a,i);if(!(s in i))throw new Error(`Unable to find a matching type definition for ${s} in vector; make sure you passed a generic`);let{name:o,params:c}=this.parseTypeName(i[s]);this.getTypeInterface(o)._decodeRaw.call(this,t,c,i)}))}))}registerStructType(e,t){for(let e in t){let r=this.tempKey(),i=t[e];Array.isArray(i)||"string"==typeof i||(t[e]=r,this.registerStructType(r,i))}let r=Object.freeze(t),i=Object.keys(r),{name:n,params:s}=this.parseTypeName(e);return this.registerType(e,(function(e,t,a,o){if(!t||t.constructor!==Object)throw new Error(`Expected ${n} to be an Object, got: ${t}`);if(a.length!==s.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${s.length}, got: ${a.length}`);for(let c of i){if(!(c in t))throw new Error(`Struct ${n} requires field ${c}:${r[c]}`);const{name:i,params:h}=this.parseTypeName(r[c]);if(s.includes(i)){const r=s.indexOf(i);let{name:h,params:u}=this.parseTypeName(a[r]);if(this.hasType(h)){this.getTypeInterface(h)._encodeRaw.call(this,e,t[c],u,o);continue}if(!(h in o))throw new Error(`Unable to find a matching type definition for ${h} in ${n}; make sure you passed a generic`);let{name:f,params:p}=this.parseTypeName(o[h]);this.getTypeInterface(f)._encodeRaw.call(this,e,t[c],p,o)}else this.getTypeInterface(i)._encodeRaw.call(this,e,t[c],h,o)}return e}),(function(e,t,a){if(t.length!==s.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${s.length}, got: ${t.length}`);let o={};for(let c of i){const{name:i,params:h}=this.parseTypeName(r[c]);if(s.includes(i)){const r=s.indexOf(i);let{name:h,params:u}=this.parseTypeName(t[r]);if(this.hasType(h)){o[c]=this.getTypeInterface(h)._decodeRaw.call(this,e,u,a);continue}if(!(h in a))throw new Error(`Unable to find a matching type definition for ${h} in ${n}; make sure you passed a generic`);let{name:f,params:p}=this.parseTypeName(a[h]);o[c]=this.getTypeInterface(f)._decodeRaw.call(this,e,p,a)}else o[c]=this.getTypeInterface(i)._decodeRaw.call(this,e,h,a)}return o}))}registerEnumType(e,t){for(let e in t){let r=this.tempKey(),i=t[e];null===i||Array.isArray(i)||"string"==typeof i||(t[e]=r,this.registerStructType(r,i))}let r=Object.freeze(t),i=Object.keys(r),{name:n,params:s}=this.parseTypeName(e);return this.registerType(e,(function(e,t,a,o){if(!t)throw new Error(`Unable to write enum "${n}", missing data.\nReceived: "${t}"`);if("object"!=typeof t)throw new Error(`Incorrect data passed into enum "${n}", expected object with properties: "${i.join(" | ")}".\nReceived: "${JSON.stringify(t)}"`);let c=Object.keys(t)[0];if(void 0===c)throw new Error(`Empty object passed as invariant of the enum "${n}"`);let h=i.indexOf(c);if(-1===h)throw new Error(`Unknown invariant of the enum "${n}", allowed values: "${i.join(" | ")}"; received "${c}"`);let u=i[h],f=r[u];if(e.write8(h),null===f)return e;let p=s.indexOf(f),y=-1===p?f:a[p];{let{name:r,params:i}=this.parseTypeName(y);return this.getTypeInterface(r)._encodeRaw.call(this,e,t[c],i,o)}}),(function(e,t,a){let o=e.readULEB(),c=i[o],h=r[c];if(-1===o)throw new Error(`Decoding type mismatch, expected enum "${n}" invariant index, received "${o}"`);if(null===h)return{[c]:!0};let u=s.indexOf(h),f=-1===u?h:t[u];{let{name:t,params:r}=this.parseTypeName(f);return{[c]:this.getTypeInterface(t)._decodeRaw.call(this,e,r,a)}}}))}getTypeInterface(e){let t=this.types.get(e);if("string"==typeof t){let e=[];for(;"string"==typeof t;){if(e.includes(t))throw new Error(`Recursive definition found: ${e.join(" -> ")} -> ${t}`);e.push(t),t=this.types.get(t)}}if(void 0===t)throw new Error(`Type ${e} is not registered`);return t}parseTypeName(e){if(Array.isArray(e)){let[t,...r]=e;return{name:t,params:r}}if("string"!=typeof e)throw new Error(`Illegal type passed as a name of the type: ${e}`);let[t,r]=this.schema.genericSeparators||["<",">"],i=e.indexOf(t),n=Array.from(e).reverse().indexOf(r);if(-1===i&&-1===n)return{name:e,params:[]};if(-1===i||-1===n)throw new Error(`Unclosed generic in name '${e}'`);return{name:e.slice(0,i),params:e.slice(i+1,e.length-n-1).split(",").map((e=>e.trim()))}}},l=d;function w(){return{genericSeparators:["<",">"],vectorType:"vector",addressLength:h,addressEncoding:"hex"}}l.U8="u8",l.U16="u16",l.U32="u32",l.U64="u64",l.U128="u128",l.U256="u256",l.BOOL="bool",l.VECTOR="vector",l.ADDRESS="address",l.STRING="string",l.HEX="hex-string",l.BASE58="base58-string",l.BASE64="base64-string"}}]);